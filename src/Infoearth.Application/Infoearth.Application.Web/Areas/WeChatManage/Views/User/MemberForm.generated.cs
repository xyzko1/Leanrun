#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Areas/WeChatManage/Views/User/MemberForm.cshtml")]
    public partial class _Areas_WeChatManage_Views_User_MemberForm_cshtml : System.Web.Mvc.WebViewPage<dynamic>
    {
        public _Areas_WeChatManage_Views_User_MemberForm_cshtml()
        {
        }
        public override void Execute()
        {
            
            #line 1 "..\..\Areas\WeChatManage\Views\User\MemberForm.cshtml"
  
    ViewBag.Title = "添加成员";
    Layout = "~/Views/Shared/_LayoutIndex.cshtml";

            
            #line default
            #line hidden
WriteLiteral("\r\n<script>\r\n    $(function () {\r\n        InitialPage();\r\n        GetMember();\r\n  " +
"      GetTree();\r\n    });\r\n    //初始化页面\r\n    function InitialPage() {\r\n        //" +
"layout布局\r\n        $(\'#layout\').layout({\r\n            applyDemoStyles: true,\r\n   " +
"         west__size: 200,\r\n            spacing_open: 0,\r\n            onresize: f" +
"unction () {\r\n                $(window).resize()\r\n            }\r\n        });\r\n  " +
"      $(\".center-Panel\").height($(window).height() - 40)\r\n    }\r\n    //加载树\r\n    " +
"var departmentid = \"card-box\";\r\n    function GetTree() {\r\n        var item = {\r\n" +
"            height: $(window).height(),\r\n            url: \"../../BaseManage/Depa" +
"rtment/GetOrganizeTreeJson\",\r\n            onnodeclick: function (item) {\r\n      " +
"          learun.loading({ isShow: true });\r\n                window.setTimeout(f" +
"unction () {\r\n                    if (item.parentnodes == \"0\") {\r\n              " +
"          $(\".card-box\").show();\r\n                        departmentid = \"card-b" +
"ox\";\r\n                    } else {\r\n                        $(\".card-box\").hide(" +
");\r\n                        $(\'.\' + item.id).show();\r\n                        de" +
"partmentid = item.id;\r\n                    }\r\n                    learun.loading" +
"({ isShow: false });\r\n                }, 200);\r\n            }\r\n        };\r\n     " +
"   //初始化\r\n        $(\"#itemTree\").treeview(item);\r\n    }\r\n    //加载成员\r\n    functio" +
"n GetMember() {\r\n        $.ajax({\r\n            url: \"../../BaseManage/User/GetLi" +
"stJson\",\r\n            type: \"get\",\r\n            dataType: \"json\",\r\n            a" +
"sync: false,\r\n            success: function (data) {\r\n                var _html " +
"= \"\";\r\n                $.each(data, function (i) {\r\n                    var row " +
"= data[i];\r\n                    var imgName = \"UserCard01.png\";\r\n               " +
"     if (row.F_Gender == 1) {\r\n                        imgName = \"UserCard02.png" +
"\";\r\n                    }\r\n                    _html += \'<div class=\"card-box \' " +
"+ row.F_DepartmentId + \'\">\';\r\n                    _html += \'    <div class=\"card" +
"-box-img\">\';\r\n                    _html += \'        <img src=\"/Content/images/\' " +
"+ imgName + \'\" />\';\r\n                    _html += \'    </div>\';\r\n               " +
"     _html += \'    <div id=\"\' + row.F_UserId + \'\" class=\"card-box-content\">\';\r\n " +
"                   _html += \'        <p>账户：\' + row.F_Account + \'</p>\';\r\n        " +
"            _html += \'        <p>姓名：\' + row.F_RealName + \'</p>\';\r\n              " +
"      _html += \'        <p>部门：\' + getInfoTop().learun.data.get([\"department\", ro" +
"w.F_DepartmentId, \"FullName\"]) + \'</p>\';\r\n                    _html += \'    </di" +
"v><i></i>\';\r\n                    _html += \'</div>\';\r\n                });\r\n      " +
"          $(\".gridPanel\").html(_html);\r\n                $(\".card-box\").click(fun" +
"ction () {\r\n                    if (!$(this).hasClass(\"active\")) {\r\n            " +
"            $(this).addClass(\"active\")\r\n                    } else {\r\n          " +
"              $(this).removeClass(\"active\")\r\n                    }\r\n            " +
"    });\r\n                learun.loading({ isShow: false });\r\n            }, befo" +
"reSend: function () {\r\n                learun.loading({ isShow: true });\r\n      " +
"      }\r\n        });\r\n        //模糊查询用户（注：这个方法是理由jquery查询）\r\n        $(\"#txt_TreeK" +
"eyword\").keyup(function () {\r\n            var value = $(this).val();\r\n          " +
"  if (value != \"\") {\r\n                window.setTimeout(function () {\r\n         " +
"           $(\".\" + departmentid)\r\n                     .hide()\r\n                " +
"     .filter(\":contains(\'\" + (value) + \"\')\")\r\n                     .show();\r\n   " +
"             }, 200);\r\n            } else {\r\n                $(\".\" + departmenti" +
"d).show();\r\n            }\r\n        }).keyup();\r\n        \r\n        var getRowData" +
" = learun.currentIframe().$(\"#gridTable\").jqGrid(\"getRowData\");\r\n        for (va" +
"r i = 0; i < getRowData.length; i++) {\r\n            $(\"#\" + getRowData[i].Id).pa" +
"rents(\'.card-box\').remove();\r\n        }\r\n    }\r\n    //保存表单\r\n    function AcceptC" +
"lick() {\r\n        var userIds = [];\r\n        $(\'.gridPanel .active .card-box-con" +
"tent\').each(function () {\r\n            userIds.push($(this).attr(\'id\'));\r\n      " +
"  });\r\n        var postData = $(\"#form1\").getWebControls();\r\n        postData[\"u" +
"serIds\"] = String(userIds)\r\n        learun.saveForm({\r\n            url: \"../../W" +
"eChatManage/User/SaveMember\",\r\n            param: postData,\r\n            success" +
": function () {\r\n                learun.currentIframe().$(\"#gridTable\").trigger(" +
"\"reloadGrid\");\r\n            }\r\n        })\r\n    }\r\n</script>\r\n<div");

WriteLiteral(" class=\"ui-layout\"");

WriteLiteral(" id=\"layout\"");

WriteLiteral(" style=\"height: 100%; width: 100%;\"");

WriteLiteral(">\r\n    <div");

WriteLiteral(" class=\"ui-layout-west\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" class=\"west-Panel\"");

WriteLiteral(" style=\"margin: 0px; border-top: none; border-left: none; border-bottom: none;\"");

WriteLiteral(">\r\n            <div");

WriteLiteral(" id=\"itemTree\"");

WriteLiteral("></div>\r\n        </div>\r\n    </div>\r\n    <div");

WriteLiteral(" class=\"ui-layout-center\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" class=\"treesearch\"");

WriteLiteral(">\r\n            <input");

WriteLiteral(" id=\"txt_TreeKeyword\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" style=\"border-top: none;\"");

WriteLiteral(" placeholder=\"请输入要查询关键字\"");

WriteLiteral(" />\r\n            <span");

WriteLiteral(" id=\"btn_TreeSearch\"");

WriteLiteral(" class=\"input-query\"");

WriteLiteral(" title=\"Search\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-search\"");

WriteLiteral("></i></span>\r\n        </div>\r\n        <div");

WriteLiteral(" class=\"center-Panel\"");

WriteLiteral(" style=\"margin: 0px; border-right: none; border-left: none; border-bottom: none; " +
"background-color: #fff; overflow: auto; padding-bottom: 10px;\"");

WriteLiteral(">\r\n            <div");

WriteLiteral(" class=\"gridPanel\"");

WriteLiteral(">\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n");

        }
    }
}
#pragma warning restore 1591

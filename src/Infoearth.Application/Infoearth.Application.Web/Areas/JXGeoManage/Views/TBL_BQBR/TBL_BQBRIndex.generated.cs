#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Optimization;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    using Infoearth.Application.Web;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Areas/JXGeoManage/Views/TBL_BQBR/TBL_BQBRIndex.cshtml")]
    public partial class _Areas_JXGeoManage_Views_TBL_BQBR_TBL_BQBRIndex_cshtml : System.Web.Mvc.WebViewPage<dynamic>
    {
        public _Areas_JXGeoManage_Views_TBL_BQBR_TBL_BQBRIndex_cshtml()
        {
        }
        public override void Execute()
        {
            
            #line 1 "..\..\Areas\JXGeoManage\Views\TBL_BQBR\TBL_BQBRIndex.cshtml"
  
    ViewBag.Title = "列表页面";
    Layout = "~/Views/Shared/_IndexMap.cshtml";

            
            #line default
            #line hidden
WriteLiteral(@"
 <style>
     .ui-layout-center {
         overflow-x: hidden !important;
     }

     .ui-layout-resizer {
         background-color: #f0f3f4 !important;
     }

     .btn-default {
         height: 32px !important;
         margin-bottom: 0px !important;
     }

     #gridTable td {
         border-right: 1px solid #ccc !important;
     }

     .ui-jqgrid-btable tr:nth-child(odd) {
         /*background:#DCDCDC*/
     }

     .fa-folder-open {
         color: transparent !important;
         background: url(""../../Content/images/zTreeStandard.png"") no-repeat;
         background-position: -110px -16px;
         margin-right: 2px;
         width: 16px !important;
         height: 16px !important;
     }

     .fa-folder {
         color: transparent !important;
         background: url(""../../Content/images/zTreeStandard.png"") no-repeat;
         background-position: -110px 0;
         margin-right: 2px;
         width: 16px !important;
         height: 16px !important;
     }

     .fa-file-o {
         color: transparent !important;
         background: url(""../../Content/images/zTreeStandard.png"") no-repeat;
         background-position: -110px -32px;
         width: 16px !important;
         height: 16px !important;
     }
 </style>
<div");

WriteLiteral(" class=\"ui-layout\"");

WriteLiteral(" id=\"layout\"");

WriteLiteral(" style=\"height: 100%; width: 100%;\"");

WriteLiteral(">\r\n    <div");

WriteLiteral(" class=\"ui-layout-west\"");

WriteLiteral(" style=\"height:100%\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" class=\"west-Panel\"");

WriteLiteral(" style=\"margin:0px;height:100%\"");

WriteLiteral(">\r\n            <div");

WriteLiteral(" class=\"panel-Title\"");

WriteLiteral(" style=\"height:40px;line-height:40px;background-color: rgba(236, 247, 255, 1);col" +
"or:#000\"");

WriteLiteral(">行政区划</div>\r\n            <div");

WriteLiteral(" id=\"itemTree\"");

WriteLiteral("></div>\r\n        </div>\r\n    </div>\r\n    <div");

WriteLiteral(" class=\"ui-layout-center\"");

WriteLiteral(" id=\"ui_center\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" class=\"center-Panel\"");

WriteLiteral(" style=\"height: 100%; width: 100%; margin-top: 0px; overflow-y: hidden;\"");

WriteLiteral(">\r\n            ");

WriteLiteral("\r\n            <div");

WriteLiteral(" class=\"ui-layout\"");

WriteLiteral(" id=\"layout2\"");

WriteLiteral(" style=\"height: 100%; width: 100%;\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" class=\"ui-layout-north\"");

WriteLiteral(" id=\"ui_map\"");

WriteLiteral(" style=\"height: 350px;position:relative;\"");

WriteLiteral(">\r\n                    <div");

WriteLiteral(" id=\"mapControl\"");

WriteLiteral(" style=\"height:350px;\"");

WriteLiteral("></div>\r\n                    <div");

WriteLiteral(" id=\"tl\"");

WriteLiteral(" style=\"position: absolute; bottom: 0%; right: 0%;\"");

WriteLiteral(">\r\n                        <img");

WriteAttribute("src", Tuple.Create(" src=\"", 3454), Tuple.Create("\"", 3486)
, Tuple.Create(Tuple.Create("", 3460), Tuple.Create<System.Object, System.Int32>(Href("~/Content/images/七大类图例.png")
, 3460), false)
);

WriteLiteral(" />\r\n                    </div>\r\n                </div>\r\n                <div");

WriteLiteral(" class=\"ui-layout-center\"");

WriteLiteral(" id=\"ui_grid\"");

WriteLiteral(">\r\n                    <div");

WriteLiteral(" class=\"titlePanel\"");

WriteLiteral(" style=\"height:40px;\"");

WriteLiteral(">\r\n                        <div");

WriteLiteral(" class=\"title-search\"");

WriteLiteral(" id=\"DZHJManage\"");

WriteLiteral(" style=\"height: 40px; line-height: 40px; width: 100%\"");

WriteLiteral(">\r\n                            <span");

WriteLiteral(" class=\"panel-Title\"");

WriteLiteral(" style=\"color:#000;margin-right:10px;\"");

WriteLiteral(">数据列表</span>\r\n                            <input");

WriteLiteral(" id=\"COMPPARAM\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" placeholder=\"灾害点名称、灾害点编号、项目名称\"");

WriteLiteral(" style=\"width: 250px; display: inline-block; margin-left: 10px\"");

WriteLiteral(" />\r\n                            <a");

WriteLiteral(" style=\"margin-left:15px\"");

WriteLiteral(" id=\"btn_Search\"");

WriteLiteral(" class=\"btn btn-primary\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-search\"");

WriteLiteral("></i>查询</a>\r\n                            <div");

WriteLiteral(" class=\"btn-group\"");

WriteLiteral(" style=\"float: right; height: 100%; display: flex; align-items: center;margin-rig" +
"ht:23px\"");

WriteLiteral(">\r\n                                <a");

WriteLiteral(" id=\"lr-replace\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral(" onclick=\"reload()\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-refresh\"");

WriteLiteral("></i>刷新</a>\r\n                                <a");

WriteLiteral(" id=\"lr-add\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral(" onclick=\"btn_add()\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-plus\"");

WriteLiteral("></i>新增</a>\r\n                                <a");

WriteLiteral(" id=\"lr-edit\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral(" onclick=\"btn_edit()\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-pencil-square-o\"");

WriteLiteral("></i>编辑</a>\r\n                                <a");

WriteLiteral(" id=\"lr-delete\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral(" onclick=\"btn_delete()\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-trash-o\"");

WriteLiteral("></i>删除</a>\r\n                                ");

WriteLiteral("\r\n                                <a");

WriteLiteral(" id=\"lr-colgrid\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral(" onclick=\"ColDataGrid()\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-chevron-down\"");

WriteLiteral("></i>列表</a>\r\n                                <a");

WriteLiteral(" id=\"lr-colmap\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral(" onclick=\"ColMapDiv()\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-chevron-up\"");

WriteLiteral("></i>地图</a>\r\n                            </div>\r\n                        </div>\r\n" +
"                        <div");

WriteLiteral(" style=\"clear:both;\"");

WriteLiteral("></div>\r\n                    </div>\r\n                    <div");

WriteLiteral(" class=\"gridPanel\"");

WriteLiteral(">\r\n                        <table");

WriteLiteral(" id=\"gridTable\"");

WriteLiteral("></table>\r\n                        <div");

WriteLiteral(" id=\"gridPager\"");

WriteLiteral("></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n" +
"        </div>\r\n    </div>\r\n</div>\r\n      \r\n\r\n");

WriteLiteral("\r\n\r\n");

DefineSection("Scripts", () => {

WriteLiteral("\r\n<script>\r\n    var layout2NorthH = 1;\r\n    var authToken = getAuthorizationToken" +
"();\r\n    var AreaCode = 0, PROVINCE = \"\", CITY = \"\", COUNTY = \"\";\r\n    var detai" +
"ls = \"02\";\r\n    $(function () {\r\n        InitialPage();\r\n        GetMapData();\r\n" +
"        GetTree();\r\n        GetGrid();\r\n        BindMapMarker();\r\n        //查询点击" +
"事件\r\n        $(\"#btn_Search\").click(function () {\r\n            SearchEvent();\r\n  " +
"      });\r\n    });\r\n    //初始化页面\r\n    function InitialPage() {\r\n        //layout布" +
"局\r\n        $(\'#layout\').layout({\r\n            west__size: 190,\r\n            appl" +
"yDemoStyles: true,\r\n            onresize: function () {\r\n                if (isR" +
"esize < 10) {\r\n                    isResize++;\r\n                }\r\n             " +
"   resize();\r\n            }\r\n        });\r\n        var isResize = 0;\r\n        var" +
" count = 0;\r\n        var resized = 0;\r\n        $(\'#layout2\').layout({\r\n         " +
"   applyDemoStyles: true,\r\n            onresize: function () {\r\n                " +
"resize();\r\n                if (isResize > 1) {\r\n                    resized = 1;" +
"\r\n                } else {\r\n                    if (count == 1 || resized == 0) " +
"{\r\n                        $(\'#layout2 .ui-layout-center\').height($(\'#layout2 .u" +
"i-layout-center\').height() - 8);\r\n                    }\r\n                }\r\n    " +
"            count++;\r\n            }\r\n        });\r\n        //resize重设布局;\r\n       " +
" $(window).resize(function (e) {\r\n            if (isResize < 10) {\r\n            " +
"    isResize++;\r\n            }\r\n            resize();\r\n            e.stopPropaga" +
"tion();\r\n        });\r\n        function resize() {\r\n            window.setTimeout" +
"(function () {\r\n                if (mapCtlExt != null) {\r\n                    ma" +
"pCtlExt.setHeight($(\'#mapControl\').parent().height() - 4);\r\n                }\r\n " +
"               $(\'#gridTable\').setGridWidth(($(\'.gridPanel\').width()));\r\n       " +
"         $(\'#layout2 .ui-layout-center\').width($(\'#layout2 .ui-layout-center\').p" +
"arent().width());\r\n                $(\'#layout2 .ui-layout-resizer\').width($(\'#la" +
"yout2 .ui-layout-center\').parent().width());\r\n                $(\'.ui-jqgrid-bdiv" +
"\').height($(\'#layout2 .ui-layout-center\').height() - 60 - 60);\r\n                " +
"$(\'#layout2 .ui-layout-center\').height($(\'#layout2\').height() - $(\'#layout2 .ui-" +
"layout-north\').height() - 5);\r\n                $(\'#gridTable\').setGridHeight($(\'" +
"#layout2 .ui-layout-center\').height() - 95 - 8);\r\n                $(\'#layout2 .u" +
"i-layout-center\').css(\'overflow\', \'hidden\');\r\n                $(\"#itemTree\").hei" +
"ght($(\'.ui-layout-west\').height() - 45);\r\n            }, 200);\r\n        };\r\n    " +
"    $(window).resize();\r\n        $(\'#layout2 .ui-layout-center\').height($(\'#layo" +
"ut2 .ui-layout-center\').height() - 8);\r\n        layout2NorthH = $(\"#layout2 .ui-" +
"layout-north\").height();\r\n    }\r\n    //加载行政区划树\r\n    function GetTree() {\r\n      " +
"  var item = {\r\n            height: $(window).height() - 52,\r\n            isAllE" +
"xpand: false,\r\n            url: \"../../Map/GetTreeJsonForMap\",\r\n            onno" +
"declick: function (item) {\r\n                AreaCode = item.id;\r\n               " +
" var level = item.value.split(\',\')[1];\r\n                if (level == -1) {\r\n    " +
"                PROVINCE = \"\";\r\n                    CITY = \"\";\r\n                " +
"    COUNTY = \"\";\r\n                } else if (level == 1) {\r\n                    " +
"PROVINCE = item.id;\r\n                    CITY = \"\";\r\n                    COUNTY " +
"= \"\";\r\n                } else if (level == 2) {\r\n                    PROVINCE = " +
"item.id.substring(0, 2) + \"0000\";\r\n                    CITY = item.id;\r\n        " +
"            COUNTY = \"\";\r\n                } else if (level == 3) {\r\n            " +
"        PROVINCE = item.id.substring(0, 2) + \"0000\";\r\n                    CITY =" +
" item.id.substring(0, 4) + \"00\";\r\n                    COUNTY = item.id;\r\n       " +
"         }\r\n                var data = [{\r\n                    latitude: item.va" +
"lue.split(\',\')[3],\r\n                    longitude: item.value.split(\',\')[2],\r\n  " +
"                  popupHtml: \"\"\r\n                }]\r\n                $(\'#btn_Sea" +
"rch\').trigger(\"click\");\r\n                mapCtlExt.addLocation(data, false, leve" +
"l);\r\n\r\n            },\r\n        };\r\n        //初始化\r\n        $(\"#itemTree\").treevie" +
"w(item);\r\n    };\r\n    //加载地图\r\n    var mapCtlExt = null;\r\n    function GetMapData" +
"() {\r\n        mapCtlExt = $(\"#mapControl\").mapCtl(\r\n            cfGetMapData({\r\n" +
"                markerDataId: \"keyID\",\r\n                getMarkerData: getMarker" +
"Data\r\n            })\r\n        );\r\n        usercode = \"");

            
            #line 258 "..\..\Areas\JXGeoManage\Views\TBL_BQBR\TBL_BQBRIndex.cshtml"
               Write(Infoearth.Application.Code.OperatorProvider.Provider.Current().XZQHCode);

            
            #line default
            #line hidden
WriteLiteral("\";\r\n        GetAreaGeometry(usercode);\r\n    };\r\n    //加载表格\r\n    function GetGrid(" +
") {\r\n        var selectedRowIndex = 0;\r\n        var queryJson = $(\"#DZHJManage\")" +
".getWebControls();\r\n        var $gridTable = $(\'#gridTable\');\r\n        $gridTabl" +
"e.jqGrid({\r\n            autowidth: true,\r\n            loadBeforeSend: function (" +
"a) {\r\n                a.setRequestHeader(\"Authorization\", authToken);\r\n         " +
"   },\r\n            height: $(window).height() - 550,\r\n            url: \"../../ap" +
"i/TBL_BQBRApi/GetPageListJson\",\r\n            datatype: \"json\",\r\n            post" +
"Data: { queryJson: JSON.stringify(queryJson) },\r\n            colModel: [\r\n      " +
"          { label: \'GUID\', name: \'GUID\', index: \'GUID\', width: 100, align: \'left" +
"\', sortable: true, hidden: true },\r\n                { label: \'灾害点名称\', name: \'DIS" +
"ASTERNAME\', index: \'DISASTERNAME\', width: 250, align: \'left\', sortable: true },\r" +
"\n                { label: \'灾害点编号\', name: \'UNIFIEDCODE\', index: \'UNIFIEDCODE\', wi" +
"dth: 150, align: \'left\', sortable: true, hidden: true },\r\n                { labe" +
"l: \'灾害体类型\', name: \'DISASTERTYPE\', index: \'DISASTERTYPE\', width: 100, align: \'lef" +
"t\', sortable: true },\r\n                { label: \'户主姓名\', name: \'HOUSEHOLDERNAME\'," +
" index: \'HOUSEHOLDERNAME\', width: 100, align: \'left\', sortable: true },\r\n       " +
"         {\r\n                    label: \'安置方式\', name: \'RESETTLEMENT\', index: \'RES" +
"ETTLEMENT\', width: 100, align: \'left\', sortable: true, formatter: function (cell" +
"value, options, rowObject) {\r\n                        if (cellvalue == \"1\") {\r\n " +
"                           return \'集中安置\';\r\n                        } else if (ce" +
"llvalue == \"2\") {\r\n                            return \'分散安置\';\r\n                 " +
"       } else if (cellvalue == \"3\") {\r\n                            return \'购房安置\'" +
";\r\n                        } else if (cellvalue == \"4\") {\r\n                     " +
"       return \'其它安置\';\r\n                        } else\r\n                         " +
"   return \"\";\r\n                    }\r\n                },\r\n                { labe" +
"l: \'经度\', name: \'LONGITUDE\', index: \'LONGITUDE\', width: 100, align: \'left\', sorta" +
"ble: true, hidden: true },\r\n                { label: \'纬度\', name: \'LATITUDE\', ind" +
"ex: \'LATITUDE\', width: 100, align: \'left\', sortable: true, hidden: true },\r\n    " +
"            {\r\n                    label: \'是否完成\', name: \'SFWC\', index: \'SFWC\', w" +
"idth: 100, align: \'center\', sortable: true, formatter: function (cellvalue, opti" +
"ons, rowObject) {\r\n                        if (cellvalue == \"1\") {\r\n            " +
"                return \'是\';\r\n                        } else if (cellvalue == \"0\"" +
") {\r\n                            return \'否\';\r\n                        } else\r\n  " +
"                          return \"\";\r\n                    }\r\n                },\r" +
"\n                {\r\n                    label: \'是否验收\', name: \'SFYS\', index: \'SFY" +
"S\', width: 100, align: \'center\', sortable: true, formatter: function (cellvalue," +
" options, rowObject) {\r\n                        if (cellvalue == \"1\") {\r\n       " +
"                     return \'是\';\r\n                        } else if (cellvalue =" +
"= \"0\") {\r\n                            return \'否\';\r\n                        } els" +
"e\r\n                            return \"\";\r\n                    }\r\n              " +
"  },\r\n                { label: \'地理位置\', name: \'LOCATION\', index: \'LOCATION\', widt" +
"h: 200, align: \'left\', sortable: true },\r\n                //{ label: \'创建时间\', nam" +
"e: \'CREATETIME\', index: \'CREATETIME\', width: 200, align: \'left\', sortable: true," +
"hidden:true },\r\n                //{ label: \'创建人\', name: \'CREATEUSER\', index: \'CR" +
"EATEUSER\', width: 200, align: \'left\', sortable: true,hidden:true },\r\n           " +
" ],\r\n            viewrecords: true,\r\n            rowNum: 30,\r\n            rowLis" +
"t: [30, 50, 100],\r\n            pager: \"#gridPager\",\r\n            sortname: \'CREA" +
"TETIME\',\r\n            sortorder: \'desc\',\r\n            rownumbers: true,\r\n       " +
"     shrinkToFit: false,\r\n            gridview: true,\r\n            onSelectRow: " +
"function (rowId, status) {\r\n                selectedRowIndex = $(\'#\' + this.id)." +
"getGridParam(\'selrow\');\r\n                var dt = $gridTable.jqGrid(\"getRowData\"" +
", rowId);\r\n                var data = [];\r\n                var longitude = 0, la" +
"titude = 0;\r\n                if (dt.LONGITUDE) {\r\n                    longitude " +
"= parseFloat(dt.LONGITUDE);\r\n                }\r\n                if (dt.LATITUDE)" +
" {\r\n                    latitude = parseFloat(dt.LATITUDE);\r\n                }\r\n" +
"                data.push({ longitude: longitude, latitude: latitude });\r\n      " +
"          if (isMarkerClick) {\r\n                    isMarkerClick = false;\r\n    " +
"            } else {\r\n                    mapCtlExt.addLocation(data, true);\r\n  " +
"              }\r\n            },\r\n            gridComplete: function () {\r\n      " +
"          $(\'#\' + this.id).setSelection(selectedRowIndex, false);\r\n            }" +
"\r\n        });\r\n    }\r\n\r\n    //加载地图marker\r\n    function BindMapMarker() {\r\n      " +
"  var queryJson = $(\"#DZHJManage\").getWebControls();\r\n        queryJson[\"PROVINC" +
"E\"] = PROVINCE;\r\n        queryJson[\"CITY\"] = CITY;\r\n        queryJson[\"COUNTY\"] " +
"= COUNTY;\r\n        queryJson[\"zhd\"] = \"zhd\";\r\n        $.ajax({\r\n            url:" +
" contentPath + \"/api/TBL_BQBRApi/GetPageListJson\",\r\n            beforeSend: func" +
"tion (a) {\r\n                if (authToken != null)\r\n                    a.setReq" +
"uestHeader(\"Authorization\", authToken);\r\n            },\r\n            datatype: \'" +
"json\',\r\n            data: { queryJson: JSON.stringify(queryJson) },\r\n           " +
" async: true,\r\n            cache: false,\r\n            type: \"GET\",\r\n            " +
"success: function (dataList) {\r\n                var data = dataList.rows;\r\n     " +
"           var returnValue = [];\r\n                var type = [];\r\n              " +
"  for (var i = 0; i < data.length; i++) {\r\n                    //详情页面\r\n         " +
"           var divhtml = \'<div style=\"font-weight: bold;\"></div>\';\r\n            " +
"        divhtml += \'<div style=\"font-weight: bold;margin-bottom:5px;\"><span styl" +
"e=\"margin-left:10px;\">灾害点编号：</span><span>\' + data[i].UNIFIEDCODE + \'</span></div" +
">\';\r\n                    divhtml += \'<div style=\"margin-bottom:5px;\"><span style" +
"=\"margin-left:10px;\">灾害点名称：</span><span>\' + data[i].DISASTERNAME + \'</span></div" +
">\';\r\n                    divhtml += \'<div style=\"margin-bottom:5px;\"><span style" +
"=\"margin-left:10px;\">灾害点类型：</span><span>\' + data[i].DISASTERTYPE + \'</span></div" +
">\';\r\n                    divhtml += \'<div><input type=\"hidden\" id=\"keyID\" value=" +
"\"\' + data[i].UNIFIEDCODE + \'\"/></div>\';\r\n                    divhtml += \'<div st" +
"yle=\"margin-bottom:5px;\"><span style=\"margin-left:10px;\">地 理 位 置：</span><span>\' " +
"+ data[i].LOCATION + \'</span></div>\';\r\n                    //预留 divhtml += \'<spa" +
"n style=\"margin-right:20px; float:right; cursor: pointer;\"><a onclick=\"ViewDetai" +
"l(\\\'\' + data[i].UNIFIEDCODE + \'\\\')\" href=\"#\" class=\"link-detail\">详细信息</a></span>" +
"\';\r\n\r\n                    var longitude, latitude;\r\n                    if (data" +
"[i].LONGITUDE != \'\' && data[i].LONGITUDE != null && data[i].LONGITUDE != undefin" +
"ed) {\r\n                        longitude = parseFloat(data[i].LONGITUDE);\r\n     " +
"               }\r\n                    if (data[i].LATITUDE != \'\' && data[i].LATI" +
"TUDE != null && data[i].LATITUDE != undefined) {\r\n                        latitu" +
"de = parseFloat(data[i].LATITUDE);\r\n                    }\r\n                    r" +
"eturnValue.push({ id: \"all\", url: contentPath + \"/Content/images/\" + data[i].DIS" +
"ASTERTYPE + \"-16.png\", location: [longitude, latitude], popupHtml: divhtml });\r\n" +
"\r\n                }\r\n                mapCtlExt.addMarker(returnValue);\r\n        " +
"    }, error: function (e) {\r\n            },\r\n            cache: false\r\n        " +
"});\r\n    };\r\n    //获取点击Marker时对应的数据\r\n    var isMarkerClick = false;\r\n    functio" +
"n getMarkerData(UNIFIEDCODE) {\r\n        isMarkerClick = true;\r\n        var datas" +
" = $(\'#gridTable\').jqGrid(\"getRowData\");\r\n        var count = 0;\r\n        $.each" +
"(datas, function (i, e) {\r\n            if (e.UNIFIEDCODE.trim().indexOf(UNIFIEDC" +
"ODE) > -1) {\r\n                count = 1;\r\n                $(\'#gridTable\').setSel" +
"ection(i + 1);\r\n                $(\'#gridTable tr\').eq(i + 1).focus();\r\n         " +
"   }\r\n        });\r\n        if (count == 0) {\r\n            $.ajax({\r\n            " +
"    url: \"../../api/TBL_BQBRApi/GetFormJson\",\r\n                beforeSend: funct" +
"ion (request) {\r\n                    request.setRequestHeader(\"Authorization\", a" +
"uthToken);\r\n                },\r\n                data: { keyValue: UNIFIEDCODE }," +
"\r\n                type: \"get\",\r\n                dataType: \"json\",\r\n             " +
"   success: function (res) {\r\n                    var rowId = datas.length + 1;\r" +
"\n                    $(\"#gridTable\").addRowData(rowId.toString(), res);\r\n       " +
"             window.setTimeout(function () { $(\'#gridTable\').setSelection(rowId)" +
"; }, 200);\r\n                    $(\'#gridTable tr:last\').focus();\r\n              " +
"  },\r\n            });\r\n        };\r\n    };\r\n    //详情\r\n    function btn_message() " +
"{\r\n        var keyValue = $(\"#gridTable\").jqGridRowValue(\'GUID\');\r\n        if (c" +
"heckedRow(keyValue)) {\r\n            ViewMonitorDetail(keyValue);\r\n        }\r\n   " +
" }\r\n    //详情新标签栏打开方式\r\n    function ViewMonitorDetail(keyValue) {\r\n        getInf" +
"oTop().tablist.newTab({\r\n            id: \"Form\",\r\n            closed: true,\r\n   " +
"         replace: true,\r\n            icon: \"fa fa-file-text-o\",\r\n            id:" +
" \'Form\',\r\n            title: \"搬迁避让详情\",\r\n            url: \'/JXGeoManage/TBL_BQBR/" +
"TBL_BQBRForm?keyValue=\' + keyValue + \'&IdetIfrem=Idetnew\' + \"&readonly=01\",\r\n   " +
"         callBack: function (iframeId) {\r\n                getInfoTop().frames[if" +
"rameId].AcceptClick();\r\n            }\r\n        });\r\n    }\r\n    var bj = \"yincang" +
"\";\r\n    //新增\r\n    function btn_add() {\r\n        dialogOpen({\r\n            id: \'B" +
"QBRXQ\',\r\n            title: \'添加搬迁避让信息表\',\r\n            url: \"/JXGeoManage/TBL_BQB" +
"R/TBL_BQBRForm?bj=\" + bj,\r\n            width: \'1100px\',\r\n            height: \'64" +
"0px\',\r\n            callBack: function (iframeId) {\r\n                getInfoTop()" +
".frames[iframeId].AcceptClick();\r\n                $(\'#gridTable\').trigger(\'reloa" +
"dGrid\');\r\n            }\r\n        });\r\n    }\r\n    //编辑\r\n    function btn_edit() {" +
"\r\n        var keyValue = $(\"#gridTable\").jqGridRowValue(\'GUID\');\r\n        if (ch" +
"eckedRow(keyValue)) {\r\n            dialogOpen({\r\n                id: \'BQBRXQ\',\r\n" +
"                title: \'编辑搬迁避让信息表\',\r\n                url: \'/JXGeoManage/TBL_BQBR" +
"/TBL_BQBRForm?keyValue=\' + keyValue + \"&details=\" + details + \"&bj=\" + bj,\r\n    " +
"            width: \'1100px\',\r\n                height: \'640px\',\r\n                " +
"callBack: function (iframeId) {\r\n                    getInfoTop().frames[iframeI" +
"d].AcceptClick();\r\n                }\r\n            })\r\n        }\r\n    }\r\n    //删除" +
"\r\n    function btn_delete() {\r\n        var keyValue = $(\"#gridTable\").jqGridRowV" +
"alue(\'GUID\');\r\n        if (keyValue) {\r\n            $.RemoveForm({\r\n            " +
"    url: \"../../api/TBL_BQBRApi/RemoveForm\",\r\n                param: { \"\": keyVa" +
"lue },\r\n                authToken: authToken,\r\n                success: function" +
" (data) {\r\n                    $(\'#gridTable\').trigger(\'reloadGrid\');\r\n         " +
"       }\r\n            })\r\n        } else {\r\n            dialogMsg(\'请选择需要删除的搬迁避让信" +
"息表！\', 0);\r\n        }\r\n    }\r\n    //查询表格函数\r\n    function SearchEvent() {\r\n       " +
" var queryJson = $(\"#DZHJManage\").getWebControls();\r\n        queryJson[\"PROVINCE" +
"\"] = PROVINCE;\r\n        queryJson[\"CITY\"] = CITY;\r\n        queryJson[\"COUNTY\"] =" +
" COUNTY;\r\n        $(\"#gridTable\").jqGrid(\'setGridParam\', {\r\n            loadBefo" +
"reSend: function (a) {\r\n                a.setRequestHeader(\"Authorization\", auth" +
"Token);\r\n            },\r\n            postData: { queryJson: JSON.stringify(query" +
"Json) },\r\n            url: \"../../api/TBL_BQBRApi/GetPageListJson\",\r\n           " +
" page: 1\r\n        }).trigger(\'reloadGrid\');\r\n        BindMapMarker();\r\n    }\r\n  " +
"  function ColDataGrid() {\r\n        var centerHeight = $(\"#layout2\").height();\r\n" +
"        var layout2 = $(\'#layout2\').layout();\r\n        if ($(\"#lr-colgrid i\").ha" +
"sClass(\"fa-chevron-down\")) {\r\n            var northH = centerHeight - 65;\r\n     " +
"       layout2.sizePane(\"north\", northH);\r\n            $(\"#lr-colgrid i\").remove" +
"Class(\"fa-chevron-down\");\r\n            $(\"#lr-colgrid i\").addClass(\"fa-chevron-u" +
"p\");\r\n            if ($(\"#lr-colmap i\").hasClass(\"fa-chevron-down\")) {\r\n        " +
"        $(\"#lr-colmap i\").removeClass(\"fa-chevron-down\");\r\n                $(\"#l" +
"r-colmap i\").addClass(\"fa-chevron-up\");\r\n            }\r\n        }\r\n        else " +
"{\r\n            layout2.sizePane(\"north\", layout2NorthH);\r\n            $(\"#lr-col" +
"grid i\").removeClass(\"fa-chevron-up\");\r\n            $(\"#lr-colgrid i\").addClass(" +
"\"fa-chevron-down\");\r\n        }\r\n        mapCtlExt.updateSize();\r\n    }\r\n    func" +
"tion ColMapDiv() {\r\n        var layout2 = $(\'#layout2\').layout();\r\n        if ($" +
"(\"#lr-colmap i\").hasClass(\"fa-chevron-up\")) {\r\n            layout2.sizePane(\"nor" +
"th\", 1);\r\n            $(\"#lr-colmap i\").removeClass(\"fa-chevron-up\");\r\n         " +
"   $(\"#lr-colmap i\").addClass(\"fa-chevron-down\");\r\n            if ($(\"#lr-colgri" +
"d i\").hasClass(\"fa-chevron-up\")) {\r\n                $(\"#lr-colgrid i\").removeCla" +
"ss(\"fa-chevron-up\");\r\n                $(\"#lr-colgrid i\").addClass(\"fa-chevron-do" +
"wn\");\r\n            }\r\n        }\r\n        else {\r\n            layout2.sizePane(\"n" +
"orth\", layout2NorthH);\r\n            $(\"#lr-colmap i\").removeClass(\"fa-chevron-do" +
"wn\");\r\n            $(\"#lr-colmap i\").addClass(\"fa-chevron-up\");\r\n            if " +
"(mapCtlExt != null) {\r\n                mapCtlExt.setHeight($(\"#mapControl\").pare" +
"nt().height() - 32 - 4);\r\n            }\r\n        }\r\n        mapCtlExt.updateSize" +
"();\r\n    }\r\n</script>\r\n");

});

        }
    }
}
#pragma warning restore 1591

#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Optimization;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    using Infoearth.Application.Web;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Areas/JXGeoManage/Views/TBL_ACHIEVEMENT_PREPLAN/TBL_ACHIEVEMENT_PREPLANIndex.cs" +
        "html")]
    public partial class _Areas_JXGeoManage_Views_TBL_ACHIEVEMENT_PREPLAN_TBL_ACHIEVEMENT_PREPLANIndex_cshtml : System.Web.Mvc.WebViewPage<dynamic>
    {
        public _Areas_JXGeoManage_Views_TBL_ACHIEVEMENT_PREPLAN_TBL_ACHIEVEMENT_PREPLANIndex_cshtml()
        {
        }
        public override void Execute()
        {
            
            #line 1 "..\..\Areas\JXGeoManage\Views\TBL_ACHIEVEMENT_PREPLAN\TBL_ACHIEVEMENT_PREPLANIndex.cshtml"
  
    ViewBag.Title = "防治规划列表页面";
    Layout = "~/Views/Shared/_IndexMap.cshtml";

            
            #line default
            #line hidden
WriteLiteral(@"
 <style>
    .ui-layout-center {
       overflow-x: hidden !important;
    }
    .ui-layout-resizer {
        background-color:#f0f3f4 !important;
    }
     .fa-folder-open {
         color: transparent !important;
         background: url(""../../Content/images/zTreeStandard.png"") no-repeat;
         background-position: -110px -16px;
         margin-right: 2px;
         width: 16px !important;
         height: 16px !important;
     }

     .fa-folder {
         color: transparent !important;
         background: url(""../../Content/images/zTreeStandard.png"") no-repeat;
         background-position: -110px 0;
         margin-right: 2px;
         width: 16px !important;
         height: 16px !important;
     }

     .fa-file-o {
         color: transparent !important;
         background: url(""../../Content/images/zTreeStandard.png"") no-repeat;
         background-position: -110px -32px;
         width: 16px !important;
         height: 16px !important;
     }
</style>
<div");

WriteLiteral(" class=\"ui-layout\"");

WriteLiteral(" id=\"layout\"");

WriteLiteral(" style=\"height: 100%; width: 100%;\"");

WriteLiteral(">\r\n    <div");

WriteLiteral(" class=\"ui-layout-west\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" class=\"west-Panel\"");

WriteLiteral(" style=\"margin:0\"");

WriteLiteral(">\r\n             <div");

WriteLiteral(" class=\"panel-Title\"");

WriteLiteral(">行政区划信息</div>\r\n             <div");

WriteLiteral(" id=\"itemTree\"");

WriteLiteral("></div>\r\n        </div>\r\n    </div>\r\n    <div");

WriteLiteral(" class=\"ui-layout-center\"");

WriteLiteral(" id=\"ui_center\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" class=\"center-Panel\"");

WriteLiteral(" style=\"height: 100%;margin:0\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" class=\"ui-layout\"");

WriteLiteral(" id=\"layout2\"");

WriteLiteral(" style=\"height: 100%; width: 100%;\"");

WriteLiteral(">\r\n           <div");

WriteLiteral(" class=\"ui-layout-north\"");

WriteLiteral(" id=\"ui_map\"");

WriteLiteral(" style=\"height: 350px;\"");

WriteLiteral(">\r\n                  <div");

WriteLiteral(" id=\"mapControl\"");

WriteLiteral(" style=\"height:350px;\"");

WriteLiteral("></div>\r\n          </div>\r\n          <div");

WriteLiteral(" class=\"ui-layout-center\"");

WriteLiteral(" id=\"ui_grid\"");

WriteLiteral(">\r\n                    <div");

WriteLiteral(" class=\"titlePanel\"");

WriteLiteral(" style=\"height:40px;\"");

WriteLiteral(">\r\n                        <div");

WriteLiteral(" class=\"title-search\"");

WriteLiteral(" id=\"DZHJManage\"");

WriteLiteral(" style=\"height: 40px; line-height: 40px; width: 100%\"");

WriteLiteral(">\r\n                            <div");

WriteLiteral(" class=\"title-search\"");

WriteLiteral(" id=\"filter-form\"");

WriteLiteral(" style=\"height:40px;line-height:40px\"");

WriteLiteral(">\r\n                                <span");

WriteLiteral(" class=\"panel-Title\"");

WriteLiteral(" style=\"color:#000;margin-right:10px;\"");

WriteLiteral(">数据列表</span>\r\n                                <input");

WriteLiteral(" id=\"COMPPARAM\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" placeholder=\"灾害点名称、成果名称\"");

WriteLiteral(" style=\"width: 250px; display: inline-block; margin-left: 10px\"");

WriteLiteral(" />\r\n                                <a");

WriteLiteral(" style=\"margin-left:15px\"");

WriteLiteral(" id=\"btn_Search\"");

WriteLiteral(" class=\"btn btn-primary\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-search\"");

WriteLiteral("></i>查询</a>\r\n                            </div>\r\n                            <div" +
"");

WriteLiteral(" class=\"btn-group\"");

WriteLiteral(" style=\"float: right; height: 100%; display: flex; align-items: center;margin-rig" +
"ht:23px\"");

WriteLiteral(">\r\n                                <a");

WriteLiteral(" id=\"lr-replace\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral(" onclick=\"reload()\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-refresh\"");

WriteLiteral("></i>刷新</a>\r\n                                <a");

WriteLiteral(" id=\"lr-add\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral(" onclick=\"btn_add()\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-plus\"");

WriteLiteral("></i>新增</a>\r\n                                <a");

WriteLiteral(" id=\"lr-edit\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral(" onclick=\"btn_edit()\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-pencil-square-o\"");

WriteLiteral("></i>编辑</a>\r\n                                <a");

WriteLiteral(" id=\"lr-delete\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral(" onclick=\"btn_delete()\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-trash-o\"");

WriteLiteral("></i>删除</a>\r\n                                <a");

WriteLiteral(" id=\"lr-colgrid\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral(" onclick=\"ColDataGrid()\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-chevron-down\"");

WriteLiteral("></i>列表</a>\r\n                                <a");

WriteLiteral(" id=\"lr-colmap\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral(" onclick=\"ColMapDiv()\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-chevron-up\"");

WriteLiteral("></i>地图</a>\r\n                            </div>\r\n                        </div>\r\n" +
"                        <div");

WriteLiteral(" style=\"clear:both;\"");

WriteLiteral("></div>\r\n                    </div>\r\n                  <div");

WriteLiteral(" class=\"gridPanel\"");

WriteLiteral(">\r\n                      <table");

WriteLiteral(" id=\"gridTable\"");

WriteLiteral("></table>\r\n                    <div");

WriteLiteral(" id=\"gridPager\"");

WriteLiteral("></div>\r\n                  </div>\r\n              </div>\r\n          </div>\r\n      " +
" </div>\r\n    </div>\r\n </div>\r\n\r\n");

DefineSection("Scripts", () => {

WriteLiteral("\r\n<script>\r\n    var layout2NorthH = 1;\r\n    var authToken = getAuthorizationToken" +
"();\r\n    var AreaCode = 0, PROVINCE = \"\", CITY = \"\", COUNTY = \"\";\r\n    $(functio" +
"n () {\r\n        InitialPage();\r\n        GetTree();\r\n        GetMapData();\r\n     " +
"   GetGrid();\r\n        BindMapMarker();\r\n        //查询点击事件\r\n        $(\"#btn_Searc" +
"h\").click(function () {\r\n            SearchEvent();\r\n        });\r\n    });\r\n    /" +
"/初始化页面\r\n    function InitialPage() {\r\n        //layout布局\r\n        $(\'#layout\').l" +
"ayout({\r\n                west__size: 190,\r\n                applyDemoStyles: true" +
",\r\n                onresize: function () {\r\n                if (isResize < 10) {" +
"\r\n                    isResize++;\r\n                }\r\n                resize();\r" +
"\n             }\r\n         });\r\n        var isResize = 0;\r\n        var count = 0;" +
"\r\n        var resized = 0;\r\n        $(\'#layout2\').layout({\r\n            applyDem" +
"oStyles: true,\r\n            onresize: function () {\r\n                resize();\r\n" +
"                if (isResize > 1) {\r\n                resized = 1;\r\n             " +
"    } else {\r\n                    if (count == 1 || resized == 0) {\r\n           " +
"             $(\'#layout2 .ui-layout-center\').height($(\'#layout2 .ui-layout-cente" +
"r\').height() - 18);\r\n                    }\r\n                 }\r\n                " +
"  count++;\r\n             }\r\n         });\r\n          //resize重设布局;\r\n         $(wi" +
"ndow).resize(function (e) {\r\n              if (isResize<10) {\r\n                 " +
"isResize ++;\r\n              }\r\n              resize();\r\n              e.stopProp" +
"agation();\r\n         });\r\n         function resize() {\r\n              window.set" +
"Timeout(function () {\r\n                  if (mapCtlExt != null) {\r\n             " +
"           mapCtlExt.setHeight($(\'#mapControl\').parent().height() - 4);\r\n       " +
"           }\r\n                  $(\'.center-Panel\').height($(\'#layout\').parent()." +
"height() - 2);\r\n                  $(\'#gridTable\').setGridWidth(($(\'.gridPanel\')." +
"width()));\r\n                  $(\'#layout2 .ui-layout-center\').width($(\'#layout2 " +
".ui-layout-center\').parent().width() - 10);\r\n                  $(\'#layout2 .ui-l" +
"ayout-resizer\').width($(\'#layout2 .ui-layout-center\').parent().width() - 10);\r\n " +
"                 $(\'.ui-jqgrid-bdiv\').height($(\'#layout2 .ui-layout-center\').hei" +
"ght() - 60 - 60);\r\n                  $(\'#itemTree\').setTreeHeight($(window).heig" +
"ht() - 52);\r\n                  $(\'#layout2 .ui-layout-center\').height($(\'#layout" +
"2\').height() - $(\'#layout2 .ui-layout-north\').height() - 5);\r\n                  " +
"$(\'#gridTable\').setGridHeight($(\'#layout2 .ui-layout-center\').height() - 105 + 8" +
");\r\n                  $(\'#layout2 .ui-layout-center\').css(\'overflow\', \'hidden\');" +
"\r\n              }, 200);\r\n           };\r\n           $(window).resize();\r\n       " +
"    $(\'#layout2 .ui-layout-center\').height($(\'#layout2 .ui-layout-center\').heigh" +
"t() - 18);\r\n           layout2NorthH = $(\"#layout2 .ui-layout-north\").height();\r" +
"\n     }\r\n    //加载行政区划树\r\n    function GetTree() {\r\n        var item = {\r\n        " +
"    height: $(window).height() - 52,\r\n            isAllExpand: false,\r\n         " +
"   url: \"../../Map/GetTreeJsonForMap\",\r\n            onnodeclick: function (item)" +
" {\r\n                AreaCode = item.id;\r\n                var level = item.value." +
"split(\',\')[1];\r\n                if (level == 1) {\r\n                    PROVINCE " +
"= item.id;\r\n                    CITY = \"\";\r\n                    COUNTY = \"\";\r\n  " +
"              } else if (level == 2) {\r\n                    PROVINCE = item.id.s" +
"ubstring(0, 2) + \"0000\";\r\n                    CITY = item.id;\r\n                 " +
"   COUNTY = \"\";\r\n                } else if (level == 3) {\r\n                    P" +
"ROVINCE = item.id.substring(0, 2) + \"0000\";\r\n                    CITY = item.id." +
"substring(0, 4) + \"00\";\r\n                    COUNTY = item.id;\r\n                " +
"}\r\n                var data = [{\r\n                    latitude: item.value.split" +
"(\',\')[3],\r\n                    longitude: item.value.split(\',\')[2],\r\n           " +
"         popupHtml: \"\"\r\n                }]\r\n                mapCtlExt.addLocatio" +
"n(data,false,level);\r\n                $(\'#btn_Search\').trigger(\"click\");\r\n      " +
"      },\r\n        };\r\n        //初始化\r\n        $(\"#itemTree\").treeview(item);\r\n   " +
" };\r\n    //加载地图\r\n    var mapCtlExt = null;\r\n    function GetMapData() {\r\n       " +
"   $.ajax({\r\n             url: \'../../Map/GetMapDatas\',\r\n             async: fal" +
"se,\r\n             type: \"GET\",\r\n             success: function (data) {\r\n       " +
"                var dataSet = JSON.parse(data);\r\n                        mapCtlE" +
"xt= $(\"#mapControl\").mapCtl({\r\n                                mapwidth: 1500,\r\n" +
"                                isShowGisLayer:false,\r\n                         " +
"       isFrame:true,\r\n                                dataset: dataSet,\r\n       " +
"                         zoom: center.split(\',\')[2],\r\n                          " +
"      center: [center.split(\',\')[0], center.split(\',\')[1]],\r\n                   " +
"             isCluster: true\r\n                             });\r\n                " +
"        }, error: function (e) {\r\n                    },\r\n             cache: fa" +
"lse\r\n         });\r\n    };\r\n   \r\n\r\n\r\n    //加载表格\r\n    function GetGrid() {\r\n      " +
"  var selectedRowIndex = 0;\r\n        var queryJson = $(\"#DZHJManage\").getWebCont" +
"rols();\r\n        var $gridTable = $(\'#gridTable\');\r\n        $gridTable.jqGrid({\r" +
"\n            autowidth: true,\r\n            loadBeforeSend: function (a) {\r\n     " +
"           a.setRequestHeader(\"Authorization\", authToken);\r\n            },\r\n    " +
"        postData: { queryJson: JSON.stringify(queryJson) },\r\n            height:" +
" $(window).height() - 560 + 8,\r\n            url: \"../../api/TBL_ACHIEVEMENT_PREP" +
"LAN/GetPageListJson\",\r\n            datatype: \"json\",\r\n            colModel: [\r\n " +
"               { label: \'主键\', name: \'GUID\', index: \'GUID\', width: 100, align: \'l" +
"eft\', sortable: true, hidden: true },\r\n                { label: \'成果名称\', name: \'A" +
"CHIEVEMENTNAME\', index: \'ACHIEVEMENTNAME\', width: 200, align: \'left\', sortable: " +
"true },\r\n                { label: \'灾害点名称\', name: \'DISASTERNAME\', index: \'DISASTE" +
"RNAME\', width: 250, align: \'left\', sortable: true },\r\n                {\r\n       " +
"             label: \'规划区域类型\', name: \'AREATYPE\', index: \'AREATYPE\', width: 150, a" +
"lign: \'left\', sortable: true,\r\n                    formatter: function (cellvalu" +
"e, options, rowObject) {\r\n                        if (cellvalue == \"A\") {\r\n     " +
"                       return \'国家规划\';\r\n                        }\r\n              " +
"          else if (cellvalue ==\"B\") {\r\n                            return \'地区规划\'" +
";\r\n                        }\r\n                        else if (cellvalue == \"C\")" +
" {\r\n                            return \'流域规划\';\r\n                        }\r\n     " +
"                   else\r\n                            return \"\";\r\n               " +
"     }\r\n\r\n                },\r\n                {\r\n                    label: \'规划时" +
"间类型\', name: \'TIMETYPE\', index: \'TIMETYPE\', width: 150, align: \'left\', sortable: " +
"true,\r\n                    formatter: function (cellvalue, options, rowObject) {" +
"\r\n                        if (cellvalue == \"A\") {\r\n                            r" +
"eturn \'超长期规划\';\r\n                        }\r\n                        else if (cell" +
"value == \"B\") {\r\n                            return \'长期规划\';\r\n                   " +
"     }\r\n                        else if (cellvalue == \"C\") {\r\n                  " +
"          return \'中期规划\';\r\n                        }\r\n                        els" +
"e if (cellvalue == \"D\") {\r\n                            return \'短期规划\';\r\n         " +
"               }\r\n                        else\r\n                            retu" +
"rn \"\";\r\n                    }\r\n                },\r\n                {\r\n          " +
"          label: \'地质灾害类型\', name: \'DISASTERTYPE\', index: \'DISASTERTYPE\', width: 1" +
"50, align: \'left\', sortable: true,\r\n                    formatter: function (cel" +
"lvalue, options, rowObject) {\r\n                        if (cellvalue == \"A\") {\r\n" +
"                            return \'单类地质灾害防治规划\';\r\n                        }\r\n   " +
"                     else if (cellvalue ==\"B\") {\r\n                            re" +
"turn \'综合地质灾害防治规划\';\r\n                        }\r\n                        else\r\n   " +
"                         return \"\";\r\n                    }\r\n                },\r\n" +
"                { label: \'方案编写人\', name: \'WRITENAME\', index: \'WRITENAME\', width: " +
"100, align: \'left\', sortable: true },\r\n                { label: \'方案编写日期\', name: " +
"\'WRITETIME\', index: \'WRITETIME\', width: 150, align: \'left\', sortable: true },\r\n " +
"               { label: \'方案版本号\', name: \'VESION\', index: \'VESION\', width: 150, al" +
"ign: \'left\', sortable: true },\r\n                {\r\n                    label: \'成" +
"果文件\', name: \'DOWNLOAD\', index: \'DOWNLOAD\', width: 100, align: \'left\', sortable: " +
"true,\r\n                    formatter: function (cellvalue, options, rowObject) {" +
"\r\n                        return \"<a class=\\\"label-success btn\\\" onclick=\\\"Multi" +
"MediaView(\'\" + rowObject.GUID + \"\')\\\"><i class=\'fa fa-smile-o\'></i>&nbsp;查看</a>\"" +
";\r\n                    }\r\n\r\n                },\r\n\r\n                { label: \'防治内容" +
"\', name: \'PREVENTION\', index: \'PREVENTION\', width: 100, align: \'left\', sortable:" +
" true, hidden: true },\r\n                { label: \'目前稳定程度\', name: \'CURSTABLESTATU" +
"S\', index: \'CURSTABLESTATUS\', width: 100, align: \'left\', sortable: true, hidden:" +
" true },\r\n                { label: \'今后变化趋势\', name: \'STABLETREND\', index: \'STABLE" +
"TREND\', width: 100, align: \'left\', sortable: true, hidden: true },\r\n            " +
"    { label: \'防治原则和目标\', name: \'PRINCIPLEGOAL\', index: \'PRINCIPLEGOAL\', width: 10" +
"0, align: \'left\', sortable: true, hidden: true },\r\n                { label: \'总体部" +
"署和主要任务\', name: \'MAINTAST\', index: \'MAINTAST\', width: 100, align: \'left\', sortabl" +
"e: true, hidden: true },\r\n                { label: \'防治预期效果\', name: \'DESIREDRESUL" +
"T\', index: \'DESIREDRESULT\', width: 100, align: \'left\', sortable: true, hidden: t" +
"rue },\r\n                { label: \'易发区域\', name: \'PRONEAREA\', index: \'PRONEAREA\', " +
"width: 100, align: \'left\', sortable: true, hidden: true },\r\n                { la" +
"bel: \'重点防治区域\', name: \'MAINPREVENTAREA\', index: \'MAINPREVENTAREA\', width: 100, al" +
"ign: \'left\', sortable: true, hidden: true },\r\n                { label: \'方案录入人\', " +
"name: \'CREATENAME\', index: \'CREATENAME\', width: 100, align: \'left\', sortable: tr" +
"ue, hidden: true },\r\n                { label: \'方案录入日期\', name: \'CREATETIME\', inde" +
"x: \'CREATETIME\', width: 100, align: \'left\', sortable: true, hidden: true },\r\n   " +
"             { label: \'灾害点编号\', name: \'UNIFIEDCODE\', index: \'UNIFIEDCODE\', width:" +
" 100, align: \'left\', sortable: true, hidden: true },\r\n                { label: \'" +
"地理位置\', name: \'LOCATION\', index: \'LOCATION\', width: 100, align: \'left\', sortable:" +
" true, hidden: true },\r\n                { label: \'经度\', name: \'LONGITUDE\', index:" +
" \'LONGITUDE\', width: 100, align: \'left\', sortable: true, hidden: true },\r\n      " +
"          { label: \'纬度\', name: \'LATITUDE\', index: \'LATITUDE\', width: 100, align:" +
" \'left\', sortable: true, hidden: true },\r\n                { label: \'省名称\', name: " +
"\'PROVINCENAME\', index: \'PROVINCENAME\', width: 100, align: \'left\', sortable: true" +
", hidden: true },\r\n                { label: \'市名称\', name: \'CITYNAME\', index: \'CIT" +
"YNAME\', width: 100, align: \'left\', sortable: true, hidden: true },\r\n            " +
"    { label: \'乡镇名称\', name: \'TOWNNAME\', index: \'TOWNNAME\', width: 100, align: \'le" +
"ft\', sortable: true, hidden: true },\r\n                { label: \'县名称\', name: \'COU" +
"NTYNAME\', index: \'COUNTYNAME\', width: 100, align: \'left\', sortable: true, hidden" +
": true },\r\n            ],\r\n            viewrecords: true,\r\n            rowNum: 3" +
"0,\r\n            rowList: [30, 50, 100],\r\n            pager: \"#gridPager\",\r\n     " +
"       sortname: \'GUID\',\r\n            sortorder: \'desc\',\r\n            rownumbers" +
": true,\r\n            shrinkToFit: false,\r\n            gridview: true,\r\n         " +
"   onSelectRow: function(rowId, status) {\r\n                selectedRowIndex = $(" +
"\'#\' + this.id).getGridParam(\'selrow\');\r\n                var dt = $gridTable.jqGr" +
"id(\"getRowData\", rowId);\r\n                var data = [];\r\n                var lo" +
"ngitude = 0, latitude = 0;\r\n                if (dt.LONGITUDE) {\r\n               " +
"     longitude = parseFloat(dt.LONGITUDE);\r\n                }\r\n                i" +
"f (dt.LATITUDE) {\r\n                    latitude = parseFloat(dt.LATITUDE);\r\n    " +
"            }\r\n                data.push({ longitude: longitude, latitude: latit" +
"ude });\r\n                mapCtlExt.addLocation(data,true);\r\n            },\r\n    " +
"        gridComplete: function () {\r\n                $(\'#\' + this.id).setSelecti" +
"on(selectedRowIndex, false);\r\n            }\r\n        });\r\n    }\r\n\r\n    //规划治理多媒体" +
"\r\n    function MultiMediaView(GUID) {\r\n        dialogOpen({\r\n            id: \"Da" +
"taInspection\" + GUID,\r\n            title: \"防治规划成果中文件详情\",\r\n            closed: tr" +
"ue,\r\n            replace: true,\r\n            width: \'1100px\',\r\n            heigh" +
"t: \'640px\',\r\n            url: top.contentPath + \"/JXGeoManage/TBL_ACHIEVEMENT_PR" +
"EPLAN/TBL_PREPLANMultiMedia?details=01\" + \"&keyValue=\" + GUID,\r\n        })\r\n    " +
"}\r\n\r\n    //加载地图marker\r\n    function BindMapMarker() {\r\n        var queryJson = $" +
".extend($(\"#filter-form\").getWebControls(), $(\"#DZHJManage\").getWebControls());\r" +
"\n        $.ajax({\r\n            url: contentPath + \"/api/TBL_ACHIEVEMENT_PREPLAN/" +
"GetPageListJson\",\r\n            beforeSend: function (a) {\r\n                if (a" +
"uthToken != null)\r\n                    a.setRequestHeader(\"Authorization\", authT" +
"oken);\r\n            },\r\n            datatype: \'json\',\r\n            data: { query" +
"Json: JSON.stringify(queryJson) },\r\n            async: true,\r\n            cache:" +
" false,\r\n            type: \"GET\",\r\n            success: function (dataList) {\r\n " +
"               var data = eval(dataList.rows);\r\n                var returnValue " +
"= [];\r\n                var type = [];\r\n                for (var i = 0; i < data." +
"length; i++) {\r\n                    //详情页面\r\n                    var divhtml = \'<" +
"div style=\"font-weight: bold;\"></div>\';\r\n                    divhtml += \'<div st" +
"yle=\"font-weight: bold;margin-bottom:5px;\"><span style=\"margin-left:10px;\">治理工程名" +
"称：</span><span>\' + data[i].ACHIEVEMENTNAME + \'</span></div>\';\r\n                 " +
"   divhtml += \'<div style=\"margin-bottom:5px;\"><span style=\"margin-left:10px;\">灾" +
"害点名称：</span><span>\' + data[i].DISASTERNAME + \'</span></div>\';\r\n                 " +
"   divhtml += \'<div style=\"margin-bottom:5px;\"><span style=\"margin-left:10px;\">灾" +
"害点类型：</span><span>\' + data[i].DISASTERTYPE + \'</span></div>\';\r\n                 " +
"   divhtml += \'<div style=\"margin-bottom:5px;\"><span style=\"margin-left:10px;\">成" +
"果地理位置：</span><span>\' + data[i].LOCATION + \'</span></div>\';\r\n                    " +
"//divhtml += \'<span style=\"margin-right:20px; float:right; cursor: pointer;\"><a " +
"onclick=\"ViewZLGCDetail(\\\'\' + data[i].GUID + \'\\\')\" href=\"#\" class=\"link-detail\">" +
"详细信息</a></span>\';\r\n\r\n                    var longitude, latitude;\r\n             " +
"       if (data[i].LONGITUDE != \'\' && data[i].LONGITUDE != null && data[i].LONGI" +
"TUDE != undefined) {\r\n                        longitude = parseFloat(data[i].LON" +
"GITUDE);\r\n                    }\r\n                    if (data[i].LATITUDE != \'\' " +
"&& data[i].LATITUDE != null && data[i].LATITUDE != undefined) {\r\n               " +
"         latitude = parseFloat(data[i].LATITUDE);\r\n                    }\r\n      " +
"              returnValue.push({ id: \"all\", url: contentPath + \"/Content/images/" +
"规划成果.png\", location: [longitude, latitude], popupHtml: divhtml });\r\n\r\n          " +
"      }\r\n                mapCtlExt.addMarker(returnValue);\r\n            }, error" +
": function (e) {\r\n            },\r\n            cache: false\r\n        });\r\n    };\r" +
"\n\r\n\r\n    //新增\r\n    function btn_add() {\r\n        dialogOpen({\r\n            id: \'" +
"Form\',\r\n            title: \'添加防治规划成果表\',\r\n            url: \'/JXGeoManage/TBL_ACHI" +
"EVEMENT_PREPLAN/TBL_ACHIEVEMENT_PREPLANForm\',\r\n            width: \'1100px\',\r\n   " +
"         height: \'640px\',\r\n            callBack: function (iframeId) {\r\n        " +
"        getInfoTop().frames[iframeId].AcceptClick();\r\n            }\r\n        });" +
"\r\n    }\r\n    //编辑\r\n    function btn_edit() {\r\n        var keyValue = $(\"#gridTab" +
"le\").jqGridRowValue(\'GUID\');\r\n        if (checkedRow(keyValue)) {\r\n            d" +
"ialogOpen({\r\n                id: \'Form\',\r\n                title: \'编辑防治规划成果表\',\r\n " +
"               url: \'/JXGeoManage/TBL_ACHIEVEMENT_PREPLAN/TBL_ACHIEVEMENT_PREPLA" +
"NForm?keyValue=\' + keyValue,\r\n                width: \'1100px\',\r\n                " +
"height: \'640px\',\r\n                callBack: function (iframeId) {\r\n             " +
"       getInfoTop().frames[iframeId].AcceptClick();\r\n                }\r\n        " +
"    })\r\n        }\r\n    }\r\n    //删除\r\n    function btn_delete() {\r\n        var key" +
"Value = $(\"#gridTable\").jqGridRowValue(\'GUID\');\r\n        if (keyValue) {\r\n      " +
"      $.RemoveForm({\r\n                url: \'../../api/TBL_ACHIEVEMENT_PREPLAN/Re" +
"moveForm\',\r\n                authToken: authToken,\r\n                param: { \"\": " +
"keyValue },\r\n                success: function (data) {\r\n                    $(\'" +
"#gridTable\').trigger(\'reloadGrid\');\r\n                }\r\n            })\r\n        " +
"} else {\r\n            dialogMsg(\'请选择需要删除的防治规划成果表！\', 0);\r\n        }\r\n    }\r\n     " +
" //查询表格函数\r\n      function SearchEvent() {\r\n        var queryJson = $(\"#filter-fo" +
"rm\").getWebControls();\r\n        queryJson[\"PROVINCE\"] = PROVINCE;\r\n        query" +
"Json[\"CITY\"] = CITY;\r\n        queryJson[\"COUNTY\"] = COUNTY;\r\n        $(\"#gridTab" +
"le\").jqGrid(\'setGridParam\', {\r\n                loadBeforeSend: function (a) {\r\n " +
"                   a.setRequestHeader(\"Authorization\", authToken);\r\n            " +
"    },\r\n                postData: { queryJson: JSON.stringify(queryJson) },\r\n   " +
"             url: \"../../api/TBL_ACHIEVEMENT_PREPLAN/GetPageListJson\",\r\n        " +
"        page: 1\r\n        }).trigger(\'reloadGrid\');\r\n    }\r\n      function ColDat" +
"aGrid() {\r\n        var centerHeight = $(\"#ui_center .ui-layout\").height();\r\n    " +
"    var layout2 = $(\'#layout2\').layout();\r\n        if ($(\"#lr-colgrid i\").hasCla" +
"ss(\"fa-chevron-down\")) {\r\n             var northH = centerHeight - 65;\r\n        " +
"     layout2.sizePane(\"north\", northH);\r\n             $(\"#lr-colgrid i\").removeC" +
"lass(\"fa-chevron-down\");\r\n             $(\"#lr-colgrid i\").addClass(\"fa-chevron-u" +
"p\");\r\n             if ($(\"#lr-colmap i\").hasClass(\"fa-chevron-down\")) {\r\n       " +
"           $(\"#lr-colmap i\").removeClass(\"fa-chevron-down\");\r\n                  " +
"$(\"#lr-colmap i\").addClass(\"fa-chevron-up\");\r\n             }\r\n        }\r\n       " +
" else {\r\n             layout2.sizePane(\"north\", layout2NorthH);\r\n             $(" +
"\"#lr-colgrid i\").removeClass(\"fa-chevron-up\");\r\n             $(\"#lr-colgrid i\")." +
"addClass(\"fa-chevron-down\");\r\n        }\r\n        mapCtlExt.updateSize();\r\n      " +
"}\r\n      function ColMapDiv() {\r\n        var layout2 = $(\'#layout2\').layout();\r\n" +
"        if ($(\"#lr-colmap i\").hasClass(\"fa-chevron-up\")) {\r\n            layout2." +
"sizePane(\"north\", 1);\r\n            $(\"#lr-colmap i\").removeClass(\"fa-chevron-up\"" +
");\r\n            $(\"#lr-colmap i\").addClass(\"fa-chevron-down\");\r\n            if (" +
"$(\"#lr-colgrid i\").hasClass(\"fa-chevron-up\")) {\r\n                $(\"#lr-colgrid " +
"i\").removeClass(\"fa-chevron-up\");\r\n                $(\"#lr-colgrid i\").addClass(\"" +
"fa-chevron-down\");\r\n            }\r\n        }\r\n        else {\r\n            layout" +
"2.sizePane(\"north\", layout2NorthH);\r\n            $(\"#lr-colmap i\").removeClass(\"" +
"fa-chevron-down\");\r\n            $(\"#lr-colmap i\").addClass(\"fa-chevron-up\");\r\n  " +
"          if (mapCtlExt != null) {\r\n                mapCtlExt.setHeight($(\"#mapC" +
"ontrol\").parent().height() - 32 - 4);\r\n            }\r\n        }\r\n        mapCtlE" +
"xt.updateSize();\r\n      }\r\n</script>\r\n");

});

        }
    }
}
#pragma warning restore 1591

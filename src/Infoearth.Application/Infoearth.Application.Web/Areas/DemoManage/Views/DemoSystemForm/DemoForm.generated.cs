#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Optimization;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    using Infoearth.Application.Web;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Areas/DemoManage/Views/DemoSystemForm/DemoForm.cshtml")]
    public partial class _Areas_DemoManage_Views_DemoSystemForm_DemoForm_cshtml : System.Web.Mvc.WebViewPage<dynamic>
    {
        public _Areas_DemoManage_Views_DemoSystemForm_DemoForm_cshtml()
        {
        }
        public override void Execute()
        {
            
            #line 1 "..\..\Areas\DemoManage\Views\DemoSystemForm\DemoForm.cshtml"
  
    ViewBag.Title = "订单表单";
    Layout = "~/Views/Shared/_OrderForm.cshtml";

            
            #line default
            #line hidden
WriteLiteral("\r\n<link");

WriteAttribute("href", Tuple.Create(" href=\"", 91), Tuple.Create("\"", 147)
, Tuple.Create(Tuple.Create("", 98), Tuple.Create<System.Object, System.Int32>(Href("~/Content/scripts/plugins/uploadify/uploadify.css")
, 98), false)
);

WriteLiteral(" rel=\"stylesheet\"");

WriteLiteral(" />\r\n<link");

WriteAttribute("href", Tuple.Create(" href=\"", 175), Tuple.Create("\"", 241)
, Tuple.Create(Tuple.Create("", 182), Tuple.Create<System.Object, System.Int32>(Href("~/Content/scripts/plugins/uploadify/uploadify.extension.css")
, 182), false)
);

WriteLiteral(" rel=\"stylesheet\"");

WriteLiteral(" />\r\n<script");

WriteAttribute("src", Tuple.Create(" src=\"", 271), Tuple.Create("\"", 336)
, Tuple.Create(Tuple.Create("", 277), Tuple.Create<System.Object, System.Int32>(Href("~/Content/scripts/plugins/uploadify/jquery.uploadify.min.js")
, 277), false)
);

WriteLiteral("></script>\r\n\r\n<link");

WriteAttribute("href", Tuple.Create(" href=\"", 356), Tuple.Create("\"", 416)
, Tuple.Create(Tuple.Create("", 363), Tuple.Create<System.Object, System.Int32>(Href("~/Content/scripts/plugins/webuploader/webuploader.css")
, 363), false)
);

WriteLiteral(" rel=\"stylesheet\"");

WriteLiteral(" />\r\n<script");

WriteAttribute("src", Tuple.Create(" src=\"", 446), Tuple.Create("\"", 510)
, Tuple.Create(Tuple.Create("", 452), Tuple.Create<System.Object, System.Int32>(Href("~/Content/scripts/plugins/webuploader/webuploader.nolog.js")
, 452), false)
);

WriteLiteral(@"></script>
<style>
.uploadify-queue{height:auto;max-height:295px}
.uploadify-queue-item:last-child{border-bottom:solid 0}
.uploadify-queue-item .cancel a{margin-top:4px;margin-right:5px;background:0 0;text-indent:initial}
.uploadify-queue-item .cancel a>i{color:grey;font-size:21px}
.formTitle{width:60px!important}
</style>

<div");

WriteLiteral(" class=\"bills\"");

WriteLiteral(">\r\n    <table");

WriteLiteral(" class=\"form\"");

WriteLiteral(" style=\"width: 100%; margin-bottom: 10px;\"");

WriteLiteral(">\r\n        <tr>\r\n            <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(" style=\"width: 60px;\"");

WriteLiteral(">客户名称<font");

WriteLiteral(" face=\"宋体\"");

WriteLiteral(">*</font></th>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" id=\"F_CustomerId\"");

WriteLiteral(" data-wfname=\"客户名称\"");

WriteLiteral(" type=\"select\"");

WriteLiteral(" class=\"ui-select\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"NotNull\"");

WriteLiteral("></div>\r\n            </td>\r\n            <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">销售人员<font");

WriteLiteral(" face=\"宋体\"");

WriteLiteral(">*</font></th>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" id=\"F_SellerId\"");

WriteLiteral(" data-wfname=\"销售人员\"");

WriteLiteral(" type=\"selectTree\"");

WriteLiteral(" class=\"ui-select\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"NotNull\"");

WriteLiteral("></div>\r\n            </td>\r\n            <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">单据日期<font");

WriteLiteral(" face=\"宋体\"");

WriteLiteral(">*</font></th>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <input");

WriteLiteral(" id=\"F_OrderDate\"");

WriteLiteral(" data-wfname=\"单据日期\"");

WriteLiteral(" type=\"text\"");

WriteAttribute("value", Tuple.Create(" value=\"", 1669), Tuple.Create("\"", 1708)
            
            #line 32 "..\..\Areas\DemoManage\Views\DemoSystemForm\DemoForm.cshtml"
, Tuple.Create(Tuple.Create("", 1677), Tuple.Create<System.Object, System.Int32>(Infoearth.Util.Time.GetToday()
            
            #line default
            #line hidden
, 1677), false)
);

WriteLiteral(" class=\"form-control input-wdatepicker\"");

WriteLiteral(" onfocus=\"WdatePicker({maxDate:\'%y-%M-%d\'})\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"NotNull\"");

WriteLiteral(" />\r\n            </td>\r\n            <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">单据编号<font");

WriteLiteral(" face=\"宋体\"");

WriteLiteral(">*</font></th>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <input");

WriteLiteral(" id=\"F_OrderCode\"");

WriteLiteral(" data-wfname=\"单据编号\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" readonly");

WriteAttribute("value", Tuple.Create(" value=\"", 2039), Tuple.Create("\"", 2065)
            
            #line 36 "..\..\Areas\DemoManage\Views\DemoSystemForm\DemoForm.cshtml"
       , Tuple.Create(Tuple.Create("", 2047), Tuple.Create<System.Object, System.Int32>(ViewBag.OrderCode
            
            #line default
            #line hidden
, 2047), false)
);

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"NotNull\"");

WriteLiteral(" />\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    <div");

WriteLiteral(" class=\"gridPanel\"");

WriteLiteral(" style=\"width:100%\"");

WriteLiteral(">\r\n        <table");

WriteLiteral(" id=\"gridTable\"");

WriteLiteral("></table>\r\n    </div>\r\n    <textarea");

WriteLiteral(" id=\"Description\"");

WriteLiteral(" data-wfname=\"备注信息\"");

WriteLiteral(" placeholder=\"暂无备注信息\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" style=\"width: 100%; height: 50px; margin-top: 10px;\"");

WriteLiteral("></textarea>\r\n    <table");

WriteLiteral(" class=\"form\"");

WriteLiteral(" style=\"width: 100%; margin-top: 5px;\"");

WriteLiteral(">\r\n        <tr>\r\n            <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">收款金额<font");

WriteLiteral(" face=\"宋体\"");

WriteLiteral(">*</font></th>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <input");

WriteLiteral(" id=\"F_Accounts\"");

WriteLiteral(" data-wfname=\"收款金额\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" value=\"0.00\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"Double\"");

WriteLiteral(" />\r\n            </td>\r\n            <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">收款日期<font");

WriteLiteral(" face=\"宋体\"");

WriteLiteral(">*</font></th>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <input");

WriteLiteral(" id=\"F_PaymentDate\"");

WriteLiteral(" data-wfname=\"收款日期\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control input-wdatepicker\"");

WriteLiteral(" onfocus=\"WdatePicker()\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"NotNull\"");

WriteLiteral(" />\r\n            </td>\r\n            <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">收款方式<font");

WriteLiteral(" face=\"宋体\"");

WriteLiteral(">*</font></th>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" id=\"F_PaymentMode\"");

WriteLiteral(" data-wfname=\"收款方式\"");

WriteLiteral(" type=\"select\"");

WriteLiteral(" class=\"ui-select\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"NotNull\"");

WriteLiteral("></div>\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(" style=\"width: 60px;\"");

WriteLiteral(">销售费用<font");

WriteLiteral(" face=\"宋体\"");

WriteLiteral(">*</font></th>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <input");

WriteLiteral(" id=\"F_SaleCost\"");

WriteLiteral(" data-wfname=\"销售费用\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" value=\"0.00\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"Double\"");

WriteLiteral(" />\r\n            </td>\r\n            <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">制单人员<font");

WriteLiteral(" face=\"宋体\"");

WriteLiteral(">*</font></th>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <input");

WriteLiteral(" id=\"F_CreateUserName\"");

WriteLiteral(" data-wfname=\"制单人员\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" readonly");

WriteAttribute("value", Tuple.Create(" value=\"", 3880), Tuple.Create("\"", 3960)
            
            #line 66 "..\..\Areas\DemoManage\Views\DemoSystemForm\DemoForm.cshtml"
                                 , Tuple.Create(Tuple.Create("", 3888), Tuple.Create<System.Object, System.Int32>(Infoearth.Application.Code.OperatorProvider.Provider.Current().UserName
            
            #line default
            #line hidden
, 3888), false)
);

WriteLiteral(" />\r\n            </td>\r\n            <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">合同编号</th>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <input");

WriteLiteral(" id=\"F_ContractCode\"");

WriteLiteral(" data-wfname=\"合同编号\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" />\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">摘要信息</th>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(" colspan=\"5\"");

WriteLiteral(">\r\n                <input");

WriteLiteral(" id=\"F_AbstractInfo\"");

WriteLiteral(" data-wfname=\"摘要信息\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" />\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">合同附件</th>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(" colspan=\"5\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" id=\"F_ContractFile\"");

WriteLiteral("></div>\r\n            </td>\r\n        </tr>\r\n\r\n    </table>\r\n</div>\r\n<div");

WriteLiteral(" id=\"bottomField\"");

WriteLiteral(" data-systemhidefield>\r\n    <a");

WriteLiteral(" id=\"savaAndAdd\"");

WriteLiteral(" class=\"btn btn-success\"");

WriteLiteral(" onclick=\"AcceptClick(1)\"");

WriteLiteral(">保存并新增</a>\r\n    <a");

WriteLiteral(" id=\"save\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral(" onclick=\"AcceptClick(2)\"");

WriteLiteral(">保存单据</a>\r\n</div>\r\n<div");

WriteLiteral(" class=\"contextmenu\"");

WriteLiteral(">\r\n    <ul>\r\n        <li>添加一行</li>\r\n        <li>删除一行</li>\r\n    </ul>\r\n</div>\r\n<sc" +
"ript>\r\n    var keyValue = request(\'processId\');\r\n    var folderId = \"\";\r\n    $(f" +
"unction () {\r\n        InitialPage();\r\n        GetOrderEntryGrid();\r\n        Init" +
"Control();\r\n    });\r\n    //初始化页面\r\n    function InitialPage() {\r\n        $(\".bill" +
"s\").height($(window).height() - 88);\r\n        //resize重设(表格、树形)宽高\r\n        $(win" +
"dow).resize(function (e) {\r\n            window.setTimeout(function () {\r\n       " +
"         $(\'#gridTable\').setGridWidth(($(\'.gridPanel\').width()));\r\n             " +
"   $(\".bills\").height($(window).height() - 88);\r\n            }, 200);\r\n         " +
"   e.stopPropagation();\r\n        });\r\n    }\r\n    //初始化控件\r\n    function InitContr" +
"ol() {\r\n        //客户名称\r\n        $(\"#F_CustomerId\").ComboBox({\r\n            url: " +
"\"../../CustomerManage/Customer/GetListJson\",\r\n            id: \"F_CustomerId\",\r\n " +
"           text: \"F_FullName\",\r\n            description: \"==请选择==\",\r\n           " +
" height: \"360px\",\r\n            width: \"280px\",\r\n            allowSearch: true\r\n " +
"       });\r\n        //销售人员\r\n        $(\"#F_SellerId\").ComboBoxTree({\r\n           " +
" url: \"../../BaseManage/User/GetTreeJson\",\r\n            description: \"==请选择==\",\r" +
"\n            height: \"360px\",\r\n            width: \"280px\",\r\n            allowSea" +
"rch: true\r\n        });\r\n        //收款方式\r\n        $(\"#F_PaymentMode\").ComboBox({\r\n" +
"            url: \"../../SystemManage/DataItemDetail/GetDataItemListJson\",\r\n     " +
"       param: { EnCode: \"Client_PaymentMode\" },\r\n            id: \"F_ItemValue\",\r" +
"\n            text: \"F_ItemName\",\r\n            description: \"==请选择==\",\r\n         " +
"   height: \"200px\"\r\n        });\r\n\r\n        //初始化文件上传按钮\r\n        $(\'#F_ContractFi" +
"le\').uploadifyEx({\r\n            url: \"/Utility/UploadifyFile?DataItemEncode=Save" +
"FilePath&DataItemName=DemoFilePath\",\r\n            btnName: \"添加附件\",\r\n            " +
"type: \"uploadify\"\r\n        });\r\n\r\n        //获取表单\r\n        if (!!keyValue) {\r\n   " +
"         $.SetForm({\r\n                url: \"../../CustomerManage/Order/GetFormJs" +
"on\",\r\n                param: { keyValue: keyValue },\r\n                success: f" +
"unction (data) {\r\n\r\n                    //主表\r\n                    var order = da" +
"ta.order;\r\n                    $(\"#form1\").SetWebControls(order);\r\n             " +
"       $(\"#F_DiscountSum\").val(toDecimal(order.F_DiscountSum));\r\n               " +
"     $(\"#F_Accounts\").val(toDecimal(order.F_Accounts));\r\n                    $(\"" +
"#F_SaleCost\").val(toDecimal(order.F_SaleCost));\r\n                    //明细\r\n     " +
"               var orderEntry = data.orderEntry;\r\n                    $(\"#gridTa" +
"ble\").find(\'[role=row]\').each(function (i) {\r\n                        var row = " +
"orderEntry[i - 1];\r\n                        if (row != undefined) {\r\n           " +
"                 $(this).find(\'input[name=\"F_OrderEntryId\"]\').val(row.F_OrderEnt" +
"ryId);\r\n                            $(this).find(\'input[name=\"F_ProductName\"]\')." +
"val(row.F_ProductName);\r\n                            $(this).find(\'input[name=\"F" +
"_ProductCode\"]\').val(row.F_ProductCode);\r\n                            $(this).fi" +
"nd(\'input[name=\"F_ProductId\"]\').val(row.F_ProductId);\r\n                         " +
"   $(this).find(\'input[name=\"F_UnitId\"]\').val(row.F_UnitId);\r\n                  " +
"          $(this).find(\'input[name=\"F_Qty\"]\').val(toDecimal(row.F_Qty));\r\n      " +
"                      $(this).find(\'input[name=\"F_Price\"]\').val(toDecimal(row.F_" +
"Price));\r\n                            $(this).find(\'input[name=\"F_Amount\"]\').val" +
"(toDecimal(row.F_Amount));\r\n                            $(this).find(\'input[name" +
"=\"F_TaxRate\"]\').val(row.F_TaxRate);\r\n                            $(this).find(\'i" +
"nput[name=\"F_Taxprice\"]\').val(toDecimal(row.F_Taxprice));\r\n                     " +
"       $(this).find(\'input[name=\"F_Tax\"]\').val(toDecimal(row.F_Tax));\r\n         " +
"                   $(this).find(\'input[name=\"F_TaxAmount\"]\').val(toDecimal(row.F" +
"_TaxAmount));\r\n                            $(this).find(\'input[name=\"F_Descripti" +
"on\"]\').val(row.F_Description);\r\n                            $(this).find(\'input\'" +
").removeAttr(\'disabled\').attr(\"isvalid\", \"yes\");\r\n                            $(" +
"this).next().find(\'input\').removeAttr(\'disabled\');\r\n                        }\r\n " +
"                   });\r\n                    //合计\r\n                    var TotalQ" +
"ty = 0.00, TotalPrice = 0.00, TotalAmount = 0.00, TotalTaxprice = 0.00, TotalTax" +
" = 0.00, TotalTaxAmount = 0.00;\r\n                    $(\"#gridTable\").find(\"tbody" +
" tr\").each(function (i) {\r\n                        var Qty = $(this).find(\'td:eq" +
"(5)\').find(\'input\').val();\r\n                        if (Qty != \"\" && Qty != unde" +
"fined) {\r\n                            TotalQty += Number(Qty);\r\n                " +
"        }\r\n                        var Price = $(this).find(\'td:eq(6)\').find(\'in" +
"put\').val();\r\n                        if (Price != \"\" && Price != undefined) {\r\n" +
"                            TotalPrice += Number(Price);\r\n                      " +
"  }\r\n                        var Amount = $(this).find(\'td:eq(7)\').find(\'input\')" +
".val();\r\n                        if (Amount != \"\" && Amount != undefined) {\r\n   " +
"                         TotalAmount += Number(Amount);\r\n                       " +
" }\r\n                        var Taxprice = $(this).find(\'td:eq(9)\').find(\'input\'" +
").val();\r\n                        if (Taxprice != \"\" && Taxprice != undefined) {" +
"\r\n                            TotalTaxprice += Number(Taxprice);\r\n              " +
"          }\r\n                        var Tax = $(this).find(\'td:eq(10)\').find(\'i" +
"nput\').val();\r\n                        if (Tax != \"\" && Tax != undefined) {\r\n   " +
"                         TotalTax += Number(Tax);\r\n                        }\r\n  " +
"                      var TaxAmount = $(this).find(\'td:eq(11)\').find(\'input\').va" +
"l();\r\n                        if (TaxAmount != \"\" && TaxAmount != undefined) {\r\n" +
"                            TotalTaxAmount += Number(TaxAmount);\r\n              " +
"          }\r\n                    });\r\n                    $(\"#F_TotalQty\").text(" +
"toDecimal(TotalQty));\r\n                    $(\"#F_TotalPrice\").text(toDecimal(Tot" +
"alPrice));\r\n                    $(\"#F_TotalAmount\").text(toDecimal(TotalAmount))" +
";\r\n                    $(\"#F_TotalTaxprice\").text(toDecimal(TotalTaxprice));\r\n  " +
"                  $(\"#F_TotalTax\").text(toDecimal(TotalTax));\r\n                 " +
"   $(\"#F_TotalTaxAmount\").text(toDecimal(TotalTaxAmount));\r\n                }\r\n " +
"           });\r\n        }\r\n    }\r\n    //加载明细\r\n    function GetOrderEntryGrid() {" +
"\r\n        var $grid = $(\"#gridTable\");\r\n        $grid.jqGrid({\r\n            unwr" +
"itten: false,\r\n            datatype: \"local\",\r\n            height: \'100%\',\r\n    " +
"        autowidth: true,\r\n            colModel: [\r\n                { label: \'主键\'" +
", name: \'F_OrderEntryId\', hidden: true },\r\n                { label: \'商品名称<span c" +
"lass=\"label label label-default\" style=\"margin-left:5px;\">扫描枪录入</span><span  dat" +
"a-wfname=\"商品名称\" data-id=\"F_ProductName\" data-girdid=\"gridTable\" type=\"gridcol\"><" +
"/span>\', name: \"F_ProductName\", width: 260, align: \'left\', sortable: false, resi" +
"zable: false },\r\n                { label: \'商品编号<span  data-wfname=\"商品编号\" data-gi" +
"rdid=\"gridTable\" data-id=\"F_ProductCode\" type=\"gridcol\"></span>\', name: \"F_Produ" +
"ctCode\", width: 100, align: \'center\', sortable: false, resizable: false },\r\n    " +
"            { label: \'单位<span  data-wfname=\"单位\" data-girdid=\"gridTable\" data-id=" +
"\"F_UnitId\" type=\"gridcol\"></span>\', name: \"F_UnitId\", width: 100, align: \'center" +
"\', sortable: false, resizable: false },\r\n                { label: \'数量<span  data" +
"-wfname=\"数量\" data-girdid=\"gridTable\" data-id=\"F_Qty\" type=\"gridcol\"></span>\', na" +
"me: \'F_Qty\', width: 80, align: \'center\', sortable: false, resizable: false },\r\n " +
"               { label: \'单价<span  data-wfname=\"单价\" data-girdid=\"gridTable\" data-" +
"id=\"F_Price\" type=\"gridcol\"></span>\', name: \'F_Price\', width: 80, align: \'center" +
"\', sortable: false, resizable: false },\r\n                { label: \'金额<span  data" +
"-wfname=\"金额\" data-girdid=\"gridTable\" data-id=\"F_Amount\" type=\"gridcol\"></span>\'," +
" name: \'F_Amount\', width: 80, align: \'center\', sortable: false, resizable: false" +
" },\r\n                { label: \'税率(%)<span  data-wfname=\"税率\" data-girdid=\"gridTab" +
"le\" data-id=\"F_TaxRate\" type=\"gridcol\"></span>\', name: \'F_TaxRate\', width: 80, a" +
"lign: \'center\', sortable: false, resizable: false },\r\n                { label: \'" +
"含税单价<span  data-wfname=\"含税单价\" data-girdid=\"gridTable\" data-id=\"F_Taxprice\" type=" +
"\"gridcol\"></span>\', name: \'F_Taxprice\', width: 80, align: \'center\', sortable: fa" +
"lse, resizable: false },\r\n                { label: \'税额<span  data-wfname=\"税额\" da" +
"ta-girdid=\"gridTable\" data-id=\"F_Tax\" type=\"gridcol\"></span>\', name: \'F_Tax\', wi" +
"dth: 80, align: \'center\', sortable: false, resizable: false },\r\n                " +
"{ label: \'含税金额<span  data-wfname=\"含税金额\" data-girdid=\"gridTable\" data-id=\"F_TaxAm" +
"ount\" type=\"gridcol\"></span>\', name: \'F_TaxAmount\', width: 80, align: \'center\', " +
"sortable: false, resizable: false },\r\n                { label: \'说明信息<span  data-" +
"wfname=\"说明信息\" data-girdid=\"gridTable\" data-id=\"F_Description\" type=\"gridcol\"></s" +
"pan>\', name: \'F_Description\', width: 200, align: \'left\', sortable: false, resiza" +
"ble: false }\r\n            ],\r\n            pager: false,\r\n            rownumbers:" +
" true,\r\n            shrinkToFit: false,\r\n            gridview: true,\r\n          " +
"  footerrow: true,\r\n            gridComplete: function () {\r\n                //合" +
"计\r\n                $(this).footerData(\"set\", {\r\n                    \"F_UnitId\": " +
"\"合计：\",\r\n                    \"F_Qty\": \"<span id=\'F_TotalQty\' data-wfname=\'数量合计\' t" +
"ype=\'label\' >0.00</span>\",\r\n                    \"F_Price\": \"<span id=\'F_TotalPri" +
"ce\' data-wfname=\'单价合计\' type=\'label\' >0.00</span>\",\r\n                    \"F_Amoun" +
"t\": \"<span id=\'F_TotalAmount\' data-wfname=\'金额合计\' type=\'label\'>0.00</span>\",\r\n   " +
"                 \"F_Taxprice\": \"<span id=\'F_TotalTaxprice\' data-wfname=\'含税单价合计\' " +
"type=\'label\'>0.00</span>\",\r\n                    \"F_Tax\": \"<span id=\'F_TotalTax\'d" +
"ata-wfname=\'税额合计\' type=\'label\'>0.00</span >\",\r\n                    \"F_TaxAmount\"" +
": \"<span id=\'F_TotalTaxAmount\' data-wfname=\'含税金额合计\' type=\'label\'>0.00</span>\"\r\n " +
"               });\r\n                $(\'table.ui-jqgrid-ftable td[aria-describedb" +
"y=\"gridTable_F_UnitId\"]\').prevUntil().css(\"border-right-color\", \"#fff\");\r\n      " +
"      }\r\n        });\r\n        //表头合并\r\n        $grid.jqGrid(\'setGroupHeaders\', {\r" +
"\n            useColSpanStyle: true,\r\n            groupHeaders: [\r\n              " +
"{ startColumnName: \'F_ProductName\', numberOfColumns: 3, titleText: \'商品信息\' },\r\n  " +
"            { startColumnName: \'F_Qty\', numberOfColumns: 7, titleText: \'价格信息\' }\r" +
"\n            ]\r\n        });\r\n        //默认添加13行 空行\r\n        for (var i = 1; i < 1" +
"3; i++) {\r\n            var rowdata = {\r\n                F_OrderEntryId: \'<input " +
"name=\"F_OrderEntryId\" type=\"text\" />\',\r\n                F_ProductName: \'<div cla" +
"ss=\"product\"><input name=\"F_ProductName\" readonly type=\"text\" class=\"editable\" i" +
"svalid=\"no\" checkexpession=\"NotNull\"/><span class=\"ui-icon-ellipsis\"></span></di" +
"v>\',\r\n                F_ProductCode: \'<input name=\"F_ProductCode\" type=\"text\" cl" +
"ass=\"editable center disabled\" /><input name=\"F_ProductId\" type=\"hidden\" />\',\r\n " +
"               F_UnitId: \'<input name=\"F_UnitId\" type=\"text\" class=\"editable cen" +
"ter\" />\',\r\n                F_Qty: \'<input name=\"F_Qty\" type=\"text\" class=\"editab" +
"le center decimal\" isvalid=\"no\" checkexpession=\"Double\" />\',\r\n                F_" +
"Price: \'<input name=\"F_Price\" type=\"text\" class=\"editable center decimal\" isvali" +
"d=\"no\" checkexpession=\"Double\" />\',\r\n                F_Amount: \'<input name=\"F_A" +
"mount\" type=\"text\" class=\"editable center decimal disabled\" isvalid=\"no\" checkex" +
"pession=\"Double\" />\',\r\n                F_TaxRate: \'<input name=\"F_TaxRate\" type=" +
"\"text\" class=\"editable center decimal\" isvalid=\"no\" checkexpession=\"Double\" />\'," +
"\r\n                F_Taxprice: \'<input name=\"F_Taxprice\" type=\"text\" class=\"edita" +
"ble center decimal\" isvalid=\"no\" checkexpession=\"Double\" />\',\r\n                F" +
"_Tax: \'<input name=\"F_Tax\" type=\"text\" class=\"editable center decimal disabled\" " +
"isvalid=\"no\" checkexpession=\"Double\" />\',\r\n                F_TaxAmount: \'<input " +
"name=\"F_TaxAmount\" type=\"text\" class=\"editable center decimal disabled\" isvalid=" +
"\"no\" checkexpession=\"Double\" />\',\r\n                F_Description: \'<input name=\"" +
"F_Description\" type=\"text\" class=\"editable\" />\',\r\n            }\r\n            $gr" +
"id.jqGrid(\'addRowData\', i, rowdata);\r\n        };\r\n        $grid.find(\'.decimal\')" +
".attr(\'onfocus\', \'IsMoney(this.id)\');\r\n        $grid.find(\'input\').attr(\"disable" +
"d\", \"disabled\");\r\n        $grid.find(\"tbody tr:eq(1)\").find(\'input\').removeAttr(" +
"\'disabled\').attr(\"isvalid\", \"yes\");\r\n        $grid.find(\'.disabled\').attr(\"disab" +
"led\", \"disabled\");\r\n        //商品名称事件\r\n        $(\'input[name=\"F_ProductName\"]\').f" +
"ocus(function () {\r\n            $(\'.ui-icon-ellipsis\').hide();\r\n            $(th" +
"is).next(\'.ui-icon-ellipsis\').show();\r\n            $(this).Contextmenu();\r\n     " +
"   });\r\n        //选择商品事件\r\n        $(\'.ui-icon-ellipsis\').click(function () {\r\n  " +
"          var $ellipsis = $(this);\r\n            dialogOpen({\r\n                id" +
": \"OptionProduct\",\r\n                title: \'选择商品\',\r\n                url: \'/Custo" +
"merManage/Order/OptionProduct\',\r\n                width: \"600px\",\r\n              " +
"  height: \"400px\",\r\n                callBack: function (iframeId) {\r\n           " +
"         top.frames[iframeId].AcceptClick(function (data) {\r\n                   " +
"     if ($grid.find(\'[role=row]\').find(\'[data-value=\' + data.ProductId + \']\').le" +
"ngth == 0) {\r\n                            $ellipsis.parents(\'[role=row]\').find(\'" +
"input[name=\"F_ProductName\"]\').val(data.F_ProductName);\r\n                        " +
"    $ellipsis.parents(\'[role=row]\').find(\'input[name=\"F_ProductCode\"]\').val(data" +
".F_ProductCode).attr(\'data-value\', data.F_ProductId);\r\n                         " +
"   $ellipsis.parents(\'[role=row]\').find(\'input[name=\"F_ProductId\"]\').val(data.F_" +
"ProductId);\r\n                            $ellipsis.parents(\'[role=row]\').find(\'i" +
"nput[name=\"F_Qty\"]\').val(\'1.00\');\r\n                            $ellipsis.parents" +
"(\'[role=row]\').find(\'input[name=\"F_Price\"]\').val(\'0.00\');\r\n                     " +
"       $ellipsis.parents(\'[role=row]\').find(\'input[name=\"F_Amount\"]\').val(\'0.00\'" +
");\r\n                            $ellipsis.parents(\'[role=row]\').find(\'input[name" +
"=\"F_TaxRate\"]\').val(\'0.00\');\r\n                            $ellipsis.parents(\'[ro" +
"le=row]\').find(\'input[name=\"F_Taxprice\"]\').val(\'0.00\');\r\n                       " +
"     $ellipsis.parents(\'[role=row]\').find(\'input[name=\"F_Tax\"]\').val(\'0.00\');\r\n " +
"                           $ellipsis.parents(\'[role=row]\').find(\'input[name=\"F_T" +
"axAmount\"]\').val(\'0.00\');\r\n                            $ellipsis.parents(\'[role=" +
"row]\').find(\'input\').removeAttr(\'disabled\').attr(\"isvalid\", \"yes\");\r\n           " +
"                 $ellipsis.parents(\'[role=row]\').next().find(\'input\').removeAttr" +
"(\'disabled\');\r\n                        } else {\r\n                            top" +
".dialogTop(\'商品信息已存在,不能重复添加\', \'error\');\r\n                        }\r\n             " +
"       });\r\n                },\r\n                btn: [\'确认选中\', \'关闭\']\r\n           " +
" });\r\n        });\r\n        //价格文本框事件\r\n        $grid.find(\'.decimal\').click(funct" +
"ion () {\r\n            $(this).select();\r\n        });\r\n        //价格文本框换算\r\n       " +
" $grid.find(\'.decimal\').keyup(function () {\r\n            var _inputName = $(this" +
").attr(\'name\');\r\n            var $Qty = $(this).parents(\'[role=row]\').find(\'inpu" +
"t[name=\"F_Qty\"]\');                    //数量\r\n            var $Price = $(this).par" +
"ents(\'[role=row]\').find(\'input[name=\"F_Price\"]\');                //单价\r\n         " +
"   var $Amount = $(this).parents(\'[role=row]\').find(\'input[name=\"F_Amount\"]\');  " +
"            //金额\r\n            var $TaxRate = $(this).parents(\'[role=row]\').find(" +
"\'input[name=\"F_TaxRate\"]\');            //税率(%)\r\n            var $Taxprice = $(th" +
"is).parents(\'[role=row]\').find(\'input[name=\"F_Taxprice\"]\');          //含税单价\r\n   " +
"         var $Tax = $(this).parents(\'[role=row]\').find(\'input[name=\"F_Tax\"]\');  " +
"                  //税额\r\n            var $TaxAmount = $(this).parents(\'[role=row]" +
"\').find(\'input[name=\"F_TaxAmount\"]\');        //含税金额\r\n            if (_inputName " +
"== \"Taxprice\") {\r\n                //单价 * (1 + (税率 / 100))=含税单价\r\n                " +
"$Price.val(toDecimal($Taxprice.val() / (1 + ($TaxRate.val() / 100))));\r\n        " +
"    } else {\r\n                //单价 * (1 + (税率 / 100))=含税单价\r\n                $Tax" +
"price.val(toDecimal($Price.val() * (1 + ($TaxRate.val() / 100))));\r\n            " +
"}\r\n            //数量*单价=金额\r\n            $Amount.val(toDecimal($Qty.val() * $Price" +
".val()));\r\n            //(含税单价-单价)*数量=税额\r\n            $Tax.val(toDecimal(($Taxpr" +
"ice.val() - $Price.val()) * $Qty.val()));\r\n            //数量*含税单价=含税金额\r\n         " +
"   $TaxAmount.val(toDecimal($Qty.val() * $Taxprice.val()));\r\n            //合计\r\n " +
"           var TotalQty = 0.00, TotalPrice = 0.00, TotalAmount = 0.00, TotalTaxp" +
"rice = 0.00, TotalTax = 0.00, TotalTaxAmount = 0.00;\r\n            $grid.find(\"tb" +
"ody tr\").each(function (i) {\r\n                var Qty = $(this).find(\'td:eq(5)\')" +
".find(\'input\').val();\r\n                if (Qty != \"\" && Qty != undefined) {\r\n   " +
"                 TotalQty += Number(Qty);\r\n                }\r\n                va" +
"r Price = $(this).find(\'td:eq(6)\').find(\'input\').val();\r\n                if (Pri" +
"ce != \"\" && Price != undefined) {\r\n                    TotalPrice += Number(Pric" +
"e);\r\n                }\r\n                var Amount = $(this).find(\'td:eq(7)\').fi" +
"nd(\'input\').val();\r\n                if (Amount != \"\" && Amount != undefined) {\r\n" +
"                    TotalAmount += Number(Amount);\r\n                }\r\n         " +
"       var Taxprice = $(this).find(\'td:eq(9)\').find(\'input\').val();\r\n           " +
"     if (Taxprice != \"\" && Taxprice != undefined) {\r\n                    TotalTa" +
"xprice += Number(Taxprice);\r\n                }\r\n                var Tax = $(this" +
").find(\'td:eq(10)\').find(\'input\').val();\r\n                if (Tax != \"\" && Tax !" +
"= undefined) {\r\n                    TotalTax += Number(Tax);\r\n                }\r" +
"\n                var TaxAmount = $(this).find(\'td:eq(11)\').find(\'input\').val();\r" +
"\n                if (TaxAmount != \"\" && TaxAmount != undefined) {\r\n             " +
"       TotalTaxAmount += Number(TaxAmount);\r\n                }\r\n            });\r" +
"\n            $(\"#F_TotalQty\").text(toDecimal(TotalQty));\r\n            $(\"#F_Tota" +
"lPrice\").text(toDecimal(TotalPrice));\r\n            $(\"#F_TotalAmount\").text(toDe" +
"cimal(TotalAmount));\r\n            $(\"#F_TotalTaxprice\").text(toDecimal(TotalTaxp" +
"rice));\r\n            $(\"#F_TotalTax\").text(toDecimal(TotalTax));\r\n            $(" +
"\"#F_TotalTaxAmount\").text(toDecimal(TotalTaxAmount));\r\n        });\r\n    }\r\n    /" +
"/保存表单\r\n    function AcceptClick(callback) {\r\n        if (!$(\'#form1\').Validform(" +
")) {\r\n            return false;\r\n        }\r\n        var OrderEntryJson = [];\r\n  " +
"      $(\"#gridTable\").find(\'[role=row]\').each(function (i) {\r\n            if (!!" +
"$(this).find(\'input[name=\"F_ProductId\"]\').val()) {\r\n                OrderEntryJs" +
"on.push({\r\n                    F_OrderEntryId: $(this).find(\'input[name=\"F_Order" +
"EntryId\"]\').val(),\r\n                    F_ProductName: $(this).find(\'input[name=" +
"\"F_ProductName\"]\').val(),\r\n                    F_ProductCode: $(this).find(\'inpu" +
"t[name=\"F_ProductCode\"]\').val(),\r\n                    F_ProductId: $(this).find(" +
"\'input[name=\"F_ProductId\"]\').val(),\r\n                    F_UnitId: $(this).find(" +
"\'input[name=\"F_UnitId\"]\').val(),\r\n                    F_Qty: $(this).find(\'input" +
"[name=\"F_Qty\"]\').val(),\r\n                    F_Price: $(this).find(\'input[name=\"" +
"F_Price\"]\').val(),\r\n                    F_Amount: $(this).find(\'input[name=\"F_Am" +
"ount\"]\').val(),\r\n                    F_TaxRate: $(this).find(\'input[name=\"F_TaxR" +
"ate\"]\').val(),\r\n                    F_Taxprice: $(this).find(\'input[name=\"F_Taxp" +
"rice\"]\').val(),\r\n                    F_Tax: $(this).find(\'input[name=\"F_Tax\"]\')." +
"val(),\r\n                    F_TaxAmount: $(this).find(\'input[name=\"F_TaxAmount\"]" +
"\').val(),\r\n                    F_Description: $(this).find(\'input[name=\"F_Descri" +
"ption\"]\').val(),\r\n                    SortCode: i\r\n                });\r\n        " +
"    }\r\n        });\r\n        var postData = $(\"#form1\").GetWebControls(keyValue);" +
"\r\n        postData[\"F_CustomerName\"] = $(\"#F_CustomerId\").attr(\'data-text\');\r\n  " +
"      postData[\"F_SellerName\"] = $(\"#F_SellerId\").attr(\'data-text\');\r\n        po" +
"stData[\"orderEntryJson\"] = JSON.stringify(OrderEntryJson);\r\n        $.ConfirmAja" +
"x({\r\n            msg: \"注：您确认要保存此操作吗？\",\r\n            url: \"../../CustomerManage/O" +
"rder/SaveForm?keyValue=\" + keyValue,\r\n            param: postData,\r\n            " +
"success: function (data) {\r\n                callback(data.resultdata);\r\n        " +
"    }\r\n        });\r\n    }\r\n\r\n    //用来权限管控设置的数据字段\r\n    function getSystemFields()" +
" {\r\n        return [{ \"field\": \"F_CustomerId\", \"label\": \"客户名称\" }, { \"field\": \"F_" +
"OrderDate\", \"label\": \"单据日期\" }, { \"field\": \"F_Accounts\", \"label\": \"收款金额\" }];\r\n   " +
" }\r\n    //获取系统表单数据\r\n    function getSystemData() {\r\n        var data = [\r\n      " +
"      {\r\n                \"field\": \"F_CustomerId\",\r\n                \"label\": \"客户名" +
"称\",\r\n                \"realValue\":$(\'#F_CustomerId .ui-select-text\').text()\r\n    " +
"        },\r\n            {\r\n                \"field\": \"F_OrderDate\",\r\n            " +
"    \"label\": \"单据日期\",\r\n                \"realValue\": $(\'#F_OrderDate\').val()\r\n    " +
"        },\r\n            {\r\n                \"field\": \"F_Accounts\",\r\n             " +
"   \"label\": \"收款金额\",\r\n                \"realValue\": $(\'#F_Accounts\').val()\r\n      " +
"      }\r\n            ,\r\n            {\r\n                \"field\": \"F_SaleCost\",\r\n " +
"               \"label\": \"销售费用\",\r\n                \"realValue\": $(\'#F_SaleCost\').v" +
"al()\r\n            }\r\n        ]\r\n    }\r\n    //控制字段权限\r\n    function setSystemField" +
"sAuthorize(AuthorizeData) {\r\n        //console.log(AuthorizeData);\r\n    }\r\n</scr" +
"ipt>");

        }
    }
}
#pragma warning restore 1591

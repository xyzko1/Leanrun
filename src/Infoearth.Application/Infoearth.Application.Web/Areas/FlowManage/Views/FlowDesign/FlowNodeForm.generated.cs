#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Areas/FlowManage/Views/FlowDesign/FlowNodeForm.cshtml")]
    public partial class _Areas_FlowManage_Views_FlowDesign_FlowNodeForm_cshtml : System.Web.Mvc.WebViewPage<dynamic>
    {
        public _Areas_FlowManage_Views_FlowDesign_FlowNodeForm_cshtml()
        {
        }
        public override void Execute()
        {
WriteLiteral("\r\n");

            
            #line 6 "..\..\Areas\FlowManage\Views\FlowDesign\FlowNodeForm.cshtml"
  
    ViewBag.Title = "工作流节点设置";
    Layout = "~/Views/Shared/_FlowForm.cshtml";

            
            #line default
            #line hidden
WriteLiteral("\r\n<style>\r\n    .standtab-pane {\r\n        width: 224px;\r\n        border-right: 1px" +
" solid #ccc;\r\n        float: left;\r\n    }\r\n</style>\r\n    <ul");

WriteLiteral(" class=\"nav nav-tabs\"");

WriteLiteral(">\r\n        <li");

WriteLiteral(" class=\"active\"");

WriteLiteral("><a");

WriteLiteral(" href=\"#BaseInfo\"");

WriteLiteral(" data-toggle=\"tab\"");

WriteLiteral(">基本配置</a></li>\r\n        <li><a");

WriteLiteral(" href=\"#MakerInfo\"");

WriteLiteral(" data-toggle=\"tab\"");

WriteLiteral(">审核者</a></li>\r\n        <li><a");

WriteLiteral(" href=\"#PermissionInfo\"");

WriteLiteral(" data-toggle=\"tab\"");

WriteLiteral(">权限分配</a></li>\r\n        <li><a");

WriteLiteral(" href=\"#SQLInfo\"");

WriteLiteral(" data-toggle=\"tab\"");

WriteLiteral(">节点通过后执行SQL</a></li>\r\n    </ul>\r\n    <div");

WriteLiteral(" class=\"tab-content\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" id=\"BaseInfo\"");

WriteLiteral(" class=\"tab-pane active\"");

WriteLiteral(" style=\"padding-top:15px;padding-right:30px;\"");

WriteLiteral(">\r\n            <table");

WriteLiteral(" class=\"form\"");

WriteLiteral(">\r\n                <tr>\r\n                    <td");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">节点标识</td>\r\n                    <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                        <input");

WriteLiteral(" id=\"nodeCode\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" disabled");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"NotNull\"");

WriteLiteral(" />\r\n                    </td>\r\n                    <td");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">节点名称<font");

WriteLiteral(" face=\"宋体\"");

WriteLiteral(">*</font></td>\r\n                    <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                        <input");

WriteLiteral(" id=\"nodeMyName\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"NotNull\"");

WriteLiteral(" />\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n    " +
"                <td");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">驳回类型<font");

WriteLiteral(" face=\"宋体\"");

WriteLiteral(">*</font></td>\r\n                    <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                        <div");

WriteLiteral(" id=\"nodeRejectType\"");

WriteLiteral(" type=\"select\"");

WriteLiteral(" class=\"ui-select\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"NotNull\"");

WriteLiteral("></div>\r\n                    </td>\r\n                    <td");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">驳回步骤</td>\r\n                    <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                        <div");

WriteLiteral(" id=\"nodeRejectStep\"");

WriteLiteral(" type=\"select\"");

WriteLiteral(" class=\"ui-select\"");

WriteLiteral("></div>\r\n                    </td>\r\n                </tr>\r\n                <tr");

WriteLiteral(" id=\"confluencenode\"");

WriteLiteral(">\r\n                    <td");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">会签策略<font");

WriteLiteral(" face=\"宋体\"");

WriteLiteral(">*</font></td>\r\n                    <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                        <div");

WriteLiteral(" id=\"nodeConfluenceType\"");

WriteLiteral(" type=\"select\"");

WriteLiteral(" class=\"ui-select\"");

WriteLiteral("></div>\r\n                    </td>\r\n                    <td");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">会签比例</td>\r\n                    <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                        <input");

WriteLiteral(" id=\"nodeConfluenceRate\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" value=\"100\"");

WriteLiteral(" />\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n    " +
"                <td");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">表单选择</td>\r\n                    <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(" colspan=\"3\"");

WriteLiteral(">\r\n                        <div");

WriteLiteral(" id=\"nodeForm\"");

WriteLiteral(" type=\"selectTree\"");

WriteLiteral(" class=\"ui-select\"");

WriteLiteral("></div>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n" +
"                    <td");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">执行对象</td>\r\n                    <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(" colspan=\"3\"");

WriteLiteral(">\r\n                        <input");

WriteLiteral(" id=\"nodeSysFn\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" />\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n    " +
"                <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">\r\n                        备注\r\n                    </th>\r\n                    <td" +
"");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(" colspan=\"3\"");

WriteLiteral(">\r\n                        <textarea");

WriteLiteral(" id=\"nodeDes\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" style=\"height: 80px;\"");

WriteLiteral("></textarea>\r\n                    </td>\r\n                </tr>\r\n            </tab" +
"le>\r\n        </div>\r\n        <div");

WriteLiteral(" id=\"MakerInfo\"");

WriteLiteral(" class=\"tab-pane\"");

WriteLiteral(">\r\n            <div");

WriteLiteral(" class=\"bottomline\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" class=\"rdio rdio-color_a\"");

WriteLiteral("><input");

WriteLiteral(" name=\"nodeDesignateTypename\"");

WriteLiteral(" id=\"nodeDesignateType1\"");

WriteLiteral(" value=\"1\"");

WriteLiteral(" type=\"radio\"");

WriteLiteral(" checked /><label");

WriteLiteral(" for=\"nodeDesignateType1\"");

WriteLiteral(">所有成员</label></div>\r\n                <div");

WriteLiteral(" class=\"rdio rdio-color_a\"");

WriteLiteral("><input");

WriteLiteral(" name=\"nodeDesignateTypename\"");

WriteLiteral(" id=\"nodeDesignateType2\"");

WriteLiteral(" value=\"2\"");

WriteLiteral(" type=\"radio\"");

WriteLiteral(" /><label");

WriteLiteral(" for=\"nodeDesignateType2\"");

WriteLiteral(">指定成员</label></div>\r\n                <div");

WriteLiteral(" class=\"rdio rdio-color_a\"");

WriteLiteral("><input");

WriteLiteral(" name=\"nodeDesignateTypename\"");

WriteLiteral(" id=\"nodeDesignateType3\"");

WriteLiteral(" value=\"3\"");

WriteLiteral(" type=\"radio\"");

WriteLiteral(" /><label");

WriteLiteral(" for=\"nodeDesignateType3\"");

WriteLiteral(">发起者领导</label></div>\r\n                <div");

WriteLiteral(" class=\"rdio rdio-color_a\"");

WriteLiteral("><input");

WriteLiteral(" name=\"nodeDesignateTypename\"");

WriteLiteral(" id=\"nodeDesignateType4\"");

WriteLiteral(" value=\"4\"");

WriteLiteral(" type=\"radio\"");

WriteLiteral(" /><label");

WriteLiteral(" for=\"nodeDesignateType4\"");

WriteLiteral(">前一步骤领导</label></div>\r\n                <div");

WriteLiteral(" class=\"rdio rdio-color_a\"");

WriteLiteral("><input");

WriteLiteral(" name=\"nodeDesignateTypename\"");

WriteLiteral(" id=\"nodeDesignateType5\"");

WriteLiteral(" value=\"5\"");

WriteLiteral(" type=\"radio\"");

WriteLiteral(" /><label");

WriteLiteral(" for=\"nodeDesignateType5\"");

WriteLiteral(">发起者部门领导</label></div>\r\n                <div");

WriteLiteral(" class=\"rdio rdio-color_a\"");

WriteLiteral("><input");

WriteLiteral(" name=\"nodeDesignateTypename\"");

WriteLiteral(" id=\"nodeDesignateType6\"");

WriteLiteral(" value=\"6\"");

WriteLiteral(" type=\"radio\"");

WriteLiteral(" /><label");

WriteLiteral(" for=\"nodeDesignateType6\"");

WriteLiteral(">发起者公司领导</label></div>\r\n            </div>\r\n            <div");

WriteLiteral(" id=\"DesignateMember\"");

WriteLiteral(" >\r\n                <div");

WriteLiteral(" class=\"standtabborder\"");

WriteLiteral(" style=\"height: 262px;\"");

WriteLiteral(">\r\n                    <div");

WriteLiteral(" class=\"standtab  standtabactived\"");

WriteLiteral(" onclick=\"learun.changeStandTab({ obj: this, id: \'Role\' })\"");

WriteLiteral(">\r\n                        角色\r\n                    </div>\r\n                    <d" +
"iv");

WriteLiteral(" class=\"standtab \"");

WriteLiteral(" onclick=\"learun.changeStandTab({ obj: this, id: \'Post\' })\"");

WriteLiteral(">\r\n                        岗位\r\n                    </div>\r\n                    <d" +
"iv");

WriteLiteral(" class=\"standtab \"");

WriteLiteral(" onclick=\"learun.changeStandTab({ obj: this, id: \'UserGroup\' })\"");

WriteLiteral(">\r\n                        用户组\r\n                    </div>\r\n                    <" +
"div");

WriteLiteral(" class=\"standtab \"");

WriteLiteral(" onclick=\"learun.changeStandTab({ obj: this, id: \'User\' })\"");

WriteLiteral(">\r\n                        用户\r\n                    </div>\r\n                </div>" +
"\r\n                <div");

WriteLiteral(" id=\"Role\"");

WriteLiteral(" class=\"standtab-pane\"");

WriteLiteral("></div>\r\n                <div");

WriteLiteral(" id=\"Post\"");

WriteLiteral(" style=\"display: none;\"");

WriteLiteral(" class=\"standtab-pane\"");

WriteLiteral("></div>\r\n                <div");

WriteLiteral(" id=\"UserGroup\"");

WriteLiteral(" style=\"display: none;\"");

WriteLiteral(" class=\"standtab-pane\"");

WriteLiteral("></div>\r\n                <div");

WriteLiteral(" id=\"User\"");

WriteLiteral(" style=\"display: none;\"");

WriteLiteral(" class=\"standtab-pane\"");

WriteLiteral("></div>\r\n                <div");

WriteLiteral(" style=\"margin: 0px; border-right: none; border-left: none; border-bottom: none; " +
"background-color: #fff; overflow: auto; padding-bottom: 10px;height:262px;\"");

WriteLiteral(">\r\n                    <div");

WriteLiteral(" id=\"RoleDiv\"");

WriteLiteral(" class=\"flow-portal-panel\"");

WriteLiteral(">\r\n                        <div");

WriteLiteral(" class=\"flow-portal-panel-title\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-paw\"");

WriteLiteral("></i>&nbsp;&nbsp;角色</div>\r\n                    </div>\r\n                    <div");

WriteLiteral(" id=\"PostDiv\"");

WriteLiteral(" class=\"flow-portal-panel\"");

WriteLiteral(">\r\n                        <div");

WriteLiteral(" class=\"flow-portal-panel-title\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-graduation-cap\"");

WriteLiteral("></i>&nbsp;&nbsp;岗位</div>\r\n                    </div>\r\n                    <div");

WriteLiteral(" id=\"UserGroupDiv\"");

WriteLiteral(" class=\"flow-portal-panel\"");

WriteLiteral(">\r\n                        <div");

WriteLiteral(" class=\"flow-portal-panel-title\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-group\"");

WriteLiteral("></i>&nbsp;&nbsp;用户组</div>\r\n                    </div>\r\n                    <div");

WriteLiteral(" id=\"UserDiv\"");

WriteLiteral(" class=\"flow-portal-panel\"");

WriteLiteral(">\r\n                        <div");

WriteLiteral(" class=\"flow-portal-panel-title\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-user\"");

WriteLiteral("></i>&nbsp;&nbsp;用户</div>\r\n                    </div>\r\n                </div>\r\n  " +
"              <div");

WriteLiteral(" id=\"Treebackground\"");

WriteLiteral(" style=\"position: fixed; top: 87px; left: 0px; z-index: 2; width: 750px; height: " +
"262px; background: #000; filter: alpha(opacity=10); opacity: 0.1;\"");

WriteLiteral("></div>\r\n                </div>\r\n        </div>\r\n        <div");

WriteLiteral(" id=\"PermissionInfo\"");

WriteLiteral(" class=\"tab-pane\"");

WriteLiteral(" style=\"overflow-y:auto;\"");

WriteLiteral(">\r\n            <div");

WriteLiteral(" style=\"line-height:45px;padding-left:10px;color: #666; font-weight: 300;font-siz" +
"e: 16px;\"");

WriteLiteral(">\r\n                <i");

WriteLiteral(" class=\"fa fa-tags\"");

WriteLiteral("></i>&nbsp;&nbsp;表单权限配置(默认都是勾选的)\r\n            </div>\r\n            <div");

WriteLiteral(" style=\"overflow-y:auto;height:261px;\"");

WriteLiteral(">\r\n                <table");

WriteLiteral(" class=\"table flow-table-Permission\"");

WriteLiteral("></table>\r\n            </div>\r\n        </div>\r\n        <div");

WriteLiteral(" id=\"SQLInfo\"");

WriteLiteral(" class=\"tab-pane\"");

WriteLiteral(">\r\n            <div");

WriteLiteral(" style=\"padding:10px;\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" id=\"nodeDbId\"");

WriteLiteral(" style=\"margin-bottom:10px;\"");

WriteLiteral(" type=\"selectTree\"");

WriteLiteral(" class=\"ui-select\"");

WriteLiteral("></div>\r\n                <textarea");

WriteLiteral(" id=\"nodeSQL\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" placeholder=\"请在此处填写需要执行的SQL语句,用{0}表示流程实例的主键Id!\"");

WriteLiteral(" style=\"height: 240px;\"");

WriteLiteral("></textarea>\r\n            </div>\r\n        </div>\r\n    </div>\r\n<script>\r\n    (func" +
"tion ($) {\r\n        \"use strict\";\r\n\r\n        $.formJs = {\r\n            node: nul" +
"l,\r\n            nodelist: [],\r\n            formHaven:[],\r\n            formConten" +
"tData: {},//表单字段数据\r\n            loadData: function () {\r\n                var _fl" +
"owObject = top.FlowSchemeDesigner.$.indexJs.step.workFlowInfo.object;\r\n         " +
"       $.formJs.formHaven = top.FlowSchemeDesigner.$.indexJs.focusForm;\r\n       " +
"         $.formJs.formContentData = top.FlowSchemeDesigner.$.indexJs.formContent" +
"Data;\r\n                for (var i in _flowObject.$nodeData) {\r\n                 " +
"   _flowObject.$nodeData[i].id = i;\r\n                    $.formJs.nodelist.push(" +
"_flowObject.$nodeData[i]);\r\n                }\r\n                $.formJs.node = _" +
"flowObject.$nodeData[_flowObject.$focus];\r\n            },\r\n            initialCo" +
"ntrol: function () {\r\n                if ($.formJs.node.type != \"confluencenode\"" +
")\r\n                {\r\n                    $(\'#confluencenode\').hide();//是否会签节点\r\n" +
"                }\r\n                $(\'#nodeCode\').val($.formJs.node.id);\r\n      " +
"          $(\'#nodeMyName\').val($.formJs.node.name);\r\n\r\n                $(\"#nodeR" +
"ejectType\").comboBox({\r\n                    data: [{ \"key\": \"0\", \"value\": \"前一步\" " +
"}, { \"key\": \"1\", \"value\": \"第一步\" }, { \"key\": \"2\", \"value\": \"某一步\" },  { \"key\": \"3\"" +
", \"value\": \"不处理\" }],\r\n                    id: \"key\",\r\n                    text: " +
"\"value\"\r\n                }).bind(\"change\", function () {\r\n                    va" +
"r _value = $(this).attr(\'data-value\');\r\n                    var _comdata = [];\r\n" +
"                    if (_value == \"2\") {\r\n                        _comdata = $.f" +
"ormJs.nodelist;\r\n                    }\r\n                    //驳回到某一步\r\n          " +
"          $(\"#nodeRejectStep\").comboBox({\r\n                        data: _comdat" +
"a,\r\n                        id: \"id\",\r\n                        text: \"name\"\r\n   " +
"                 });\r\n                }).comboBoxSetValue(0);\r\n                /" +
"/驳回到某一步\r\n                $(\"#nodeRejectStep\").comboBox({\r\n                    al" +
"lowSearch: true,\r\n                    maxHeight: \"110px\",\r\n                });\r\n" +
"                //会签策略\r\n                $(\"#nodeConfluenceType\").comboBox({\r\n   " +
"                 data: [{ \"key\": 0, \"value\": \"所有步骤通过\" }, { \"key\": 1, \"value\": \"一" +
"个步骤通过即可\" }, { \"key\": 2, \"value\": \"按百分比计算\" }],\r\n                    id: \"key\",\r\n " +
"                   text: \"value\"\r\n                });\r\n                //表单选择\r\n " +
"               $(\"#nodeForm\").comboBoxTree({\r\n                    maxHeight: \"11" +
"0px\",\r\n                    data: top.FlowSchemeDesigner.$.indexJs.formDataList,\r" +
"\n                    allowSearch: true,\r\n                    dataItemName: \"Form" +
"Sort\",\r\n                    click: function (item) {\r\n                        if" +
" (item.Sort == \"form\") {\r\n                            if ($.formJs.formContentDa" +
"ta[item.value] != undefined) {\r\n                                $.formJs.setFrmC" +
"otent(item.value);\r\n                            }\r\n                            e" +
"lse {\r\n                                learun.getDataForm({\r\n                   " +
"                 type: \'get\',\r\n                                    url: \"../../F" +
"ormManage/FormModule/GetEntityJson\",\r\n                                    param:" +
" { keyValue: item.value },\r\n                                    async: true,\r\n  " +
"                                  success: function (data) {\r\n                  " +
"                      var dataJson = JSON.parse(data.F_FrmContent);\r\n           " +
"                             top.FlowSchemeDesigner.$.indexJs.formContentData[it" +
"em.value] = { name: item.text, data: dataJson };\r\n                              " +
"          $.formJs.setFrmCotent(item.value);\r\n                                  " +
"  }\r\n                                });\r\n                            }\r\n       " +
"                 }\r\n                        else {\r\n                            " +
"learun.dialogTop({ msg: \"请选择表单而不是表单分类\", type: \"error\" });\r\n                     " +
"   }\r\n                    }\r\n                });\r\n                //SQL语句执行\r\n   " +
"             $(\"#nodeDbId\").comboBoxTree({\r\n                    description: \"==" +
"请选择执行SQL语句的数据库==\",\r\n                    height: \"230px\",\r\n                    ur" +
"l: \"../../SystemManage/DataBaseLink/GetTreeJson\",\r\n                    allowSear" +
"ch: true\r\n                });\r\n            },\r\n            setData: function () " +
"{\r\n                var _node = $.formJs.node;\r\n                var formId = \"\";\r" +
"\n                if (_node.setInfo != undefined)\r\n                {\r\n           " +
"         formId = _node.setInfo.nodeForm;\r\n                }\r\n                $." +
"formJs.setFrmCotent(formId);\r\n                if (_node.setInfo != undefined) {\r" +
"\n                    $(\"#BaseInfo\").setWebControls(_node.setInfo);\r\n            " +
"        $(\"#SQLInfo\").setWebControls(_node.setInfo);\r\n                    $(\'#no" +
"deDesignateType\' + _node.setInfo.nodeDesignate).trigger(\"click\");\r\n             " +
"       if (_node.setInfo.nodeDesignate == \"2\")\r\n                    {\r\n         " +
"               $(\"#Role\").setCheckedNodes(_node.setInfo.nodeDesignateData.role);" +
"\r\n                        $(\"#Post\").setCheckedNodes(_node.setInfo.nodeDesignate" +
"Data.post);\r\n                        $(\"#UserGroup\").setCheckedNodes(_node.setIn" +
"fo.nodeDesignateData.usergroup);\r\n                        $(\"#User\").setCheckedN" +
"odes(_node.setInfo.nodeDesignateData.user);\r\n                    }\r\n            " +
"        $.each(_node.setInfo.nodeAuthorizeInfo, function (i, item) {\r\n          " +
"              if (item.look) {\r\n                            $(\'#PermissionInfo\')" +
".find(\'#frmlook_\' + item.fieldid).attr(\"checked\", \"checked\");\r\n                 " +
"       }\r\n                        else {\r\n                            $(\'#Permis" +
"sionInfo\').find(\'#frmlook_\' + item.fieldid).removeAttr(\"checked\");\r\n            " +
"            }\r\n                        if (item.down != undefined) {\r\n          " +
"                  if (item.down) {\r\n                                $(\'#Permissi" +
"onInfo\').find(\'#frmdown_\' + item.fieldid).attr(\"checked\", \"checked\");\r\n         " +
"                   }\r\n                            else {\r\n                      " +
"          $(\'#PermissionInfo\').find(\'#frmdown_\' + item.fieldid).removeAttr(\"chec" +
"ked\");\r\n                            }\r\n                        }\r\n              " +
"          if (item.edit != undefined) {\r\n                            if (item.ed" +
"it) {\r\n                                $(\'#PermissionInfo\').find(\'#frmedit_\' + i" +
"tem.fieldid).attr(\"checked\", \"checked\");\r\n                            }\r\n       " +
"                     else {\r\n                                $(\'#PermissionInfo\'" +
").find(\'#frmedit_\' + item.fieldid).removeAttr(\"checked\");\r\n                     " +
"       }\r\n                        }\r\n\r\n\r\n                    });\r\n              " +
"  }\r\n\r\n            },\r\n            designateMember: {\r\n                initial: " +
"function () {\r\n                    $.formJs.designateMember.initialTree(\'Role\');" +
"\r\n                    $.formJs.designateMember.initialTree(\'Post\');\r\n           " +
"         $.formJs.designateMember.initialTree(\'UserGroup\');\r\n                   " +
" $.formJs.designateMember.initialTree(\'User\');\r\n                    $(\"input[nam" +
"e=\'nodeDesignateTypename\']\").click(function () {\r\n                        var va" +
"lue = $(this).val();\r\n                        if (value == \'2\') {\r\n             " +
"               $(\"#Treebackground\").hide();\r\n                        } else {\r\n " +
"                           $(\"#Treebackground\").show();\r\n                       " +
" }\r\n                    });\r\n\r\n                },\r\n                initialTree: " +
"function (type) {\r\n                    var item = {\r\n                        hei" +
"ght: 262,\r\n                        showcheck: true,\r\n                        dat" +
"a: $.arrayClone(top.FlowSchemeDesigner.$.indexJs.step.authorizeInfo.allDataJson[" +
"type]),\r\n                        oncheckboxclick: function (item, et, s) {\r\n    " +
"                        var $item = $(\"#\" + item.mytype + \"Div\");\r\n             " +
"               if (et == 1) {\r\n                                var mytype = \"\";\r" +
"\n                                var _html = \"\";\r\n                              " +
"  var _title = \'\';\r\n                                switch (item.mytype) {\r\n    " +
"                                case \"Role\":\r\n                                  " +
"      mytype = \'label-success\';\r\n                                        break;\r" +
"\n                                    case \"Post\":\r\n                             " +
"           mytype = \'label-info\';\r\n                                        break" +
";\r\n                                    case \"UserGroup\":\r\n                      " +
"                  mytype = \'label-warning\';\r\n                                   " +
"     break;\r\n                                    case \"User\":\r\n                 " +
"                       mytype = \'label-danger\';\r\n                               " +
"         break;\r\n                                }\r\n                            " +
"    _html += \'<span  id=\"\' + item.id + \'\" data-value=\"\' + item.mytype + \'\" class" +
"=\"flow-card-box label \' + mytype + \' \">\' + item.text + \'<i class=\"fa fa-close\"><" +
"/i></span>\';\r\n                                $item.append(_html);\r\n            " +
"                    $item.show();\r\n\r\n                                $(\".flow-ca" +
"rd-box\").click(function () {\r\n                                    $(this).remove" +
"();\r\n                                    $(\'#\' + $(this).attr(\'data-value\')).set" +
"NoCheckedNodes($(this).attr(\'id\'));\r\n                                    if ($it" +
"em.find(\'.flow-card-box\').length == 0) {\r\n                                      " +
"  $item.hide();\r\n                                    }\r\n                        " +
"        })\r\n                            }\r\n                            else if (" +
"et == 0) {\r\n                                $item.find(\'#\' + item.id).remove();\r" +
"\n                                if ($item.find(\'.flow-card-box\').length == 0) {" +
"\r\n                                    $item.hide();\r\n                           " +
"     }\r\n                            }\r\n                        }\r\n              " +
"      };\r\n                    $(\"#\" + type).treeview(item);\r\n                }\r\n" +
"            },\r\n            initFrmCotent: function (formId, opt) {\r\n           " +
"     var data = [];\r\n                if (opt.data.type == 2) {\r\n                " +
"    data = opt.data.data.fields;\r\n                }\r\n                else {\r\n   " +
"                 $.each(opt.data.data, function (i, item) {\r\n                   " +
"     $.each(item.fields, function (j, jitem) {\r\n                            data" +
".push(jitem);\r\n                        });\r\n                    });\r\n           " +
"     }\r\n                $.each(data, function (i, item) {\r\n                    v" +
"ar rowdata = \'<tr data-value=\"\' + formId + \'\" ><td><i class=\"fa fa-star\"></i></t" +
"d><td>\' + opt.name + \"-\" + item.label + \'</td><td>\';\r\n                    rowdat" +
"a += \'<div class=\"ckbox ckbox-color_a\"><input id=\"frmedit_\' + item.field + \'\" va" +
"lue=\"\' + item.field + \'\" type=\"checkbox\" checked><label for=\"frmedit_\' + item.fi" +
"eld + \'\">编辑</label></div>\';\r\n                    rowdata += \'<div class=\"ckbox c" +
"kbox-color_a\"><input id=\"frmlook_\' + item.field + \'\" value=\"\' + item.field + \'\" " +
"type=\"checkbox\" checked><label for=\"frmlook_\' + item.field + \'\">查看</label></div>" +
"\';\r\n                    rowdata += \'</td></tr>\';\r\n\r\n                    $(\'#Perm" +
"issionInfo\').find(\'table\').append(rowdata);\r\n                });\r\n            }," +
"\r\n            setFrmCotent: function (frmId) {\r\n                var dataJson;\r\n " +
"               $(\'#PermissionInfo\').find(\'table\').html(\"\");\r\n                if " +
"($.formJs.formHaven.indexOf(frmId) == -1 && frmId　!= \"\") {\r\n                    " +
"if ($.formJs.formContentData[frmId] != undefined) {\r\n                        dat" +
"aJson = $.formJs.formContentData[frmId];\r\n                        $.formJs.initF" +
"rmCotent(frmId, dataJson);\r\n                    }\r\n                    else {\r\n " +
"                       learun.getDataForm({\r\n                            type: \'" +
"get\',\r\n                            url: \"../../FormManage/FormModule/GetEntityJs" +
"on\",\r\n                            param: { keyValue: frmId },\r\n                 " +
"           success: function (dd) {\r\n                                if (dd != n" +
"ull)\r\n                                {\r\n                                    var" +
" _dataJson = JSON.parse(dd.F_FrmContent);\r\n                                    t" +
"op.FlowSchemeDesigner.$.indexJs.formContentData[frmId] = { name: dd.F_FrmName, d" +
"ata: _dataJson };\r\n                                    $.formJs.initFrmCotent(fr" +
"mId, { name: dd.F_FrmName, data: _dataJson});\r\n                                }" +
"\r\n                              \r\n                            }\r\n               " +
"         });\r\n                    }\r\n                }\r\n                for (var" +
" j in $.formJs.formHaven) {\r\n                    var _item = $.formJs.formHaven[" +
"j];\r\n                    if (frmId != _item) {\r\n                        $(\'#node" +
"Form-option\').find(\'[data-value=\"\' + _item + \'\"]\').parent().parent().parent().re" +
"move();\r\n                    }\r\n                    if ($.formJs.formContentData" +
"[_item] != undefined) {\r\n                        var dataJson = $.formJs.formCon" +
"tentData[_item];\r\n                        $.formJs.initFrmCotent(_item, dataJson" +
");\r\n                    }\r\n                    else {\r\n                        l" +
"earun.getDataForm({\r\n                            type: \'get\',\r\n                 " +
"           url: \"../../FormManage/FormModule/GetEntityJson\",\r\n                  " +
"          param: { keyValue: _item },\r\n                            success: func" +
"tion (dd) {\r\n                                if (dd != null)\r\n                  " +
"              {\r\n                                    var _dataJson = JSON.parse(" +
"dd.F_FrmContent);\r\n                                    top.FlowSchemeDesigner.$." +
"indexJs.formContentData[_item] = { name: dd.F_FrmName, data: _dataJson };\r\n     " +
"                               $.formJs.initFrmCotent(_item,{ name: dd.F_FrmName" +
", data: _dataJson });\r\n                                }\r\n                      " +
"      }\r\n                        });\r\n                    }\r\n                }\r\n" +
"            },\r\n            acceptClick: function (callBack) {\r\n                " +
"if (!$(\'#BaseInfo\').Validform()) {\r\n                    return false;\r\n         " +
"       }\r\n                var baseinfo = $(\"#BaseInfo\").GetWebControls();\r\n     " +
"           var sqlinfo = $(\"#SQLInfo\").GetWebControls();\r\n                var _D" +
"esignate = {};\r\n                if ($(\'.bottomline\').find(\'input:checked\').val()" +
" == \'2\') {\r\n                    _Designate[\"role\"] = $(\"#Role\").getCheckedAllNod" +
"es();\r\n                    _Designate[\"post\"] = $(\"#Post\").getCheckedAllNodes();" +
"\r\n                    _Designate[\"usergroup\"] = $(\"#UserGroup\").getCheckedAllNod" +
"es();\r\n                    _Designate[\"user\"] = $(\"#User\").getCheckedAllNodes();" +
"\r\n                }\r\n                var _nodeAuthorizeInfo = [];\r\n             " +
"   $.each($(\'#PermissionInfo\').find(\'tr\'), function (i, item) {\r\n               " +
"     var formId = $(this).attr(\'data-value\');\r\n                    var _point = " +
"{ formId: formId };\r\n                    $.each($(item).find(\'input\'), function " +
"(j, d) {\r\n                        var _id = $(d).attr(\"id\");\r\n                  " +
"      _point[\"fieldid\"] = $(d).val();\r\n                        if (_id.indexOf(\"" +
"frmlook_\") != -1) {\r\n                            _point[\"look\"] = $(d)[0].checke" +
"d;\r\n                        }\r\n                        else {\r\n                 " +
"           _point[\"edit\"] = $(d)[0].checked;\r\n                        }\r\n       " +
"             });\r\n                    _nodeAuthorizeInfo.push(_point);\r\n        " +
"        });\r\n                var nodeSetData = {\r\n                    nodeCode: " +
"baseinfo.nodeCode,\r\n                    nodeMyName: baseinfo.nodeMyName,\r\n      " +
"              nodeRejectType: baseinfo.nodeRejectType,\r\n                    node" +
"RejectStep: baseinfo.nodeRejectStep,\r\n                    nodeForm: baseinfo.nod" +
"eForm,\r\n                    nodeSysFn: baseinfo.nodeSysFn,\r\n                    " +
"nodeDes: baseinfo.nodeDes,\r\n                    nodeConfluenceType: baseinfo.nod" +
"eConfluenceType,\r\n                    nodeConfluenceRate: baseinfo.nodeConfluenc" +
"eRate,\r\n                    nodeDbId: sqlinfo.nodeDbId,\r\n                    nod" +
"eSQL: sqlinfo.nodeSQL,\r\n                    nodeDesignate: $(\'.bottomline\').find" +
"(\'input:checked\').val(),\r\n                    nodeDesignateData: _Designate,\r\n  " +
"                  nodeAuthorizeInfo: _nodeAuthorizeInfo\r\n                };\r\n   " +
"             callBack($.formJs.node.id, nodeSetData);\r\n                dialogClo" +
"se();\r\n            }\r\n        };\r\n        $(function () {\r\n            $.formJs." +
"loadData();\r\n            $.formJs.initialControl();\r\n            $.formJs.design" +
"ateMember.initial();\r\n            $.formJs.setData();\r\n        });\r\n    })(windo" +
"w.jQuery);\r\n</script>\r\n\r\n");

        }
    }
}
#pragma warning restore 1591

#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Areas/GeneratorManage/Views/MultiTable/EditControl.cshtml")]
    public partial class _Areas_GeneratorManage_Views_MultiTable_EditControl_cshtml : System.Web.Mvc.WebViewPage<dynamic>
    {
        public _Areas_GeneratorManage_Views_MultiTable_EditControl_cshtml()
        {
        }
        public override void Execute()
        {
WriteLiteral("\r\n");

            
            #line 6 "..\..\Areas\GeneratorManage\Views\MultiTable\EditControl.cshtml"
  
    ViewBag.Title = "编辑控件";
    Layout = "~/Views/Shared/_Form.cshtml";

            
            #line default
            #line hidden
WriteLiteral("\r\n<style>\r\n    .dataSources, .dataDataDb {\r\n        display: none;\r\n    }\r\n</styl" +
"e>\r\n<div");

WriteLiteral(" style=\"margin-left: 10px; margin-top: 20px; margin-right: 30px;\"");

WriteLiteral(">\r\n    <table");

WriteLiteral(" class=\"form\"");

WriteLiteral(">\r\n        <tr>\r\n            <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">字段标识</th>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <input");

WriteLiteral(" id=\"ControlId\"");

WriteLiteral(" disabled");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" />\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">字段名称</th>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <input");

WriteLiteral(" id=\"ControlName\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" />\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <td");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">字段类型</td>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <select");

WriteLiteral(" id=\"ControlType\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(">\r\n                    <option");

WriteLiteral(" value=\"input\"");

WriteLiteral(">文本框</option>\r\n                    <option");

WriteLiteral(" value=\"select\"");

WriteLiteral(">下拉框</option>\r\n                    <option");

WriteLiteral(" value=\"datetime\"");

WriteLiteral(">日期框</option>\r\n                    <option");

WriteLiteral(" value=\"textarea\"");

WriteLiteral(">文本区</option>\r\n                </select>\r\n            </td>\r\n        </tr>\r\n     " +
"   <tr");

WriteLiteral(" class=\"dataSources\"");

WriteLiteral(">\r\n            <td");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">数据类型</td>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <select");

WriteLiteral(" id=\"ControlDataSource\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(">\r\n                    <option");

WriteLiteral(" value=\"dataItem\"");

WriteLiteral(">数据字典</option>\r\n                    <option");

WriteLiteral(" value=\"dataDb\"");

WriteLiteral(">数据表</option>\r\n                </select>\r\n            </td>\r\n        </tr>\r\n     " +
"   <tr");

WriteLiteral(" class=\"dataSources dataDataItem\"");

WriteLiteral(">\r\n            <td");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">数据字典</td>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" id=\"ControlDataItemEncode\"");

WriteLiteral(" type=\"selectTree\"");

WriteLiteral(" class=\"ui-select\"");

WriteLiteral("></div>\r\n            </td>\r\n        </tr>\r\n        <tr");

WriteLiteral(" class=\"dataSources dataDataDb\"");

WriteLiteral(">\r\n            <td");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">数据库</td>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <select");

WriteLiteral(" id=\"ControlDataDb\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral("></select>\r\n            </td>\r\n        </tr>\r\n        <tr");

WriteLiteral(" class=\"dataSources dataDataDb\"");

WriteLiteral(">\r\n            <td");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">数据表</td>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <select");

WriteLiteral(" id=\"ControlDataTable\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral("></select>\r\n            </td>\r\n        </tr>\r\n        <tr");

WriteLiteral(" class=\"dataSources dataDataDb\"");

WriteLiteral(">\r\n            <td");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">id字段名</td>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <select");

WriteLiteral(" id=\"ControlDataFliedId\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral("></select>\r\n            </td>\r\n        </tr>\r\n        <tr");

WriteLiteral(" class=\"dataSources dataDataDb\"");

WriteLiteral(">\r\n            <td");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">text字段名</td>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <select");

WriteLiteral(" id=\"ControlDataFliedText\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral("></select>\r\n            </td>\r\n        </tr>\r\n    </table>\r\n</div>\r\n<script>\r\n   " +
" (function ($) {\r\n        \"use strict\";\r\n\r\n        $.form = {\r\n            contr" +
"olId: request(\'controlId\'),\r\n            dataJson: {\r\n                controlId:" +
" \"\",\r\n                controlName: \"\",\r\n                controlType: \"\",\r\n      " +
"          controlDataSource: \"\",\r\n                controlDataItemEncode: \"\",\r\n  " +
"              controlDataItemEncodeValue: \"\",\r\n                controlDataDb: \"\"" +
",\r\n                controlDataTable: \"\",\r\n                controlDataFliedId: \"\"" +
",\r\n                controlDataFliedText: \"\"\r\n            },\r\n            initCon" +
"trol: function () {\r\n                $(\'#ControlType\').on(\'change\', function () " +
"{\r\n                    var $obj = $(this);\r\n                    var value = $obj" +
".val();\r\n                    if (value == \"select\") {\r\n                        $" +
"(\'.dataSources\').show();\r\n                        var datasourceType = $(\'#Contr" +
"olDataSource\').val();\r\n                        if (datasourceType == \"dataItem\")" +
" {\r\n                            $(\'.dataDataDb\').hide();\r\n                      " +
"  }\r\n                        else {\r\n                            $(\'.dataDataIte" +
"m\').hide();\r\n                        }\r\n                    }\r\n                 " +
"   else {\r\n                        $(\'.dataSources\').hide();\r\n                  " +
"  }\r\n                });\r\n                $(\'#ControlDataSource\').on(\'change\', f" +
"unction () {\r\n                    var $obj = $(this);\r\n                    var v" +
"alue = $obj.val();\r\n                    if (value == \"dataItem\") {\r\n            " +
"            $(\'.dataDataItem\').show();\r\n                        $(\'.dataDataDb\')" +
".hide();\r\n                    }\r\n                    else {\r\n                   " +
"     $(\'.dataDataItem\').hide();\r\n                        $(\'.dataDataDb\').show()" +
";\r\n                    }\r\n                });\r\n                $(\"#ControlDataIt" +
"emEncode\").comboBoxTree({\r\n                    url: \"../../SystemManage/DataItem" +
"/GetTreeJson\",\r\n                    maxHeight: \"200px\",\r\n                    cli" +
"ck: function (item) {\r\n                        $.form.dataJson.controlDataItemEn" +
"codeValue = item.value;\r\n                        //console.log(item);\r\n         " +
"           }\r\n                });\r\n                $.ajax({\r\n                   " +
" url: \"../../SystemManage/DataBaseLink/GetListJson\",\r\n                    type: " +
"\"get\",\r\n                    dataType: \"json\",\r\n                    async: false," +
"\r\n                    success: function (data) {\r\n                        $(\"#Co" +
"ntrolDataDb\").append($(\"<option title=\'请选择\'></option>\").html(\"请选择\"));\r\n         " +
"               $.each(data, function (i) {\r\n                            $(\"#Cont" +
"rolDataDb\").append($(\"<option title=\'\" + data[i].F_DBName + \"\'></option>\").val(d" +
"ata[i].F_DatabaseLinkId).html(data[i].F_DBAlias));\r\n                            " +
"$(\"#ControlDataDb\").change(function () {\r\n                                $.ajax" +
"({\r\n                                    url: \"../../SystemManage/DataBaseTable/G" +
"etTableListJson\",\r\n                                    data: { dataBaseLinkId: $" +
"(\"#ControlDataDb\").val() },\r\n                                    type: \"get\",\r\n " +
"                                   dataType: \"json\",\r\n                          " +
"          async: false,\r\n                                    success: function (" +
"data) {\r\n                                        \r\n                             " +
"           $(\"#ControlDataTable\").html(\"\");\r\n                                   " +
"     $(\"#ControlDataFliedId\").html(\"\");\r\n                                       " +
" $(\"#ControlDataFliedText\").html(\"\");\r\n                                        $" +
"(\"#ControlDataTable\").append($(\"<option title=\'请选择\'></option>\").html(\"请选择\"));\r\n " +
"                                       if (data.errorcode != 0)\r\n               " +
"                         {\r\n                                            //绑定表\r\n " +
"                                           $.each(data, function (i) {\r\n        " +
"                                        $(\"#ControlDataTable\").append($(\"<option" +
"></option>\").val(data[i].f_name).html(data[i].f_name));\r\n                       " +
"                     });\r\n                                            //表字段\r\n   " +
"                                         $(\"#ControlDataTable\").change(function " +
"() {\r\n\r\n                                                $.ajax({\r\n              " +
"                                      url: \"../../SystemManage/DataBaseTable/Get" +
"TableFiledListJson\",\r\n                                                    data: " +
"{ dataBaseLinkId: $(\"#ControlDataDb\").val(), tableName: $(\"#ControlDataTable\").v" +
"al() },\r\n                                                    type: \"get\",\r\n     " +
"                                               dataType: \"json\",\r\n              " +
"                                      async: false,\r\n                           " +
"                         success: function (data) {\r\n                           " +
"                             $(\"#ControlDataFliedId\").html(\"\");\r\n               " +
"                                         $(\"#ControlDataFliedText\").html(\"\");\r\n " +
"                                                       $.each(data, function (i)" +
" {\r\n                                                            $(\"#ControlDataF" +
"liedId\").append($(\"<option title=\'\" + data[i].f_remark + \"\'></option>\").val(data" +
"[i].f_column).html(data[i].f_column));\r\n                                        " +
"                    $(\"#ControlDataFliedText\").append($(\"<option title=\'\" + data" +
"[i].f_remark + \"\'></option>\").val(data[i].f_column).html(data[i].f_column));\r\n  " +
"                                                      });\r\n                     " +
"                               }\r\n                                              " +
"  });\r\n                                            });\r\n                        " +
"                }\r\n                                    }\r\n                      " +
"          });\r\n                            });\r\n                        });\r\n   " +
"                 }\r\n                });\r\n            },\r\n            initData: f" +
"unction () {\r\n                $.form.dataJson = $.extend($.form.dataJson, getInf" +
"oTop().Form.$.codeBuilder.formPage.primaryFormJson);\r\n                $.each($.f" +
"orm.dataJson, function (id, item) {\r\n                    if (item.controlId == $" +
".form.controlId) {\r\n                        $(\"#ControlId\").val(item.controlId);" +
"\r\n                        $(\"#ControlName\").val(item.controlName);\r\n            " +
"            $(\'#ControlType\').val(item.controlType);\r\n                        if" +
" (item.controlType == \"select\") {\r\n                            $(\'#ControlType\')" +
".trigger(\'change\');\r\n                            $(\'#ControlDataSource\').val(ite" +
"m.controlDataSource);\r\n                            $(\'#ControlDataSource\').trigg" +
"er(\'change\');\r\n                            if (item.controlDataSource == \"dataIt" +
"em\") {\r\n                                console.log(item.controlDataItemEncode);" +
"\r\n                                $(\'#ControlDataItemEncode\').ComboBoxTreeSetVal" +
"ue(item.controlDataItemEncode);\r\n                            }\r\n                " +
"            else {\r\n                                $(\'#ControlDataDb\').val(item" +
".controlDataDb);\r\n                                $(\'#ControlDataDb\').trigger(\'c" +
"hange\');\r\n                                $(\'#ControlDataTable\').val(item.contro" +
"lDataTable);\r\n                                $(\'#ControlDataTable\').trigger(\'ch" +
"ange\');\r\n                                $(\'#ControlDataFliedId\').val(item.contr" +
"olDataFliedId);\r\n                                $(\'#ControlDataFliedText\').val(" +
"item.controlDataFliedText);\r\n                            }\r\n                    " +
"    }\r\n                        return false;\r\n                    }\r\n           " +
"     });\r\n            },\r\n            acceptClick: function (callBack) {\r\n      " +
"          var _data = {\r\n                    controlId: $(\"#ControlId\").val(),\r\n" +
"                    controlName: $(\"#ControlName\").val(),\r\n                    c" +
"ontrolType: $(\"#ControlType\").val(),\r\n                    controlDataSource: $(\"" +
"#ControlDataSource\").val(),\r\n                    controlDataItemEncode: $(\"#Cont" +
"rolDataItemEncode\").attr(\'data-value\'),\r\n                    controlDataItemEnco" +
"deValue: $.form.dataJson.controlDataItemEncodeValue,\r\n                    contro" +
"lDataDb: $(\"#ControlDataDb\").val(),\r\n                    controlDataTable: $(\"#C" +
"ontrolDataTable\").val(),\r\n                    controlDataFliedId: $(\"#ControlDat" +
"aFliedId\").val(),\r\n                    controlDataFliedText: $(\"#ControlDataFlie" +
"dText\").val()\r\n                }\r\n                if (_data.controlName == \"\") {" +
"\r\n                    dialogTop(\"请填写字段名称\", \"error\");\r\n                }\r\n       " +
"         else {\r\n                    callBack(_data);\r\n                    dialo" +
"gClose();\r\n                }\r\n            }\r\n        };\r\n\r\n        $(function ()" +
" {\r\n            $.form.initControl();\r\n            $.form.initData();\r\n        }" +
");\r\n    })(window.jQuery);\r\n</script>\r\n");

        }
    }
}
#pragma warning restore 1591

#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Areas/DMCJManage/Views/Drawing/DMCJContourLine.cshtml")]
    public partial class _Areas_DMCJManage_Views_Drawing_DMCJContourLine_cshtml : System.Web.Mvc.WebViewPage<dynamic>
    {
        public _Areas_DMCJManage_Views_Drawing_DMCJContourLine_cshtml()
        {
        }
        public override void Execute()
        {
            
            #line 1 "..\..\Areas\DMCJManage\Views\Drawing\DMCJContourLine.cshtml"
  
    ViewBag.Title = "列表页面";
    Layout = "~/Views/Shared/_IndexMap.cshtml";

            
            #line default
            #line hidden
WriteLiteral(@"
<style>
    .ui-layout-center {
        overflow-x: hidden !important;
    }

    .ui-layout-resizer {
        background-color: #f0f3f4 !important;
    }

    .ui-jqgrid {
        width: 100% !important;
    }
    .formTitle{
        display:inline-block;
        width:104px;
        padding-left:5px;
    }
    #XZQHCODE .formTitle{
        display:inline-block;
        width:100px;
        padding:5px;
        margin-right:8px;
    }
    #filter-form tr{
        height:36px;
    }
    .ui-select{
        width:160px;
    }
    .form-control{
        display:inline-block;
    }
    div#filter-form{
        border:none;
    }
</style>



<div");

WriteLiteral(" class=\"ui-layout\"");

WriteLiteral(" id=\"layout\"");

WriteLiteral(" style=\"height: 100%; width: 100%;\"");

WriteLiteral(">\r\n    <div");

WriteLiteral(" class=\"ui-layout-west\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" class=\"west-Panel\"");

WriteLiteral(" style=\"margin:0px\"");

WriteLiteral(" id=\"filter-form\"");

WriteLiteral(">\r\n            <div");

WriteLiteral(" class=\"panel-Title\"");

WriteLiteral(">\r\n                <span>制图条件</span>\r\n            </div>\r\n            <div");

WriteLiteral(" class=\"title-search\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" class=\"single_cell\"");

WriteLiteral(" style=\"\"");

WriteLiteral(">\r\n                   ");

WriteLiteral("\r\n                    <div");

WriteLiteral(" id=\"XZQHCODE\"");

WriteLiteral(" style=\"margin: 0;\"");

WriteLiteral("></div>\r\n                </div>\r\n                <div");

WriteLiteral(" class=\"single_cell\"");

WriteLiteral(" style=\"height:32px;line-height:32px;margin-top:3px;\"");

WriteLiteral(">\r\n                    <span");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(" style=\"float:left;margin-right:3px;\"");

WriteLiteral(">区域:</span>\r\n                    <div");

WriteLiteral(" id=\"QY\"");

WriteLiteral(" type=\"select\"");

WriteLiteral(" class=\"ui-select\"");

WriteLiteral(" style=\"float:left;\"");

WriteLiteral("></div>\r\n                </div>\r\n                <div");

WriteLiteral(" class=\"single_cell\"");

WriteLiteral(">\r\n                    <span");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(" style=\"\"");

WriteLiteral(">等值线间距(mm):</span>\r\n                    <input");

WriteLiteral(" id=\"IntervalValue\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" value=\"2\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" style=\"width: 160px;\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"Num\"");

WriteLiteral(" />\r\n                </div>\r\n                <div");

WriteLiteral(" style=\"clear: both;\"");

WriteLiteral("></div>\r\n            </div>\r\n            <div");

WriteLiteral(" class=\"title-search\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" class=\"title-search\"");

WriteLiteral(" style=\"transition:all 0.6s\"");

WriteLiteral(">\r\n                    <div");

WriteLiteral(" class=\"single_cell\"");

WriteLiteral(" style=\"height:32px;line-height:32px;margin-top:3px;\"");

WriteLiteral(">\r\n                        <span");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">监测开始时间:</span>\r\n                        <input");

WriteLiteral(" id=\"STARTYEAR\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control input-wdatepicker\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"NotNull\"");

WriteLiteral(" datefmt=\"yyyy\"");

WriteLiteral(" onfocus=\"WdatePicker({ dateFmt: \'yyyy\' })\"");

WriteLiteral(" style=\"width:160px;\"");

WriteLiteral(" />");

WriteLiteral("\r\n                    </div>\r\n                    <div");

WriteLiteral(" class=\"single_cell\"");

WriteLiteral(" style=\"height:64px;line-height:32px;margin-top:3px;\"");

WriteLiteral(">\r\n                        <span");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">监测结束时间:</span>\r\n                        <input");

WriteLiteral(" id=\"ENDYEAR\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control input-wdatepicker\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"NotNull\"");

WriteLiteral(" datefmt=\"yyyy\"");

WriteLiteral(" onfocus=\"WdatePicker({ dateFmt: \'yyyy\'})\"");

WriteLiteral(" style=\"width:160px;\"");

WriteLiteral(" /> ");

WriteLiteral("\r\n                    </div>\r\n                    <div");

WriteLiteral(" class=\"single_cell\"");

WriteLiteral(">\r\n                        <a");

WriteLiteral(" id=\"btn_Search\"");

WriteLiteral(" class=\"btn btn-primary\"");

WriteLiteral(" style=\"width:90px !important;margin-left:8px;\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-life-bouy\"");

WriteLiteral("></i>开始制图</a>\r\n                        <a");

WriteLiteral(" class=\"btn btn-primary\"");

WriteLiteral(" onclick=\"reset()\"");

WriteLiteral(" style=\"background-color:gray;\"");

WriteLiteral(">重置</a>\r\n                        <a");

WriteLiteral(" class=\"btn\"");

WriteLiteral(" onclick=\"downFile()\"");

WriteLiteral(">下载</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n" +
"        </div>\r\n    </div>\r\n    <div");

WriteLiteral(" class=\"ui-layout-center\"");

WriteLiteral(" id=\"ui_center\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" id=\"mapControl\"");

WriteLiteral("></div>\r\n    </div>\r\n</div>\r\n\r\n");

DefineSection("Scripts", () => {

WriteLiteral("\r\n<script");

WriteAttribute("src", Tuple.Create(" src=\"", 3597), Tuple.Create("\"", 3656)
, Tuple.Create(Tuple.Create("", 3603), Tuple.Create<System.Object, System.Int32>(Href("~/Content/scripts/plugins/districts/multiDistricts.js")
, 3603), false)
);

WriteLiteral("></script>\r\n<script");

WriteAttribute("src", Tuple.Create(" src=\"", 3676), Tuple.Create("\"", 3711)
, Tuple.Create(Tuple.Create("", 3682), Tuple.Create<System.Object, System.Int32>(Href("~/Content/business/comForm.js")
, 3682), false)
);

WriteLiteral("></script>\r\n<script>\r\n    var layout2NorthH = 1;\r\n    var filePath = \"\";\r\n    var" +
" authToken = getAuthorizationToken();\r\n    var userCode = \'\';\r\n    $(function ()" +
" {\r\n        GetCurrentUserCode();\r\n        InitialPage();\r\n        //GetTree();\r" +
"\n        GetMapData();\r\n        initControl();\r\n        GetLastTime();\r\n        " +
"//var date = new Date();\r\n        //var dateStringEn = date.getFullYear();\r\n    " +
"    //$(\"#ENDYEAR\").val(dateStringEn);\r\n        //$(\"#STARTYEAR\").val(dateString" +
"En - 1);\r\n\r\n        //查询点击事件\r\n        $(\"#btn_Search\").click(function () {\r\n    " +
"        SearchEvent();\r\n        });\r\n        //折叠面板显隐\r\n        $(\'#accordion\').a" +
"ccordion({\r\n            active: false,\r\n            collapsible: true\r\n        }" +
")\r\n\r\n    });\r\n    var dataSEASON;\r\n    function timeClick(obj) {\r\n        if (!d" +
"ataSEASON) {\r\n            dataSEASON = cfGetDicData(\"SEASON\");\r\n        }\r\n     " +
"   console.log(dataSEASON);\r\n        var text = $(obj).attr(\"text\");\r\n        $." +
"each(dataSEASON, function (index, item) {\r\n            if (item.text == text) {\r" +
"\n                if (item.value) {\r\n                    var year = new Date().ge" +
"tFullYear();\r\n                    var strValueArr = item.value.split(\',\');\r\n    " +
"                var startTime = year + \'-\' + addZero(strValueArr[0]) + \'-01\';\r\n " +
"                   var endTime = year + \'-\' + addZero(strValueArr[strValueArr.le" +
"ngth - 1]) + \'-\' + getLastDay(strValueArr[strValueArr.length - 1]);\r\n           " +
"         $(\"#STARTYEAR\").val(startTime);\r\n                    $(\"#ENDYEAR\").val(" +
"endTime);\r\n                }\r\n            }\r\n        });\r\n    };\r\n    function G" +
"etLastTime() {\r\n        $.ajax({\r\n            type: \"get\",\r\n            async:fa" +
"lse,\r\n            url: \"../../DMCJManage/Drawing/GetLastTime\",\r\n            succ" +
"ess: function (data) {\r\n                var lastTime = data.substring(0, 4);\r\n  " +
"              $(\"#ENDYEAR\").val(lastTime);\r\n                $(\"#STARTYEAR\").val(" +
"lastTime - 1);\r\n            }\r\n        });\r\n    }\r\n    //获取最后一天\r\n    function ge" +
"tLastDay(month) {\r\n        var new_date = new Date(new Date().getFullYear(), mon" +
"th, 1);\r\n        var last_date = (new Date(new_date.getTime() - 1000 * 60 * 60 *" +
" 24)).getDate();\r\n        return last_date;\r\n    }\r\n    //初始化页面\r\n    function In" +
"itialPage() {\r\n        //layout布局\r\n        $(\'#layout\').layout({\r\n            we" +
"st__size: 280,\r\n            applyDemoStyles: true,\r\n            onresize: functi" +
"on () {\r\n                if (isResize < 10) {\r\n                    isResize++;\r\n" +
"                }\r\n                resize();\r\n            }\r\n        });\r\n      " +
"  var isResize = 0;\r\n        var count = 0;\r\n        var resized = 0;\r\n        /" +
"/resize重设布局;\r\n        $(window).resize(function (e) {\r\n            if (isResize " +
"< 10) {\r\n                isResize++;\r\n            }\r\n            e.stopPropagati" +
"on();\r\n        });\r\n        function resize() {\r\n            window.setTimeout(f" +
"unction () {\r\n                //if (mapCtlExt != null) {\r\n                //    " +
"mapCtlExt.setHeight($(\'#mapControl\').parent().height());\r\n                //}\r\n " +
"               // mapCtlExt.setHeight($(\'#mapControl\').parent().height());\r\n    " +
"            $(\'.center-Panel\').height($(\'#layout\').parent().height() - 20);\r\n   " +
"             // $(\'#gridTable\').setGridHeight($(window).height() - $(\'#mapContro" +
"l\').height() - $(\'.panel-Title\').height());\r\n                $(\'#itemTree\').setT" +
"reeHeight($(window).height() - 64);\r\n                $(\'#ui_map\').css(\'overflow\'" +
", \'hidden\');\r\n\r\n            }, 200);\r\n        };\r\n        $(window).resize();\r\n " +
"   }\r\n\r\n    //加载地图\r\n    function GetConfig(keyvalue) {\r\n        var url = \"\";\r\n " +
"       $.ajax({\r\n            url: \"/Utility/GetAppSetting\",\r\n            async: " +
"false, //同步请求\r\n            data: { key: keyvalue },\r\n            type: \"GET\",\r\n " +
"           success: function (data) {\r\n                url = data;\r\n            " +
"}\r\n        });\r\n        return url;\r\n    }\r\n    var mapCtlExt = null;\r\n    var s" +
"creenheights = window.screen.height;\r\n    var heights = document.body.clientHeig" +
"ht - 10;\r\n    function GetMapData() {\r\n        mapCtlExt = $(\"#mapControl\").mapC" +
"tl(\r\n            cfGetMapData({})\n        );\r\n    };\r\n\r\n    //查询表格函数\r\n    functi" +
"on SearchEvent() {\r\n        var queryJson = $(\"#filter-form\").getWebControls();\r" +
"\n        $.ajax({\r\n            url: \"../../DMCJManage/Drawing/GetDMCJContourLine" +
"Query\",\r\n            data: { queryJson: JSON.stringify(queryJson) },\r\n          " +
"  beforeSend: function () {\r\n                learun.loading({ isShow: true, text" +
": \"正在制图，请稍等...\" });\r\n                $(\"#btn_Search\").attr(\"disabled\", true);\r\n " +
"           },\r\n            complete: function () {\r\n                learun.loadi" +
"ng({ isShow: false });\r\n            },\r\n            success: function (data) {\r\n" +
"                try {\r\n\r\n                    data = JSON.parse(data);\r\n         " +
"           mapCtlExt.loadGeoJsonFile(\'../../\' + data.Data);\r\n                   " +
" filePath = data.fileName;\r\n                    var returnValue = [];\r\n         " +
"           for (var i = 0; i < data.GDZBList.length; i++) {\r\n                   " +
"     if (data.GDZBList[i]) {\r\n                            returnValue.push({ coo" +
"rdinates: data.GDZBList[i] });\r\n                        }\r\n                    }" +
"\r\n                    cfShowGDZBAreaArr2(returnValue, mapCtlExt);\r\n             " +
"       if (filePath) {\r\n                    } else {\r\n                        di" +
"alogMsg(\'没有数据！\', 0);\r\n                    }\r\n                } catch (e) {\r\n    " +
"                dialogMsg(\'制图失败！\', 0);\r\n                }\r\n                $(\"#b" +
"tn_Search\").attr(\"disabled\", false);\r\n            },\r\n            error: functio" +
"n () {\r\n                $(\"#btn_Search\").attr(\"disabled\", false);\r\n             " +
"   dialogMsg(\'制图失败！\', 0);\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    //初始化控件\r\n " +
"   function initControl() {\r\n        var html = \" <table><tr style=\\\"\\\"><td clas" +
"s=\\\"formTitle\\\" style=\\\"\\\">省</td><td style=\\\"\\\"> <div id=\\\"PROVINCE\\\" multiples=" +
"\\\"true\\\" type=\\\"select\\\" class=\\\"ui-select\\\" style=\\\"float: left; width: 160px; " +
"margin-right: 1px;\\\"></div></td></tr>\" +\r\n           \"<tr><td class=\\\"formTitle\\" +
"\">市</td><td><div id=\\\"CITY\\\" multiples=\\\"true\\\" type=\\\"select\\\" class=\\\"ui-selec" +
"t\\\" style=\\\"float: left; width: 160px; margin-right: 1px;\\\"></div></td></tr>\" +\r" +
"\n        \"<tr><td class=\\\"formTitle\\\">区</td><td><div id=\\\"COUNTY\\\" multiples=\\\"t" +
"rue\\\" type=\\\"select\\\" class=\\\"ui-select\\\" style=\\\"float: left; width: 160px; mar" +
"gin-right: 1px;\\\"></div> </td></tr></table>\";\r\n\r\n        var district = $(\"#XZQH" +
"CODE\").mulDistrictsCtl({\r\n            provinceId: userCode,\r\n            selectP" +
"roviceId: \"\",\r\n            selectCityId: \"\",\r\n            selectCounty: \"\",\r\n   " +
"         html: html\r\n        });\r\n\r\n        cfInitComboBox(\"JCDJB\", \"../../Syste" +
"mManage/DataItemDetail/GetDataItemTreeJson?EnCode=JCDJB\");//监测点级别\r\n        cfIni" +
"tComboBox(\"POINTTYPE\", \"../../SystemManage/DataItemDetail/GetDataItemTreeJson?En" +
"Code=POINTTYPE\");//监测点类型\r\n        cfInitComboBox(\"MEASURETYPE\", \"../../SystemMan" +
"age/DataItemDetail/GetDataItemTreeJson?EnCode=MONITORMODE\");//监测手段\r\n        cfIn" +
"itComboBox(\"ISCHECK\", \"../../SystemManage/DataItemDetail/GetDataItemTreeJson?EnC" +
"ode=yesorno\");//考核点\r\n        cfInitComboBox(\"SFTCD\", \"../../SystemManage/DataIte" +
"mDetail/GetDataItemTreeJson?EnCode=yesorno\");//统测点\r\n        //cfInitComboBox(\"SS" +
"SWDZDY\", \"../../SystemManage/DataItemDetail/GetDataItemTreeJson?EnCode=SSSWDZDY\"" +
");//水文地质单元\r\n        //区域\r\n        $(\"#QY\").ComboBox({\r\n            data: [\r\n    " +
"            { F_ItemValue: \"1\", F_ItemName: \"鲁北\" },\r\n                { F_ItemVal" +
"ue: \"2\", F_ItemName: \"鲁西\" },\r\n            ],\r\n            id: \"F_ItemValue\",\r\n  " +
"          text: \"F_ItemName\",\r\n            height: \"300px\",\r\n            width: " +
"\"160px\"\r\n        }).bind(\"change\", function () {\r\n\r\n        });\r\n\r\n        timeC" +
"lick($(\"#STARTYEAR\"));\r\n    }\r\n    function downFile() {\r\n        //location.hre" +
"f = filePath;\r\n        location.href = \"../../DMCJManage/Drawing/ExcelDownload?F" +
"ileName=\" + filePath;\r\n    }\r\n    function GetString(num) {\r\n        if (num.toS" +
"tring().length == 1) {\r\n            return \"0\" + num.toString();\r\n        }\r\n   " +
"     return num.toString();\r\n    }\r\n    //获取当前用户\n    function GetCurrentUserCode" +
"() {\r\n        $.ajax({\r\n            url: SSOURL + \'api/AdministrativeApi/GetCurr" +
"entUserCode\',\n            beforeSend: function (a) {\r\n                a.setReque" +
"stHeader(\"Authorization\", authToken);\r\n            },\n            type: \'GET\',\n " +
"           async: false,\n            dataType: \"json\",\n            success: func" +
"tion (data) {\r\n                if (data.length == 1) {//县级用户\r\n                  " +
"  if (data.join(\",\").indexOf(\"000000\") > 0) {\r\n                        selectPro" +
"viceId = data[0].substring(0, 2) + \"0000\";;\r\n                        selectCityI" +
"d = data[0].substring(0, 4) + \"00\";\n                        selectCounty = data[" +
"0].substring(0, 6);\r\n                        userCode = selectCounty;\r\n         " +
"           }\r\n                } else if (data.join(\",\").indexOf(\"0000\") > 0) {//" +
"是省级用户\r\n                    for (var i = 0; i < data.length; i++) {\r\n            " +
"            if (data[i].substring(2, 6) == \"0000\" && data[i].length < 9) {\r\n    " +
"                        selectProviceId = data[i];\r\n                            " +
"userCode = selectProviceId;\r\n                        }\r\n                    }\r\n " +
"               } else if (data.join(\",\").indexOf(\"00\") > 0) {//是市级用户\r\n          " +
"          for (var i = 0; i < data.length; i++) {\r\n                        if (d" +
"ata[i].substring(4, 6) == \"00\" && data[i].length < 9) {\r\n                       " +
"     selectProviceId = data[i].substring(0, 2) + \"0000\";\r\n                      " +
"      selectCityId = data[i];\r\n                            userCode = selectCity" +
"Id;\r\n                        }\r\n                    }\r\n                }\r\n      " +
"      }, error: function (e) {\r\n            },\n            cache: false\r\n       " +
" });\r\n    }\r\n</script>\r\n");

});

        }
    }
}
#pragma warning restore 1591

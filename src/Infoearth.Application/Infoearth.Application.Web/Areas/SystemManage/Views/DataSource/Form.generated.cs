#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Areas/SystemManage/Views/DataSource/Form.cshtml")]
    public partial class _Areas_SystemManage_Views_DataSource_Form_cshtml : System.Web.Mvc.WebViewPage<dynamic>
    {
        public _Areas_SystemManage_Views_DataSource_Form_cshtml()
        {
        }
        public override void Execute()
        {
            
            #line 1 "..\..\Areas\SystemManage\Views\DataSource\Form.cshtml"
  
    ViewBag.Title = "添加数据源";
    Layout = "~/Views/Shared/_Form.cshtml";

            
            #line default
            #line hidden
WriteLiteral("\r\n<!--表格组件end-->\r\n<script>\r\n    var keyValue = request(\'keyValue\');\r\n    $(functi" +
"on () {\r\n        initControl();\r\n        //加载导向\r\n        $(\'#wizard\').wizard().o" +
"n(\'change\', function (e, data) {\r\n            var $finish = $(\"#btn_finish\");\r\n " +
"           var $next = $(\"#btn_next\");\r\n            if (data.direction == \"next\"" +
") {\r\n                switch (data.step) {\r\n                    case 1:\r\n        " +
"                if (!$(\'#baseInfo\').Validform()) {\r\n                            " +
"return false;\r\n                        }\r\n                        break;\r\n      " +
"              case 2:\r\n                        if (!$(\'#sqlStrInfo\').Validform()" +
") {\r\n                            return false;\r\n                        }\r\n     " +
"                   \r\n                        var _sqlStrInfo = $(\'#sqlStrInfo\')." +
"GetWebControls();\r\n                        var _parametersHtml = \"\";\r\n          " +
"              var _parametersHasFlag = {};\r\n                        var _regPara" +
"meters = new RegExp(\"&.*\\\\b\", \"g\");\r\n                        var _regResult = nu" +
"ll;\r\n                        do {\r\n                            _regResult = _reg" +
"Parameters.exec(_sqlStrInfo.F_Strsql);\r\n                            if (_regResu" +
"lt != null && _parametersHasFlag[_regResult[0]] == undefined)\r\n                 " +
"           {\r\n                                _parametersHasFlag[_regResult[0]] " +
"= 1;\r\n                                _parametersHtml += \'<tr><td class=\"formTit" +
"le\">\'+_regResult[0]+\'</td></tr>\';\r\n                                _parametersHt" +
"ml += \'<tr><td class=\"formValue\"><input id=\"\' + _regResult[0].replace(\'&\', \'\') +" +
" \'\" type=\"text\" class=\"form-control\" isvalid=\"yes\" checkexpession=\"NotNull\" /></" +
"td></tr>\';\r\n                            }\r\n                            \r\n       " +
"                 }\r\n                        while (_regResult != null)\r\n        " +
"                if (_parametersHtml != \"\") {\r\n                            $(\'#pa" +
"rametersDiv\').show();\r\n                            $(\'#parametersDiv\').width(160" +
");\r\n                            $(\'#showDataDiv\').width(450);\r\n                 " +
"           var _html = \'<div style=\"color:#9f9f9f;padding-bottom:10px;\"><i style" +
"=\"padding-right:5px;\" class=\"fa fa-info-circle\"></i><span>填写参数</span></div>\';\r\n " +
"                           $(\'#parametersDiv\').html(_html+\'<table>\' + _parameter" +
"sHtml + \"</table>\");\r\n                        }\r\n                        else {\r" +
"\n                            $(\'#parametersDiv\').hide();\r\n                      " +
"      \r\n                        }\r\n                        break;\r\n             " +
"       case 3:\r\n                        $finish.removeAttr(\'disabled\');\r\n       " +
"                 $next.attr(\'disabled\', \'disabled\');\r\n                        br" +
"eak;\r\n                    default:\r\n                        break;\r\n            " +
"    }\r\n            } else {\r\n                $finish.attr(\'disabled\', \'disabled\'" +
");\r\n                $next.removeAttr(\'disabled\');\r\n            }\r\n        });\r\n " +
"       //完成，保存事件\r\n        $(\"#btn_finish\").click(function () {\r\n            var " +
"_baseInfo = $(\'#baseInfo\').GetWebControls();\r\n            var _sqlStrInfo = $(\'#" +
"sqlStrInfo\').GetWebControls();\r\n            _baseInfo.F_Strsql = _sqlStrInfo.F_S" +
"trsql;\r\n            $.SaveForm({\r\n                url: \"../../SystemManage/DataS" +
"ource/SaveForm?keyValue=\" + keyValue,\r\n                param: _baseInfo,\r\n      " +
"          loading: \"正在保存数据...\",\r\n                success: function () {\r\n       " +
"             try {\r\n                        getInfoTop().learun.currentIframe()." +
"$(\"#gridTable\").trigger(\"reloadGrid\");\r\n                    } catch (e) {\r\n     " +
"                   window.parent.$(\"#gridTable\").trigger(\"reloadGrid\");\r\n       " +
"             }\r\n                }\r\n            })\r\n        });\r\n    });\r\n    //初" +
"始化控件\r\n    function initControl() {\r\n        $(\"#F_DbId\").ComboBoxTree({\r\n       " +
"     description: \"==请选择==\",\r\n            height: \"160px\",\r\n            url: \".." +
"/../SystemManage/DataBaseLink/GetTreeJson\",\r\n            allowSearch: true\r\n    " +
"    }).bind(\"change\", function (item) {\r\n            var text = $(this).attr(\'da" +
"ta-text\');\r\n            $(\'#F_DbName\').val(text);\r\n        });\r\n        //获取表单\r\n" +
"        if (!!keyValue) {\r\n            $.SetForm({\r\n                url: \"../../" +
"SystemManage/DataSource/GetFormJson\",\r\n                param: { keyValue: keyVal" +
"ue },\r\n                success: function (data) {\r\n                    $(\"#baseI" +
"nfo\").SetWebControls(data);\r\n                    $(\'#F_Strsql\').val(data.F_Strsq" +
"l);\r\n                }\r\n            });\r\n        }\r\n\r\n        $(\'#btn_search\').o" +
"n(\'click\', function () {\r\n\r\n            if (!$(\'#parametersDiv\').Validform()) {\r" +
"\n                return false;\r\n            }\r\n\r\n            var _baseInfo = $(\'" +
"#baseInfo\').GetWebControls();\r\n            var _sqlStrInfo = $(\'#sqlStrInfo\').Ge" +
"tWebControls();\r\n            var _queryJson = $(\'#parametersDiv\').GetWebControls" +
"();\r\n            _baseInfo.F_Strsql = _sqlStrInfo.F_Strsql;\r\n            var pos" +
"tData = {\r\n                \"strEntity\": JSON.stringify(_baseInfo),\r\n            " +
"    \"queryJson\": JSON.stringify(_queryJson)\r\n            };\r\n            $.getDa" +
"taForm({\r\n                url: \"../../SystemManage/DataSource/TestData\",\r\n      " +
"          param: postData,\r\n                type:\"post\",\r\n                succes" +
"s: function (data) {\r\n                    var strJson = JSON.stringify(data, nul" +
"l, \"\\t\");\r\n                    $(\'#showData\').val(strJson);\r\n                }\r\n" +
"            });\r\n        });\r\n    }\r\n</script>\r\n<div");

WriteLiteral(" class=\"widget-body\"");

WriteLiteral(" id=\"tempbody\"");

WriteLiteral(">\r\n    <div");

WriteLiteral(" id=\"wizard\"");

WriteLiteral(" class=\"wizard\"");

WriteLiteral(" data-target=\"#wizard-steps\"");

WriteLiteral(" style=\"border-left: none; border-top: none; border-right: none;\"");

WriteLiteral(">\r\n        <ul");

WriteLiteral(" class=\"steps\"");

WriteLiteral(">\r\n            <li");

WriteLiteral(" data-target=\"#step-1\"");

WriteLiteral(" class=\"active\"");

WriteLiteral("><span");

WriteLiteral(" class=\"step\"");

WriteLiteral(">1</span>基础设置<span");

WriteLiteral(" class=\"chevron\"");

WriteLiteral("></span></li>\r\n            <li");

WriteLiteral(" data-target=\"#step-2\"");

WriteLiteral("><span");

WriteLiteral(" class=\"step\"");

WriteLiteral(">2</span>源数据设置<span");

WriteLiteral(" class=\"chevron\"");

WriteLiteral("></span></li>\r\n            <li");

WriteLiteral(" data-target=\"#step-3\"");

WriteLiteral("><span");

WriteLiteral(" class=\"step\"");

WriteLiteral(">3</span>源数据测试<span");

WriteLiteral(" class=\"chevron\"");

WriteLiteral("></span></li>\r\n            <li");

WriteLiteral(" data-target=\"#step-4\"");

WriteLiteral("><span");

WriteLiteral(" class=\"step\"");

WriteLiteral(">4</span>创建完成<span");

WriteLiteral(" class=\"chevron\"");

WriteLiteral("></span></li>\r\n        </ul>\r\n    </div>\r\n    <div");

WriteLiteral(" class=\"step-content\"");

WriteLiteral(" id=\"wizard-steps\"");

WriteLiteral(" style=\"border-left: none; border-bottom: none; border-right: none;\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" class=\"step-pane active\"");

WriteLiteral(" id=\"step-1\"");

WriteLiteral(" style=\"margin-left: 0px; margin-top: 15px; margin-right: 30px;\"");

WriteLiteral(">\r\n            <table");

WriteLiteral(" id=\"baseInfo\"");

WriteLiteral(" class=\"form\"");

WriteLiteral(">\r\n                <tr>\r\n                    <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">数据编号<font");

WriteLiteral(" face=\"宋体\"");

WriteLiteral(">*</font></th>\r\n                    <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                        <input");

WriteLiteral(" id=\"F_Code\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"NotNull\"");

WriteLiteral(" />\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n    " +
"                <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">数据名称<font");

WriteLiteral(" face=\"宋体\"");

WriteLiteral(">*</font></th>\r\n                    <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                        <input");

WriteLiteral(" id=\"F_Name\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"NotNull\"");

WriteLiteral(" />\r\n                    </td>\r\n                </tr>\r\n                <tr >\r\n   " +
"                 <td");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">数据库名<font");

WriteLiteral(" face=\"宋体\"");

WriteLiteral(">*</font></td>\r\n                    <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                        <div");

WriteLiteral(" id=\"F_DbId\"");

WriteLiteral(" type=\"selectTree\"");

WriteLiteral(" class=\"ui-select\"");

WriteLiteral("></div>\r\n                        <input");

WriteLiteral(" id=\"F_DbName\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" style=\"display:none;\"");

WriteLiteral("/>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n     " +
"               <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(" valign=\"top\"");

WriteLiteral(" style=\"padding-top: 4px;\"");

WriteLiteral(">备注信息</th>\r\n                    <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                        <textarea");

WriteLiteral(" id=\"F_Description\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" style=\"height: 170px;\"");

WriteLiteral("></textarea>\r\n                    </td>\r\n                </tr>\r\n            </tab" +
"le>\r\n        </div>\r\n        <div");

WriteLiteral(" class=\"step-pane\"");

WriteLiteral(" id=\"step-2\"");

WriteLiteral(" style=\"margin: 15px 15px  0px 15px;\"");

WriteLiteral(">\r\n            <div");

WriteLiteral(" class=\"alert alert-danger\"");

WriteLiteral(" style=\"text-align: left; margin: 5px;\"");

WriteLiteral(">\r\n                注：请填写SQL语句,参数请前缀&。例子：SELECT * FROM TABLE WHERE a = &a;\r\n      " +
"      </div>\r\n            <table");

WriteLiteral(" id=\"sqlStrInfo\"");

WriteLiteral(" class=\"form\"");

WriteLiteral(">\r\n                <tr>\r\n                    <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                        <textarea");

WriteLiteral(" id=\"F_Strsql\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" style=\"height: 230px;\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"NotNull\"");

WriteLiteral("></textarea>\r\n                    </td>\r\n                </tr>\r\n            </tab" +
"le>\r\n        </div>\r\n        <div");

WriteLiteral(" class=\"step-pane\"");

WriteLiteral(" id=\"step-3\"");

WriteLiteral(" style=\"margin: 0px 15px  0px 15px;\"");

WriteLiteral(">\r\n            <div");

WriteLiteral(" id=\"parametersDiv\"");

WriteLiteral(" style=\"float:left;border-right: #ccc 1px solid;height: 324px;overflow-y:auto;pad" +
"ding-top:15px;\"");

WriteLiteral(">\r\n               \r\n            </div>\r\n            <div");

WriteLiteral(" id=\"showDataDiv\"");

WriteLiteral(" style=\"float:right;margin-top:15px;\"");

WriteLiteral(">\r\n                <table");

WriteLiteral(" id=\"tempGraphform\"");

WriteLiteral(" class=\"form\"");

WriteLiteral(">\r\n                    <tr>\r\n                        <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                            <a");

WriteLiteral(" id=\"btn_search\"");

WriteLiteral(" class=\"btn btn-danger\"");

WriteLiteral(">查询</a>\r\n                        </td>\r\n                    </tr>\r\n              " +
"      <tr>\r\n                        <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                            <textarea");

WriteLiteral(" id=\"showData\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" style=\"height: 250px;\"");

WriteLiteral("></textarea>\r\n                        </td>\r\n                    </tr>\r\n         " +
"       </table>\r\n            </div>\r\n        </div>\r\n        <div");

WriteLiteral(" class=\"step-pane\"");

WriteLiteral(" id=\"step-4\"");

WriteLiteral(" style=\"margin-top: 15px; margin-right: 30px;\"");

WriteLiteral(">\r\n            <div");

WriteLiteral(" style=\"height: 400px;\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" class=\"drag-tip\"");

WriteLiteral(" style=\"text-align: center; padding-top: 50px;\"");

WriteLiteral(">\r\n                    <i");

WriteLiteral(" class=\"fa fa-check-circle\"");

WriteLiteral(" style=\"font-size: 204px; color: #0FA74F;\"");

WriteLiteral("></i>\r\n                    <div");

WriteLiteral(" id=\"finish-msg\"");

WriteLiteral(" style=\"font-weight: bold; font-size: 24px; color: #0FA74F; margin-top: 20px;\"");

WriteLiteral(">\r\n                    </div>\r\n                    <p");

WriteLiteral(" style=\"color: #666; font-size: 12px; margin-top: 10px;\"");

WriteLiteral(">\r\n                        创建完成,请点击保存\r\n                    </p>\r\n                " +
"</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div");

WriteLiteral(" class=\"form-button\"");

WriteLiteral(" id=\"wizard-actions\"");

WriteLiteral(">\r\n    <a");

WriteLiteral(" id=\"btn_last\"");

WriteLiteral(" disabled");

WriteLiteral(" class=\"btn btn-default btn-prev\"");

WriteLiteral(">上一步</a>\r\n    <a");

WriteLiteral(" id=\"btn_next\"");

WriteLiteral(" class=\"btn btn-default btn-next\"");

WriteLiteral(">下一步</a>\r\n    <a");

WriteLiteral(" id=\"btn_finish\"");

WriteLiteral(" disabled");

WriteLiteral(" class=\"btn btn-success\"");

WriteLiteral(">完成</a>\r\n</div>\r\n<style>\r\n    body {\r\n        overflow: hidden;\r\n    }\r\n</style>");

        }
    }
}
#pragma warning restore 1591

#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Areas/AuthorizeManage/Views/Module/Form.cshtml")]
    public partial class _Areas_AuthorizeManage_Views_Module_Form_cshtml : System.Web.Mvc.WebViewPage<dynamic>
    {
        public _Areas_AuthorizeManage_Views_Module_Form_cshtml()
        {
        }
        public override void Execute()
        {
            
            #line 1 "..\..\Areas\AuthorizeManage\Views\Module\Form.cshtml"
  
    ViewBag.Title = "Form";
    Layout = "~/Views/Shared/_Form.cshtml";

            
            #line default
            #line hidden
WriteLiteral("\r\n<!--jqgrid表格组件start-->\r\n<link");

WriteAttribute("href", Tuple.Create(" href=\"", 110), Tuple.Create("\"", 160)
, Tuple.Create(Tuple.Create("", 117), Tuple.Create<System.Object, System.Int32>(Href("~/Content/scripts/plugins/jqgrid/jqgrid.css")
, 117), false)
);

WriteLiteral(" rel=\"stylesheet\"");

WriteLiteral(" />\r\n<!--表格组件end-->\r\n<div");

WriteLiteral(" class=\"widget-body\"");

WriteLiteral(">\r\n    <div");

WriteLiteral(" id=\"wizard\"");

WriteLiteral(" class=\"wizard\"");

WriteLiteral(" data-target=\"#wizard-steps\"");

WriteLiteral(" style=\"border-left: none; border-top: none; border-right: none;\"");

WriteLiteral(">\r\n        <ul");

WriteLiteral(" class=\"steps\"");

WriteLiteral(">\r\n            <li");

WriteLiteral(" data-target=\"#step-1\"");

WriteLiteral(" class=\"active\"");

WriteLiteral("><span");

WriteLiteral(" class=\"step\"");

WriteLiteral(">1</span>系统功能<span");

WriteLiteral(" class=\"chevron\"");

WriteLiteral("></span></li>\r\n            <li");

WriteLiteral(" data-target=\"#step-2\"");

WriteLiteral("><span");

WriteLiteral(" class=\"step\"");

WriteLiteral(">2</span>系统按钮<span");

WriteLiteral(" class=\"chevron\"");

WriteLiteral("></span></li>\r\n            <li");

WriteLiteral(" data-target=\"#step-3\"");

WriteLiteral("><span");

WriteLiteral(" class=\"step\"");

WriteLiteral(">3</span>系统视图<span");

WriteLiteral(" class=\"chevron\"");

WriteLiteral("></span></li>\r\n        </ul>\r\n    </div>\r\n    <div");

WriteLiteral(" class=\"step-content\"");

WriteLiteral(" id=\"wizard-steps\"");

WriteLiteral(" style=\"border-left: none; border-bottom: none; border-right: none;\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" class=\"step-pane active\"");

WriteLiteral(" id=\"step-1\"");

WriteLiteral(" style=\"margin-left: 0px; margin-top: 15px; margin-right: 30px;\"");

WriteLiteral(">\r\n            <input");

WriteLiteral(" id=\"F_ModuleId\"");

WriteLiteral(" type=\"hidden\"");

WriteAttribute("value", Tuple.Create(" value=\"", 1024), Tuple.Create("\"", 1049)
            
            #line 18 "..\..\Areas\AuthorizeManage\Views\Module\Form.cshtml"
, Tuple.Create(Tuple.Create("", 1032), Tuple.Create<System.Object, System.Int32>(ViewBag.ModuleId
            
            #line default
            #line hidden
, 1032), false)
);

WriteLiteral(" />\r\n            <table");

WriteLiteral(" class=\"form\"");

WriteLiteral(">\r\n                <tr>\r\n                    <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">编号<font");

WriteLiteral(" face=\"宋体\"");

WriteLiteral(">*</font></th>\r\n                    <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                        <input");

WriteLiteral(" id=\"F_EnCode\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" placeholder=\"请输入编号\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"NotNull\"");

WriteLiteral(" />\r\n                    </td>\r\n                    <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">名称<font");

WriteLiteral(" face=\"宋体\"");

WriteLiteral(">*</font></th>\r\n                    <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                        <input");

WriteLiteral(" id=\"F_FullName\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" placeholder=\"请输入名称\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"NotNull\"");

WriteLiteral(" />\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n    " +
"                <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">上级</th>\r\n                    <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                        <div");

WriteLiteral(" id=\"F_ParentId\"");

WriteLiteral(" type=\"selectTree\"");

WriteLiteral(" class=\"ui-select\"");

WriteLiteral(">\r\n                        </div>\r\n                    </td>\r\n                   " +
" <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">图标</th>\r\n                    <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                        <input");

WriteLiteral(" id=\"F_Icon\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" />\r\n                        <span");

WriteLiteral(" class=\"input-button\"");

WriteLiteral(" onclick=\"SelectIcon()\"");

WriteLiteral(" title=\"选取图标\"");

WriteLiteral(">...</span>\r\n                    </td>\r\n                </tr>\r\n                <t" +
"r>\r\n                    <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">目标<font");

WriteLiteral(" face=\"宋体\"");

WriteLiteral(">*</font></th>\r\n                    <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                        <div");

WriteLiteral(" id=\"F_Target\"");

WriteLiteral(" type=\"select\"");

WriteLiteral(" class=\"ui-select\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"NotNull\"");

WriteLiteral(">\r\n                            <ul>\r\n                                <li");

WriteLiteral(" data-value=\"expand\"");

WriteLiteral(">expand</li>\r\n                                <li");

WriteLiteral(" data-value=\"iframe\"");

WriteLiteral(">iframe</li>\r\n                                <li");

WriteLiteral(" data-value=\"open\"");

WriteLiteral(">open</li>\r\n                                <li");

WriteLiteral(" data-value=\"href\"");

WriteLiteral(">href</li>\r\n                                <li");

WriteLiteral(" data-value=\"blank\"");

WriteLiteral(">blank</li>\r\n                            </ul>\r\n                        </div>\r\n " +
"                   </td>\r\n                    <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">排序<font");

WriteLiteral(" face=\"宋体\"");

WriteLiteral(">*</font></th>\r\n                    <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                        <input");

WriteLiteral(" id=\"F_SortCode\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"Num\"");

WriteLiteral(" />\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n    " +
"                <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">地址</th>\r\n                    <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(" colspan=\"3\"");

WriteLiteral(">\r\n                        <input");

WriteLiteral(" id=\"F_UrlAddress\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" />\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n    " +
"                <td");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">菜单位置:</td>\r\n                    <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(" colspan=\'3\'");

WriteLiteral(">\r\n                        <div");

WriteLiteral(" id=\"F_ModuleLoc\"");

WriteLiteral(" type=\"select\"");

WriteLiteral(" class=\"ui-select\"");

WriteLiteral("></div>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n" +
"                    <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(" style=\"height: 37px;\"");

WriteLiteral(">选项</th>\r\n                    <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                        <div");

WriteLiteral(" class=\"checkbox user-select\"");

WriteLiteral(">\r\n                            <label>\r\n                                <input");

WriteLiteral(" id=\"F_IsMenu\"");

WriteLiteral(" type=\"checkbox\"");

WriteLiteral(" />\r\n                                菜单\r\n                            </label>\r\n  " +
"                          <label>\r\n                                <input");

WriteLiteral(" id=\"F_IsPublic\"");

WriteLiteral(" type=\"checkbox\"");

WriteLiteral(" />\r\n                                公共\r\n                            </label>\r\n  " +
"                          <label>\r\n                                <input");

WriteLiteral(" id=\"F_AllowExpand\"");

WriteLiteral(" type=\"checkbox\"");

WriteLiteral(" />\r\n                                展开\r\n                            </label>\r\n  " +
"                          <label>\r\n                                <input");

WriteLiteral(" id=\"F_EnabledMark\"");

WriteLiteral(" type=\"checkbox\"");

WriteLiteral(" checked=\"checked\"");

WriteLiteral(" />\r\n                                有效\r\n                            </label>\r\n  " +
"                      </div>\r\n                    </td>\r\n                </tr>\r\n" +
"                <tr>\r\n                    <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(" valign=\"top\"");

WriteLiteral(" style=\"padding-top: 4px;\"");

WriteLiteral(">描述\r\n                    </th>\r\n                    <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(" colspan=\"3\"");

WriteLiteral(">\r\n                        <textarea");

WriteLiteral(" id=\"F_Description\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" style=\"height: 70px;\"");

WriteLiteral("></textarea>\r\n                    </td>\r\n                </tr>\r\n            </tab" +
"le>\r\n        </div>\r\n        <div");

WriteLiteral(" class=\"step-pane\"");

WriteLiteral(" id=\"step-2\"");

WriteLiteral(" style=\"margin: 5px;\"");

WriteLiteral(">\r\n            <div");

WriteLiteral(" style=\"height: 40px; line-height: 33px; text-align: right;\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" class=\"btn-group\"");

WriteLiteral(">\r\n                    <a");

WriteLiteral(" id=\"lr-add-button\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-plus\"");

WriteLiteral("></i>&nbsp;新增</a>\r\n                    <a");

WriteLiteral(" id=\"lr-edit-button\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-pencil-square-o\"");

WriteLiteral("></i>&nbsp;编辑</a>\r\n                    <a");

WriteLiteral(" id=\"lr-delete-button\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-trash-o\"");

WriteLiteral("></i>&nbsp;删除</a>\r\n                </div>\r\n                <div");

WriteLiteral(" class=\"btn-group\"");

WriteLiteral(">\r\n                    <a");

WriteLiteral(" id=\"lr-copy-button\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-copy\"");

WriteLiteral("></i>&nbsp;复制</a>\r\n                </div>\r\n            </div>\r\n            <table" +
"");

WriteLiteral(" id=\"gridTable-button\"");

WriteLiteral("></table>\r\n        </div>\r\n        <div");

WriteLiteral(" class=\"step-pane\"");

WriteLiteral(" id=\"step-3\"");

WriteLiteral(" style=\"margin: 5px;\"");

WriteLiteral(">\r\n            <div");

WriteLiteral(" style=\"height: 40px; line-height: 33px; text-align: right;\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" class=\"btn-group\"");

WriteLiteral(">\r\n                    <a");

WriteLiteral(" id=\"lr-add-view\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-plus\"");

WriteLiteral("></i>&nbsp;新增</a>\r\n                    <a");

WriteLiteral(" id=\"lr-edit-view\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-pencil-square-o\"");

WriteLiteral("></i>&nbsp;编辑</a>\r\n                    <a");

WriteLiteral(" id=\"lr-delete-view\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-trash-o\"");

WriteLiteral("></i>&nbsp;删除</a>\r\n                </div>\r\n                <div");

WriteLiteral(" class=\"btn-group\"");

WriteLiteral(">\r\n                    <a");

WriteLiteral(" id=\"lr-batch-addview\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-sign-in\"");

WriteLiteral("></i>&nbsp;批量添加</a>\r\n                </div>\r\n            </div>\r\n            <tab" +
"le");

WriteLiteral(" id=\"gridTable-view\"");

WriteLiteral("></table>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div");

WriteLiteral(" class=\"form-button\"");

WriteLiteral(" id=\"wizard-actions\"");

WriteLiteral(">\r\n    <a");

WriteLiteral(" id=\"btn_last\"");

WriteLiteral(" disabled");

WriteLiteral(" class=\"btn btn-default btn-prev\"");

WriteLiteral(">上一步</a>\r\n    <a");

WriteLiteral(" id=\"btn_next\"");

WriteLiteral(" disabled");

WriteLiteral(" class=\"btn btn-default btn-next\"");

WriteLiteral(">下一步</a>\r\n    <a");

WriteLiteral(" id=\"btn_finish\"");

WriteLiteral(" class=\"btn btn-success\"");

WriteLiteral(">完成</a>\r\n</div>\r\n\r\n");

DefineSection("Scripts", () => {

WriteLiteral("\r\n");

            
            #line 139 "..\..\Areas\AuthorizeManage\Views\Module\Form.cshtml"
Write(System.Web.Optimization.Scripts.Render("~/Content/scripts/plugins/jqgrid/js"));

            
            #line default
            #line hidden
WriteLiteral("\r\n<script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(">\r\n    var keyValue = learun.request(\'keyValue\');\r\n    var parentId = learun.requ" +
"est(\'parentId\');\r\n    $(function () {\r\n        initialPage();\r\n        buttonOpe" +
"ration();\r\n        getGridButton();\r\n        getGridView();\r\n    })\r\n    //初始化页面" +
"\r\n    function initialPage() {\r\n        //加载导向\r\n        $(\'#wizard\').wizard().on" +
"(\'change\', function (e, data) {\r\n            var $finish = $(\"#btn_finish\");\r\n  " +
"          var $next = $(\"#btn_next\");\r\n            if (data.direction == \"next\")" +
" {\r\n                if (data.step == 2) {\r\n                    $finish.removeAtt" +
"r(\'disabled\');\r\n                    $next.attr(\'disabled\', \'disabled\');\r\n       " +
"         } else {\r\n                    $finish.attr(\'disabled\', \'disabled\');\r\n  " +
"              }\r\n            } else {\r\n                $finish.attr(\'disabled\', " +
"\'disabled\');\r\n                $next.removeAttr(\'disabled\');\r\n            }\r\n    " +
"    });\r\n        initControl();\r\n    }\r\n    //初始化控件\r\n    function initControl() " +
"{\r\n        //目标\r\n        $(\"#F_Target\").comboBox({\r\n            description: \"==" +
"请选择==\",\r\n            maxHeight: \"200px\"\r\n        });\r\n        //上级\r\n        $(\"#" +
"F_ParentId\").comboBoxTree({\r\n            url: \"../../AuthorizeManage/Module/GetT" +
"reeJson\",\r\n            description: \"==请选择==\",\r\n            maxHeight: \"195px\",\r" +
"\n            allowSearch: true\r\n        });\r\n\r\n        //菜单位置\r\n        var $modu" +
"leLoc = $(\"#F_ModuleLoc\");\r\n        $moduleLoc.comboBox({\r\n            url: \"../" +
"../SystemManage/DataItemDetail/GetDataItemListJson\",\r\n            param: { EnCod" +
"e: \"ModuleLoc\" },\r\n            id: \"F_ItemValue\",\r\n            text: \"F_ItemName" +
"\",\r\n            maxHeight: \"200px\",\r\n            description: \"==请选择==\"\r\n       " +
" });\r\n        //获取表单\r\n        if (!!keyValue) {\r\n            learun.setForm({\r\n " +
"               url: \"../../AuthorizeManage/Module/GetFormJson\",\r\n               " +
" param: { keyValue: keyValue },\r\n                success: function (data) {\r\n   " +
"                 $(\"#form1\").setWebControls(data);\r\n                    if (data" +
".F_IsMenu == 1) {\r\n                        $(\"#btn_next\").removeAttr(\'disabled\')" +
";\r\n                        $(\"#btn_finish\").attr(\'disabled\', \'disabled\');\r\n     " +
"               }\r\n                }\r\n            });\r\n        } else {\r\n        " +
"    $(\"#F_ParentId\").comboBoxTreeSetValue(parentId);\r\n        }\r\n    }\r\n    //选取" +
"图标\r\n    function SelectIcon() {\r\n        learun.dialogOpen({\r\n            id: \"S" +
"electIcon\",\r\n            title: \'选取图标\',\r\n            url: \'/AuthorizeManage/Modu" +
"le/Icon?ControlId=F_Icon\',\r\n            width: \"1000px\",\r\n            height: \"6" +
"00px\",\r\n            btn: false\r\n        })\r\n    }\r\n    //保存表单\r\n    function Acce" +
"ptClick() {\r\n        if (!$(\'#form1\').Validform()) {\r\n            return false;\r" +
"\n        }\r\n        var postData = $(\"#form1\").getWebControls(keyValue);\r\n      " +
"  if (postData[\"F_ParentId\"] == \"\") {\r\n            postData[\"F_ParentId\"] = 0;\r\n" +
"        }\r\n        postData[\"moduleButtonListJson\"] = JSON.stringify(buttonJson)" +
";\r\n        postData[\"moduleColumnListJson\"] = JSON.stringify(columnJson);\r\n     " +
"   learun.saveForm({\r\n            url: \"../../AuthorizeManage/Module/SaveForm?ke" +
"yValue=\" + keyValue,\r\n            param: postData,\r\n            loading: \"正在保存数据" +
"...\",\r\n            success: function () {\r\n                try {\r\n              " +
"      getInfoTop().learun.currentIframe().$(\"#gridTable\").trigger(\"reloadGrid\");" +
"\r\n                } catch (e) {\r\n                    window.parent.$(\"#gridTable" +
"\").trigger(\"reloadGrid\");\r\n                }\r\n            }\r\n        })\r\n    }\r\n" +
"\r\n    //按钮操作（上一步、下一步、完成、关闭）\r\n    function buttonOperation() {\r\n        var $last" +
" = $(\"#btn_last\");\r\n        var $next = $(\"#btn_next\");\r\n        var $finish = $" +
"(\"#btn_finish\");\r\n        //如果是菜单，开启 上一步、下一步\r\n        $(\"#F_IsMenu\").click(funct" +
"ion () {\r\n            if (!$(this).attr(\"checked\")) {\r\n                $(this).a" +
"ttr(\"checked\", true)\r\n                $next.removeAttr(\'disabled\');\r\n           " +
"     $finish.attr(\'disabled\', \'disabled\');\r\n            } else {\r\n              " +
"  $(this).attr(\"checked\", false)\r\n                $next.attr(\'disabled\', \'disabl" +
"ed\');\r\n                $finish.removeAttr(\'disabled\');\r\n            }\r\n        }" +
");\r\n        //完成提交保存\r\n        $finish.click(function () {\r\n            AcceptCli" +
"ck();\r\n        })\r\n    }\r\n    /*系统按钮being==================================*/\r\n " +
"   var buttonJson = \"\";\r\n    function getGridButton() {\r\n        var moduleId = " +
"$(\"#F_ModuleId\").val();\r\n        $.ajax({\r\n            url: \"../../AuthorizeMana" +
"ge/ModuleButton/GetListJson?moduleId=\" + escape(moduleId),\r\n            type: \"g" +
"et\",\r\n            dataType: \"json\",\r\n            success: function (data) {\r\n   " +
"             buttonJson = data;\r\n                console.log(buttonJson)\r\n      " +
"      },\r\n        });\r\n        var $grid = $(\"#gridTable-button\");\r\n        $gri" +
"d.jqGrid({\r\n            unwritten: false,\r\n            url: \"../../AuthorizeMana" +
"ge/ModuleButton/GetTreeListJson?moduleId=\" + escape(moduleId),\r\n            data" +
"type: \"json\",\r\n            height: $(window).height() - 165,\r\n            width:" +
" $(window).width() - 11,\r\n            colModel: [\r\n                { label: \"主键\"" +
", name: \"F_ModuleButtonId\", hidden: true },\r\n                { label: \"名称\", name" +
": \"F_FullName\", width: 140, align: \"left\", sortable: false },\r\n                {" +
" label: \"编号\", name: \"F_EnCode\", width: 140, align: \"left\", sortable: false },\r\n " +
"               { label: \"地址\", name: \"F_ActionAddress\", width: 500, align: \"left\"" +
", sortable: false },\r\n            ],\r\n            treeGrid: true,\r\n            t" +
"reeGridModel: \"nested\",\r\n            ExpandColumn: \"F_EnCode\",\r\n            rowN" +
"um: \"all\",\r\n            rownumbers: true\r\n        });\r\n        //处理Json\r\n       " +
" function ButtonListToListTreeJson(buttonJson) {\r\n            $.ajax({\r\n        " +
"        url: \"../../AuthorizeManage/ModuleButton/ListToListTreeJson\",\r\n         " +
"       data: { moduleButtonJson: JSON.stringify(buttonJson) },\r\n                " +
"type: \"post\",\r\n                dataType: \"json\",\r\n                success: funct" +
"ion (data) {\r\n                    $grid.clearGridData();\r\n                    $g" +
"rid[0].addJSONData(data);\r\n                },\r\n            });\r\n        }\r\n     " +
"   //新增\r\n        $(\"#lr-add-button\").click(function () {\r\n            var parent" +
"Id = $(\"#gridTable-button\").jqGridRowValue(\"F_ModuleButtonId\");\r\n            lea" +
"run.dialogOpen({\r\n                id: \"buttonForm11111\",\r\n                title:" +
" \'添加按钮\',\r\n                url: \'/AuthorizeManage/ModuleButton/Form?parentId=\' + " +
"parentId + \"&moduleId=\" + escape(moduleId),\r\n                width: \"450px\",\r\n  " +
"              height: \"300px\",\r\n                callBack: function (iframeId) {\r" +
"\n                    var topInfo = getInfoTop();\r\n                    var frame " +
"= topInfo.frames[iframeId];\r\n                    frame.AcceptClick(function (dat" +
"a) {\r\n                        buttonJson.push(data);\r\n                        Bu" +
"ttonListToListTreeJson(buttonJson);\r\n                    });\r\n                }\r" +
"\n            });\r\n        })\r\n        //编辑\r\n        $(\"#lr-edit-button\").click(f" +
"unction () {\r\n            var moduleButtonId = $(\"#gridTable-button\").jqGridRowV" +
"alue(\"F_ModuleButtonId\");\r\n            if (learun.checkedRow(moduleButtonId)) {\r" +
"\n                learun.dialogOpen({\r\n                    id: \"buttonForm\",\r\n   " +
"                 title: \'编辑按钮\',\r\n                    url: \'/AuthorizeManage/Modu" +
"leButton/Form?moduleButtonId=\' + moduleButtonId + \"&moduleId=\" + escape(moduleId" +
"),\r\n                    width: \"450px\",\r\n                    height: \"300px\",\r\n " +
"                   callBack: function (iframeId) {\r\n                        getI" +
"nfoTop().frames[iframeId].AcceptClick(function (data) {\r\n                       " +
"     $.each(buttonJson, function (i) {\r\n                                if (butt" +
"onJson[i].F_ModuleButtonId == moduleButtonId) {\r\n                               " +
"     buttonJson[i] = data;\r\n                                }\r\n                 " +
"           });\r\n                            ButtonListToListTreeJson(buttonJson)" +
";\r\n                        });\r\n                    }\r\n                });\r\n    " +
"        }\r\n        })\r\n        //删除\r\n        $(\"#lr-delete-button\").click(functi" +
"on () {\r\n            var moduleButtonId = $(\"#gridTable-button\").jqGridRowValue(" +
"\"F_ModuleButtonId\");\r\n            if (learun.checkedRow(moduleButtonId)) {\r\n    " +
"            $.each(buttonJson, function (i) {\r\n                    if (buttonJso" +
"n[i].F_ModuleButtonId == moduleButtonId) {\r\n                        buttonJson.s" +
"plice(i, 1);\r\n                        ButtonListToListTreeJson(buttonJson);\r\n   " +
"                     return false;\r\n                    }\r\n                });\r\n" +
"            }\r\n        });\r\n        //复制\r\n        $(\"#lr-copy-button\").click(fun" +
"ction () {\r\n            var moduleButtonId = $(\"#gridTable-button\").jqGridRowVal" +
"ue(\"F_ModuleButtonId\");\r\n            if (learun.checkedRow(moduleButtonId)) {\r\n " +
"               learun.dialogOpen({\r\n                    id: \"OptionModule\",\r\n   " +
"                 title: \'将按钮复制到指定功能里面\',\r\n                    url: \'/AuthorizeMan" +
"age/ModuleButton/OptionModule?keyValue=\' + moduleButtonId,\r\n                    " +
"width: \"500px\",\r\n                    height: \"500px\",\r\n                    callB" +
"ack: function (iframeId) {\r\n                        getInfoTop().frames[iframeId" +
"].AcceptClick();\r\n                    }\r\n                });\r\n            }\r\n   " +
"     });\r\n    }\r\n    /*系统按钮end====================================*/\r\n\r\n    /*系统" +
"视图being==================================*/\r\n    var columnJson = \"\";\r\n    funct" +
"ion getGridView() {\r\n        var moduleId = $(\"#F_ModuleId\").val();\r\n        $.a" +
"jax({\r\n            url: \"../../AuthorizeManage/ModuleColumn/GetListJson?moduleId" +
"=\" + escape(moduleId),\r\n            type: \"get\",\r\n            dataType: \"json\",\r" +
"\n            success: function (data) {\r\n                columnJson = data;\r\n   " +
"         },\r\n        });\r\n        var $grid = $(\"#gridTable-view\");\r\n        $gr" +
"id.jqGrid({\r\n            unwritten: false,\r\n            url: \"../../AuthorizeMan" +
"age/ModuleColumn/GetTreeListJson?moduleId=\" + escape(moduleId),\r\n            dat" +
"atype: \"json\",\r\n            height: $(window).height() - 165,\r\n            width" +
": $(window).width() - 11,\r\n            colModel: [\r\n                { label: \"主键" +
"\", name: \"F_ModuleColumnId\", index: \"F_ModuleColumnId\", hidden: true },\r\n       " +
"         { label: \"名称\", name: \"F_FullName\", index: \"F_FullName\", width: 140, ali" +
"gn: \"left\", sortable: false, },\r\n                { label: \"编号\", name: \"F_EnCode\"" +
", index: \"F_EnCode\", width: 140, align: \"left\", sortable: false },\r\n            " +
"    { label: \"描述\", name: \"F_Description\", index: \"F_Description\", width: 500, al" +
"ign: \"left\", sortable: false }\r\n            ],\r\n            rowNum: 1000,\r\n     " +
"       rownumbers: true\r\n        });\r\n        //处理Json\r\n        function ViewLis" +
"tToListTreeJson(columnJson) {\r\n            $.ajax({\r\n                url: \"../.." +
"/AuthorizeManage/ModuleColumn/ListToListTreeJson\",\r\n                data: { modu" +
"leColumnJson: JSON.stringify(columnJson) },\r\n                type: \"post\",\r\n    " +
"            dataType: \"json\",\r\n                success: function (data) {\r\n     " +
"               $grid.clearGridData();\r\n                    $grid[0].addJSONData(" +
"data);\r\n                },\r\n            });\r\n        }\r\n        //新增\r\n        $(" +
"\"#lr-add-view\").click(function () {\r\n            learun.dialogOpen({\r\n          " +
"      id: \"viewForm\",\r\n                title: \'添加视图\',\r\n                url: \'/Au" +
"thorizeManage/ModuleColumn/Form?moduleId=\' + escape(moduleId),\r\n                " +
"width: \"450px\",\r\n                height: \"260px\",\r\n                callBack: fun" +
"ction (iframeId) {\r\n                    getInfoTop().frames[iframeId].AcceptClic" +
"k(function (data) {\r\n                        columnJson.push(data);\r\n           " +
"             ViewListToListTreeJson(columnJson);\r\n                    });\r\n     " +
"           }\r\n            });\r\n        })\r\n        //编辑\r\n        $(\"#lr-edit-vie" +
"w\").click(function () {\r\n            var moduleColumnId = $(\"#gridTable-view\").j" +
"qGridRowValue(\"F_ModuleColumnId\");\r\n            if (learun.checkedRow(moduleColu" +
"mnId)) {\r\n                learun.dialogOpen({\r\n                    id: \"viewForm" +
"\",\r\n                    title: \'编辑视图\',\r\n                    url: \'/AuthorizeMana" +
"ge/ModuleColumn/Form?moduleColumnId=\' + moduleColumnId + \"&moduleId=\" + escape(m" +
"oduleId),\r\n                    width: \"450px\",\r\n                    height: \"260" +
"px\",\r\n                    callBack: function (iframeId) {\r\n                     " +
"   getInfoTop().frames[iframeId].AcceptClick(function (data) {\r\n                " +
"            $.each(columnJson, function (i) {\r\n                                i" +
"f (columnJson[i].F_ModuleColumnId == moduleColumnId) {\r\n                        " +
"            columnJson[i] = data;\r\n                                }\r\n          " +
"                  });\r\n                            ViewListToListTreeJson(column" +
"Json);\r\n                        });\r\n                    }\r\n                });\r" +
"\n            }\r\n        })\r\n        //删除\r\n        $(\"#lr-delete-view\").click(fun" +
"ction () {\r\n            var moduleColumnId = $(\"#gridTable-view\").jqGridRowValue" +
"(\"F_ModuleColumnId\");\r\n            if (learun.checkedRow(moduleColumnId)) {\r\n   " +
"             $.each(columnJson, function (i) {\r\n                    if (columnJs" +
"on[i].F_ModuleColumnId == moduleColumnId) {\r\n                        columnJson." +
"splice(i, 1);\r\n                        ViewListToListTreeJson(columnJson);\r\n    " +
"                    return false;\r\n                    }\r\n                });\r\n " +
"           }\r\n        });\r\n        //批量添加\r\n        $(\"#lr-batch-addview\").click(" +
"function () {\r\n            learun.dialogOpen({\r\n                id: \"viewForm\",\r" +
"\n                title: \'批量添加视图\',\r\n                url: \'/AuthorizeManage/Module" +
"Column/BatchAdd?moduleId=\' + escape(moduleId),\r\n                width: \"450px\",\r" +
"\n                height: \"300px\",\r\n                callBack: function (iframeId)" +
" {\r\n                    getInfoTop().frames[iframeId].AcceptClick(function (data" +
") {\r\n                        columnJson = data;\r\n                        ViewLis" +
"tToListTreeJson(data);\r\n                    });\r\n                }\r\n            " +
"});\r\n        })\r\n    }\r\n    /*系统视图end====================================*/\r\n</s" +
"cript>\r\n");

});

        }
    }
}
#pragma warning restore 1591

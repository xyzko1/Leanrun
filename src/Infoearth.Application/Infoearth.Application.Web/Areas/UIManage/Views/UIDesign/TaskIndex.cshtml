@{
    ViewBag.Title = "任务调度接口配置";
    Layout = "~/Views/Shared/_Index.cshtml";
}

<style type="text/css">
    .orm_title {
        color: #666666;
        font-size: 16px;
        height: 36px;
        line-height: 36px;
        margin-left: 15px;
        font-weight: bold;
        padding-top: 5px;
    }

    .orm_title_note {
        color: #999999;
        height: 24px;
        line-height: 24px;
        margin: 0 15px;
        border-bottom: 1px solid #ededed;
    }

    .action_title1 {
        color: #666666;
        font-size: 14px;
        height: 40px;
        line-height: 40px;
        padding-left: 25px;
    }

    .button_style a {
        display: inline-block;
        height: 40px;
        line-height: 40px;
        padding: 0 25px;
        color: #fff;
    }

    .button_style {
        border-bottom: 1px solid #ededed;
        margin: 0 25px;
    }

    .orm_table {
        width: 100%;
    }

        .orm_table tr th {
            color: #5b5b60;
            height: 30px;
            line-height: 30px;
            font-size: 14px;
        }

        .orm_table tr td {
            vertical-align: top;
            text-align: center;
        }

    .orm_item {
        border: 1px solid #eeeeee;
        margin: 10px;
        text-align: center;
        padding: 20px;
    }

    .orm_item_title {
        background: #007aff;
        padding: 10px 20px;
        border-radius: 8px;
        display: inline-block;
        font-style: italic;
        color: #fff;
        font-size: 24px;
        font-weight: bold;
    }

    .orm_item_title_note {
        font-size: 18px;
        height: 48px;
        line-height: 48px;
    }

    .orm_item_title_note1 {
        color: #333;
        line-height: 32px;
    }

    .orm_action1 {
        margin: 10px;
    }

    .orm_action {
        width: 100%;
    }

        .orm_action tr td {
            border: 1px solid #eeeeee;
            width: 100%;
        }

    .orm_action_title {
        height: 36px;
        line-height: 36px;
        font-weight: bold;
        padding-left: 15px;
        font-size: 14px;
        color: #5b5b60;
    }
</style>


<script type="text/javascript">


    //$(function () {
    //    InitialPage();




    //});
    //初始化页面
    //function InitialPage() {

    //    $(window).resize(function (e) {
    //        window.setTimeout(function () {
    //            $('#abc').height($(window).height() - 20);
    //        }, 200);
    //        e.stopPropagation();
    //    });
    //}



</script>





<div style=" margin:10px;" id="abc">
    <div style="background:#fff; ">
        <div class="orm_title">任务调度接口及MQ配置说明</div>


        <div style="border-bottom:2px solid #ee8339; margin-top:15px;"></div>


    </div>


    <div class="row" style="background: #fff; margin-bottom: 10px; ">
        <div class="orm_action1">


            <table class="orm_action">


                <tr>
                    <td class="orm_action_title">
                        一、MQ配置相关说明
                    </td>

                </tr>
                <tr>
                    <td>
                        <div style="padding:15px;">
                            <p class="orm_item_title_note1" style="font-weight:bold;">
                                Web.config中配置相关的MQ信息，如下图所示：




                            </p>



                            <p class="orm_item_title_note1">

                                <img src="~/Content/adminDefault/img/task0.png" /> <!--业务系统名称-->
                            </p>

                            <p class="orm_item_title_note1" style="color:green;">     注意：上面的虚拟主机一定要事先创建，在使用接口之前</p>

</div>
                    </td>
                    <td></td>
                </tr>

            </table>


        </div>






    </div>



    <div class="row" style="background: #fff; margin-bottom: 10px;">
        <div class="orm_action1">


            <table class="orm_action">


                <tr>
                    <td class="orm_action_title">
                        二、任务调度大体流程
                    </td>

                </tr>
                <tr>
                    <td>
                        <div style="padding:15px;">
                            <p class="orm_item_title_note1" style="font-weight:bold;">1)	关联模型与队列的相关信息，调用SaveModelQueueInfo方法关联   </p>
                            <p class="orm_item_title_note1" style="font-weight:bold;">
                                2)	新建任务时，要相应的添加此任务的调度信息，调用SaveTaskInfo方法添加，此时该方法会向相应的消息队列中发送消息，供后台读取
                            </p>
                            <p class="orm_item_title_note1" style="font-weight:bold;">
                                3)	后台读取消息，处理消息，在处理过程中可以随时更新任务状态，调用ChangeTaskStatus方法
                            </p>
                            <p class="orm_item_title_note1" style="font-weight:bold;">
                                4)	任务处理完成后，调用UpdataTaskTimeInfo方法更新任务结束时间和总耗时信息，也要更新任务状态(同3)
                            </p>
                            <p class="orm_item_title_note1" style="font-weight:bold;">
                                5)	任务处理的过程中，可以随时获取任务的状态，调用GetTaskInfoByTaskIds方法
                            </p>


                     




                        </div>
                    </td>

                </tr>

            </table>


        </div>






    </div>



    <div class="row" style="background: #fff; margin-bottom: 10px;">
        <div class="orm_action1">


            <table class="orm_action">


                <tr>
                    <td class="orm_action_title">
                        三、任务调度接口说明
                    </td>

                </tr>
                <tr>
                    <td>
                        <div style="padding:15px;">
                            <p class="orm_item_title_note1" style="font-weight:bold;">1)	模型与队列关联的接口</p>

                            <p class="orm_item_title_note1">
                                <img src="~/Content/adminDefault/img/task1.png" />
                            </p>
                            <p class="orm_item_title_note1">
                                ModelQueueDTO信息：
                            </p>
                            <p class="orm_item_title_note1">
                                <img src="~/Content/adminDefault/img/task2.png" />
                            </p>
                            <p class="orm_item_title_note1" style="font-weight:bold;">
                                2)	任务调度信息的相关接口
                            </p>
                            <p class="orm_item_title_note1">
                                <img src="~/Content/adminDefault/img/task3.png" />
                            </p>
                            <p class="orm_item_title_note1">
                                <img src="~/Content/adminDefault/img/task4.png" />
                            </p>
                            <p class="orm_item_title_note1">
                                TaskDTO信息：
                            </p>
                            <p class="orm_item_title_note1">
                                <img src="~/Content/adminDefault/img/task5.png" />
                            </p>
                            <p class="orm_item_title_note1">
                                <img src="~/Content/adminDefault/img/task6.png" />
                            </p>
                            <p class="orm_item_title_note1">
                                TaskUpdateInfoDTO信息：
                            </p>
                            <p class="orm_item_title_note1">
                                <img src="~/Content/adminDefault/img/task7.png" />
                            </p>
                            <p class="orm_item_title_note1" style="color:green;">    注意：以上接口的相关WebApi信息可参照基础信息平台服务注册中的任务调度模块的Api信息，服务注册中有详细的Api说明。</p>
</div>
                    </td>

                </tr>

            </table>


        </div>






    </div>


    <div class="row" style="background: #fff; margin-bottom: 10px;">
        <div class="orm_action1">


            <table class="orm_action">


                <tr>
                    <td class="orm_action_title">
                        四、简单示例
                    </td>

                </tr>
                <tr>
                    <td>
                        <div style="padding:15px;">
                            <p class="orm_item_title_note1"><img src="~/Content/adminDefault/img/task8.png" /></p>

                         
                        </div>
                    </td>

                </tr>

            </table>


        </div>






    </div>

    

</div>



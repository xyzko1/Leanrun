#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Areas/CustomerManage/Views/Order/Form.cshtml")]
    public partial class _Areas_CustomerManage_Views_Order_Form_cshtml : System.Web.Mvc.WebViewPage<dynamic>
    {
        public _Areas_CustomerManage_Views_Order_Form_cshtml()
        {
        }
        public override void Execute()
        {
            
            #line 1 "..\..\Areas\CustomerManage\Views\Order\Form.cshtml"
  
    ViewBag.Title = "订单表单";
    Layout = "~/Views/Shared/_OrderForm.cshtml";

            
            #line default
            #line hidden
WriteLiteral("\r\n<link");

WriteAttribute("href", Tuple.Create(" href=\"", 91), Tuple.Create("\"", 147)
, Tuple.Create(Tuple.Create("", 98), Tuple.Create<System.Object, System.Int32>(Href("~/Content/scripts/plugins/uploadify/uploadify.css")
, 98), false)
);

WriteLiteral(" rel=\"stylesheet\"");

WriteLiteral(" />\r\n<link");

WriteAttribute("href", Tuple.Create(" href=\"", 175), Tuple.Create("\"", 241)
, Tuple.Create(Tuple.Create("", 182), Tuple.Create<System.Object, System.Int32>(Href("~/Content/scripts/plugins/uploadify/uploadify.extension.css")
, 182), false)
);

WriteLiteral(" rel=\"stylesheet\"");

WriteLiteral(" />\r\n<script");

WriteAttribute("src", Tuple.Create(" src=\"", 271), Tuple.Create("\"", 336)
, Tuple.Create(Tuple.Create("", 277), Tuple.Create<System.Object, System.Int32>(Href("~/Content/scripts/plugins/uploadify/jquery.uploadify.min.js")
, 277), false)
);

WriteLiteral("></script>\r\n\r\n<link");

WriteAttribute("href", Tuple.Create(" href=\"", 356), Tuple.Create("\"", 416)
, Tuple.Create(Tuple.Create("", 363), Tuple.Create<System.Object, System.Int32>(Href("~/Content/scripts/plugins/webuploader/webuploader.css")
, 363), false)
);

WriteLiteral(" rel=\"stylesheet\"");

WriteLiteral(" />\r\n<script");

WriteAttribute("src", Tuple.Create(" src=\"", 446), Tuple.Create("\"", 510)
, Tuple.Create(Tuple.Create("", 452), Tuple.Create<System.Object, System.Int32>(Href("~/Content/scripts/plugins/webuploader/webuploader.nolog.js")
, 452), false)
);

WriteLiteral("></script>\r\n<style>\r\n    .uploadify-queue {height: auto;max-height: 295px;}\r\n    " +
".uploadify-queue-item:last-child {border-bottom: solid 0px;}\r\n    .uploadify-que" +
"ue-item .cancel a {margin-top: 4px;margin-right: 5px;background: none;text-inden" +
"t: initial;}\r\n    .uploadify-queue-item .cancel a > i {color: #808080; font-size" +
": 21px;}\r\n</style>\r\n<script>\r\n    var keyValue = request(\'keyValue\');\r\n    var f" +
"olderId = \"\";\r\n    $(function () {\r\n        InitialPage();\r\n        GetOrderEntr" +
"yGrid();\r\n        InitControl();\r\n    });\r\n    //初始化页面\r\n    function InitialPage" +
"() {\r\n        $(\".bills\").height($(window).height() - 88);\r\n        //resize重设(表" +
"格、树形)宽高\r\n        $(window).resize(function (e) {\r\n            window.setTimeout(" +
"function () {\r\n                $(\'#gridTable\').setGridWidth(($(\'.gridPanel\').wid" +
"th()));\r\n                $(\".bills\").height($(window).height() - 88);\r\n         " +
"   }, 200);\r\n            e.stopPropagation();\r\n        });\r\n    }\r\n    //初始化控件\r\n" +
"    function InitControl() {\r\n        //客户名称\r\n        $(\"#F_CustomerId\").ComboBo" +
"x({\r\n            url: \"../../CustomerManage/Customer/GetListJson\",\r\n            " +
"id: \"F_CustomerId\",\r\n            text: \"F_FullName\",\r\n            description: \"" +
"==请选择==\",\r\n            height: \"360px\",\r\n            width: \"280px\",\r\n          " +
"  allowSearch: true\r\n        });\r\n        //销售人员\r\n        $(\"#F_SellerId\").Combo" +
"BoxTree({\r\n            url: \"../../BaseManage/User/GetTreeJson\",\r\n            de" +
"scription: \"==请选择==\",\r\n            height: \"360px\",\r\n            width: \"280px\"," +
"\r\n            allowSearch: true\r\n        });\r\n        //收款方式\r\n        $(\"#F_Paym" +
"entMode\").ComboBox({\r\n            url: \"../../SystemManage/DataItemDetail/GetDat" +
"aItemListJson\",\r\n            param: { EnCode: \"Client_PaymentMode\" },\r\n         " +
"   id: \"F_ItemValue\",\r\n            text: \"F_ItemName\",\r\n            description:" +
" \"==请选择==\",\r\n            height: \"200px\"\r\n        });\r\n\r\n        //初始化文件上传按钮\r\n  " +
"      $(\'#btnUpFile\').uploadifyEx({\r\n            url: \"/Utility/UploadifyFile?fo" +
"lderId=\" + keyValue + \"&DataItemEncode=SaveFilePath&DataItemName=DemoFilePath\",\r" +
"\n            onUploadSuccess: function (data) {\r\n                folderId = data" +
".folderId;\r\n            }\r\n        });\r\n\r\n        //获取表单\r\n        if (!!keyValue" +
") {\r\n            $(\"#savaAndAdd\").remove();\r\n            $.SetForm({\r\n          " +
"      url: \"../../CustomerManage/Order/GetFormJson\",\r\n                param: { k" +
"eyValue: keyValue },\r\n                success: function (data) {\r\n              " +
"      //主表\r\n                    var order = data.order;\r\n                    $(\"" +
"#form1\").SetWebControls(order);\r\n                    $(\"#F_DiscountSum\").val(toD" +
"ecimal(order.F_DiscountSum));\r\n                    $(\"#F_Accounts\").val(toDecima" +
"l(order.F_Accounts));\r\n                    $(\"#F_SaleCost\").val(toDecimal(order." +
"F_SaleCost));\r\n                    //明细\r\n                    var orderEntry = da" +
"ta.orderEntry;\r\n                    $(\"#gridTable\").find(\'[role=row]\').each(func" +
"tion (i) {\r\n                        var row = orderEntry[i - 1];\r\n              " +
"          if (row != undefined) {\r\n                            $(this).find(\'inp" +
"ut[name=\"F_OrderEntryId\"]\').val(row.F_OrderEntryId);\r\n                          " +
"  $(this).find(\'input[name=\"F_ProductName\"]\').val(row.F_ProductName);\r\n         " +
"                   $(this).find(\'input[name=\"F_ProductCode\"]\').val(row.F_Product" +
"Code);\r\n                            $(this).find(\'input[name=\"F_ProductId\"]\').va" +
"l(row.F_ProductId);\r\n                            $(this).find(\'input[name=\"F_Uni" +
"tId\"]\').val(row.F_UnitId);\r\n                            $(this).find(\'input[name" +
"=\"F_Qty\"]\').val(toDecimal(row.F_Qty));\r\n                            $(this).find" +
"(\'input[name=\"F_Price\"]\').val(toDecimal(row.F_Price));\r\n                        " +
"    $(this).find(\'input[name=\"F_Amount\"]\').val(toDecimal(row.F_Amount));\r\n      " +
"                      $(this).find(\'input[name=\"F_TaxRate\"]\').val(row.F_TaxRate)" +
";\r\n                            $(this).find(\'input[name=\"F_Taxprice\"]\').val(toDe" +
"cimal(row.F_Taxprice));\r\n                            $(this).find(\'input[name=\"F" +
"_Tax\"]\').val(toDecimal(row.F_Tax));\r\n                            $(this).find(\'i" +
"nput[name=\"F_TaxAmount\"]\').val(toDecimal(row.F_TaxAmount));\r\n                   " +
"         $(this).find(\'input[name=\"F_Description\"]\').val(row.F_Description);\r\n  " +
"                          $(this).find(\'input\').removeAttr(\'disabled\').attr(\"isv" +
"alid\", \"yes\");\r\n                            $(this).next().find(\'input\').removeA" +
"ttr(\'disabled\');\r\n                        }\r\n                    });\r\n          " +
"          //合计\r\n                    var TotalQty = 0.00, TotalPrice = 0.00, Tota" +
"lAmount = 0.00, TotalTaxprice = 0.00, TotalTax = 0.00, TotalTaxAmount = 0.00;\r\n " +
"                   $(\"#gridTable\").find(\"tbody tr\").each(function (i) {\r\n       " +
"                 var Qty = $(this).find(\'td:eq(5)\').find(\'input\').val();\r\n      " +
"                  if (Qty != \"\" && Qty != undefined) {\r\n                        " +
"    TotalQty += Number(Qty);\r\n                        }\r\n                       " +
" var Price = $(this).find(\'td:eq(6)\').find(\'input\').val();\r\n                    " +
"    if (Price != \"\" && Price != undefined) {\r\n                            TotalP" +
"rice += Number(Price);\r\n                        }\r\n                        var A" +
"mount = $(this).find(\'td:eq(7)\').find(\'input\').val();\r\n                        i" +
"f (Amount != \"\" && Amount != undefined) {\r\n                            TotalAmou" +
"nt += Number(Amount);\r\n                        }\r\n                        var Ta" +
"xprice = $(this).find(\'td:eq(9)\').find(\'input\').val();\r\n                        " +
"if (Taxprice != \"\" && Taxprice != undefined) {\r\n                            Tota" +
"lTaxprice += Number(Taxprice);\r\n                        }\r\n                     " +
"   var Tax = $(this).find(\'td:eq(10)\').find(\'input\').val();\r\n                   " +
"     if (Tax != \"\" && Tax != undefined) {\r\n                            TotalTax " +
"+= Number(Tax);\r\n                        }\r\n                        var TaxAmoun" +
"t = $(this).find(\'td:eq(11)\').find(\'input\').val();\r\n                        if (" +
"TaxAmount != \"\" && TaxAmount != undefined) {\r\n                            TotalT" +
"axAmount += Number(TaxAmount);\r\n                        }\r\n                    }" +
");\r\n                    $(\"#F_TotalQty\").text(toDecimal(TotalQty));\r\n           " +
"         $(\"#F_TotalPrice\").text(toDecimal(TotalPrice));\r\n                    $(" +
"\"#F_TotalAmount\").text(toDecimal(TotalAmount));\r\n                    $(\"#F_Total" +
"Taxprice\").text(toDecimal(TotalTaxprice));\r\n                    $(\"#F_TotalTax\")" +
".text(toDecimal(TotalTax));\r\n                    $(\"#F_TotalTaxAmount\").text(toD" +
"ecimal(TotalTaxAmount));\r\n                }\r\n            });\r\n        }\r\n    }\r\n" +
"    //加载明细\r\n    function GetOrderEntryGrid() {\r\n        var $grid = $(\"#gridTabl" +
"e\");\r\n        $grid.jqGrid({\r\n            unwritten: false,\r\n            datatyp" +
"e: \"local\",\r\n            height: \'100%\',\r\n            autowidth: true,\r\n        " +
"    colModel: [\r\n                { label: \'主键\', name: \'F_OrderEntryId\', hidden: " +
"true },\r\n                { label: \'商品名称<span class=\"label label label-default\" s" +
"tyle=\"margin-left:5px;\">扫描枪录入</span><span  data-wfname=\"商品名称\" data-id=\"F_Product" +
"Name\" data-girdid=\"gridTable\" type=\"gridcol\"></span>\', name: \"F_ProductName\", wi" +
"dth: 260, align: \'left\', sortable: false, resizable: false },\r\n                {" +
" label: \'商品编号<span  data-wfname=\"商品编号\" data-girdid=\"gridTable\" data-id=\"F_Produc" +
"tCode\" type=\"gridcol\"></span>\', name: \"F_ProductCode\", width: 100, align: \'cente" +
"r\', sortable: false, resizable: false },\r\n                { label: \'单位<span  dat" +
"a-wfname=\"单位\" data-girdid=\"gridTable\" data-id=\"F_UnitId\" type=\"gridcol\"></span>\'" +
", name: \"F_UnitId\", width: 100, align: \'center\', sortable: false, resizable: fal" +
"se },\r\n                { label: \'数量<span  data-wfname=\"数量\" data-girdid=\"gridTabl" +
"e\" data-id=\"F_Qty\" type=\"gridcol\"></span>\', name: \'F_Qty\', width: 80, align: \'ce" +
"nter\', sortable: false, resizable: false },\r\n                { label: \'单价<span  " +
"data-wfname=\"单价\" data-girdid=\"gridTable\" data-id=\"F_Price\" type=\"gridcol\"></span" +
">\', name: \'F_Price\', width: 80, align: \'center\', sortable: false, resizable: fal" +
"se },\r\n                { label: \'金额<span  data-wfname=\"金额\" data-girdid=\"gridTabl" +
"e\" data-id=\"F_Amount\" type=\"gridcol\"></span>\', name: \'F_Amount\', width: 80, alig" +
"n: \'center\', sortable: false, resizable: false },\r\n                { label: \'税率(" +
"%)<span  data-wfname=\"税率\" data-girdid=\"gridTable\" data-id=\"F_TaxRate\" type=\"grid" +
"col\"></span>\', name: \'F_TaxRate\', width: 80, align: \'center\', sortable: false, r" +
"esizable: false },\r\n                { label: \'含税单价<span  data-wfname=\"含税单价\" data" +
"-girdid=\"gridTable\" data-id=\"F_Taxprice\" type=\"gridcol\"></span>\', name: \'F_Taxpr" +
"ice\', width: 80, align: \'center\', sortable: false, resizable: false },\r\n        " +
"        { label: \'税额<span  data-wfname=\"税额\" data-girdid=\"gridTable\" data-id=\"F_T" +
"ax\" type=\"gridcol\"></span>\', name: \'F_Tax\', width: 80, align: \'center\', sortable" +
": false, resizable: false },\r\n                { label: \'含税金额<span  data-wfname=\"" +
"含税金额\" data-girdid=\"gridTable\" data-id=\"F_TaxAmount\" type=\"gridcol\"></span>\', nam" +
"e: \'F_TaxAmount\', width: 80, align: \'center\', sortable: false, resizable: false " +
"},\r\n                { label: \'说明信息<span  data-wfname=\"说明信息\" data-girdid=\"gridTab" +
"le\" data-id=\"F_Description\" type=\"gridcol\"></span>\', name: \'F_Description\', widt" +
"h: 200, align: \'left\', sortable: false, resizable: false }\r\n            ],\r\n    " +
"        pager: false,\r\n            rownumbers: true,\r\n            shrinkToFit: f" +
"alse,\r\n            gridview: true,\r\n            footerrow: true,\r\n            gr" +
"idComplete: function () {\r\n                //合计\r\n                $(this).footerD" +
"ata(\"set\", {\r\n                    \"F_UnitId\": \"合计：\",\r\n                    \"F_Qty" +
"\": \"<span id=\'F_TotalQty\' data-wfname=\'数量合计\' type=\'label\' >0.00</span>\",\r\n      " +
"              \"F_Price\": \"<span id=\'F_TotalPrice\' data-wfname=\'单价合计\' type=\'label" +
"\' >0.00</span>\",\r\n                    \"F_Amount\": \"<span id=\'F_TotalAmount\' data" +
"-wfname=\'金额合计\' type=\'label\'>0.00</span>\",\r\n                    \"F_Taxprice\": \"<s" +
"pan id=\'F_TotalTaxprice\' data-wfname=\'含税单价合计\' type=\'label\'>0.00</span>\",\r\n      " +
"              \"F_Tax\": \"<span id=\'F_TotalTax\'data-wfname=\'税额合计\' type=\'label\'>0.0" +
"0</span >\",\r\n                    \"F_TaxAmount\": \"<span id=\'F_TotalTaxAmount\' dat" +
"a-wfname=\'含税金额合计\' type=\'label\'>0.00</span>\"\r\n                });\r\n              " +
"  $(\'table.ui-jqgrid-ftable td[aria-describedby=\"gridTable_F_UnitId\"]\').prevUnti" +
"l().css(\"border-right-color\", \"#fff\");\r\n            }\r\n        });\r\n        //表头" +
"合并\r\n        $grid.jqGrid(\'setGroupHeaders\', {\r\n            useColSpanStyle: true" +
",\r\n            groupHeaders: [\r\n              { startColumnName: \'F_ProductName\'" +
", numberOfColumns: 3, titleText: \'商品信息\' },\r\n              { startColumnName: \'F_" +
"Qty\', numberOfColumns: 7, titleText: \'价格信息\' }\r\n            ]\r\n        });\r\n     " +
"   //默认添加13行 空行\r\n        for (var i = 1; i < 13; i++) {\r\n            var rowdata" +
" = {\r\n                F_OrderEntryId: \'<input name=\"F_OrderEntryId\" type=\"text\" " +
"/>\',\r\n                F_ProductName: \'<div class=\"product\"><input name=\"F_Produc" +
"tName\" readonly type=\"text\" class=\"editable\" isvalid=\"no\" checkexpession=\"NotNul" +
"l\"/><span class=\"ui-icon-ellipsis\"></span></div>\',\r\n                F_ProductCod" +
"e: \'<input name=\"F_ProductCode\" type=\"text\" class=\"editable center disabled\" /><" +
"input name=\"F_ProductId\" type=\"hidden\" />\',\r\n                F_UnitId: \'<input n" +
"ame=\"F_UnitId\" type=\"text\" class=\"editable center\" />\',\r\n                F_Qty: " +
"\'<input name=\"F_Qty\" type=\"text\" class=\"editable center decimal\" isvalid=\"no\" ch" +
"eckexpession=\"Double\" />\',\r\n                F_Price: \'<input name=\"F_Price\" type" +
"=\"text\" class=\"editable center decimal\" isvalid=\"no\" checkexpession=\"Double\" />\'" +
",\r\n                F_Amount: \'<input name=\"F_Amount\" type=\"text\" class=\"editable" +
" center decimal disabled\" isvalid=\"no\" checkexpession=\"Double\" />\',\r\n           " +
"     F_TaxRate: \'<input name=\"F_TaxRate\" type=\"text\" class=\"editable center deci" +
"mal\" isvalid=\"no\" checkexpession=\"Double\" />\',\r\n                F_Taxprice: \'<in" +
"put name=\"F_Taxprice\" type=\"text\" class=\"editable center decimal\" isvalid=\"no\" c" +
"heckexpession=\"Double\" />\',\r\n                F_Tax: \'<input name=\"F_Tax\" type=\"t" +
"ext\" class=\"editable center decimal disabled\" isvalid=\"no\" checkexpession=\"Doubl" +
"e\" />\',\r\n                F_TaxAmount: \'<input name=\"F_TaxAmount\" type=\"text\" cla" +
"ss=\"editable center decimal disabled\" isvalid=\"no\" checkexpession=\"Double\" />\',\r" +
"\n                F_Description: \'<input name=\"F_Description\" type=\"text\" class=\"" +
"editable\" />\',\r\n            }\r\n            $grid.jqGrid(\'addRowData\', i, rowdata" +
");\r\n        };\r\n        $grid.find(\'.decimal\').attr(\'onfocus\', \'IsMoney(this.id)" +
"\');\r\n        $grid.find(\'input\').attr(\"disabled\", \"disabled\");\r\n        $grid.fi" +
"nd(\"tbody tr:eq(1)\").find(\'input\').removeAttr(\'disabled\').attr(\"isvalid\", \"yes\")" +
";\r\n        $grid.find(\'.disabled\').attr(\"disabled\", \"disabled\");\r\n        //商品名称" +
"事件\r\n        $(\'input[name=\"F_ProductName\"]\').focus(function () {\r\n            $(" +
"\'.ui-icon-ellipsis\').hide();\r\n            $(this).next(\'.ui-icon-ellipsis\').show" +
"();\r\n            $(this).Contextmenu();\r\n        });\r\n        //选择商品事件\r\n        " +
"$(\'.ui-icon-ellipsis\').click(function () {\r\n            var $ellipsis = $(this);" +
"\r\n            dialogOpen({\r\n                id: \"OptionProduct\",\r\n              " +
"  title: \'选择商品\',\r\n                url: \'/CustomerManage/Order/OptionProduct\',\r\n " +
"               width: \"600px\",\r\n                height: \"400px\",\r\n              " +
"  callBack: function (iframeId) {\r\n                    top.frames[iframeId].Acce" +
"ptClick(function (data) {\r\n                        if ($grid.find(\'[role=row]\')." +
"find(\'[data-value=\' + data.ProductId + \']\').length == 0) {\r\n                    " +
"        $ellipsis.parents(\'[role=row]\').find(\'input[name=\"F_ProductName\"]\').val(" +
"data.F_ProductName);\r\n                            $ellipsis.parents(\'[role=row]\'" +
").find(\'input[name=\"F_ProductCode\"]\').val(data.F_ProductCode).attr(\'data-value\'," +
" data.F_ProductId);\r\n                            $ellipsis.parents(\'[role=row]\')" +
".find(\'input[name=\"F_ProductId\"]\').val(data.F_ProductId);\r\n                     " +
"       $ellipsis.parents(\'[role=row]\').find(\'input[name=\"F_Qty\"]\').val(\'1.00\');\r" +
"\n                            $ellipsis.parents(\'[role=row]\').find(\'input[name=\"F" +
"_Price\"]\').val(\'0.00\');\r\n                            $ellipsis.parents(\'[role=ro" +
"w]\').find(\'input[name=\"F_Amount\"]\').val(\'0.00\');\r\n                            $e" +
"llipsis.parents(\'[role=row]\').find(\'input[name=\"F_TaxRate\"]\').val(\'0.00\');\r\n    " +
"                        $ellipsis.parents(\'[role=row]\').find(\'input[name=\"F_Taxp" +
"rice\"]\').val(\'0.00\');\r\n                            $ellipsis.parents(\'[role=row]" +
"\').find(\'input[name=\"F_Tax\"]\').val(\'0.00\');\r\n                            $ellips" +
"is.parents(\'[role=row]\').find(\'input[name=\"F_TaxAmount\"]\').val(\'0.00\');\r\n       " +
"                     $ellipsis.parents(\'[role=row]\').find(\'input\').removeAttr(\'d" +
"isabled\').attr(\"isvalid\", \"yes\");\r\n                            $ellipsis.parents" +
"(\'[role=row]\').next().find(\'input\').removeAttr(\'disabled\');\r\n                   " +
"     } else {\r\n                            top.dialogTop(\'商品信息已存在,不能重复添加\', \'erro" +
"r\');\r\n                        }\r\n                    });\r\n                },\r\n  " +
"              btn: [\'确认选中\', \'关闭\']\r\n            });\r\n        });\r\n        //价格文本框" +
"事件\r\n        $grid.find(\'.decimal\').click(function () {\r\n            $(this).sele" +
"ct();\r\n        });\r\n        //价格文本框换算\r\n        $grid.find(\'.decimal\').keyup(func" +
"tion () {\r\n            var _inputName = $(this).attr(\'name\');\r\n            var $" +
"Qty = $(this).parents(\'[role=row]\').find(\'input[name=\"F_Qty\"]\');                " +
"    //数量\r\n            var $Price = $(this).parents(\'[role=row]\').find(\'input[nam" +
"e=\"F_Price\"]\');                //单价\r\n            var $Amount = $(this).parents(\'" +
"[role=row]\').find(\'input[name=\"F_Amount\"]\');              //金额\r\n            var " +
"$TaxRate = $(this).parents(\'[role=row]\').find(\'input[name=\"F_TaxRate\"]\');       " +
"     //税率(%)\r\n            var $Taxprice = $(this).parents(\'[role=row]\').find(\'in" +
"put[name=\"F_Taxprice\"]\');          //含税单价\r\n            var $Tax = $(this).parent" +
"s(\'[role=row]\').find(\'input[name=\"F_Tax\"]\');                    //税额\r\n          " +
"  var $TaxAmount = $(this).parents(\'[role=row]\').find(\'input[name=\"F_TaxAmount\"]" +
"\');        //含税金额\r\n            if (_inputName == \"Taxprice\") {\r\n                " +
"//单价 * (1 + (税率 / 100))=含税单价\r\n                $Price.val(toDecimal($Taxprice.val" +
"() / (1 + ($TaxRate.val() / 100))));\r\n            } else {\r\n                //单价" +
" * (1 + (税率 / 100))=含税单价\r\n                $Taxprice.val(toDecimal($Price.val() *" +
" (1 + ($TaxRate.val() / 100))));\r\n            }\r\n            //数量*单价=金额\r\n       " +
"     $Amount.val(toDecimal($Qty.val() * $Price.val()));\r\n            //(含税单价-单价)" +
"*数量=税额\r\n            $Tax.val(toDecimal(($Taxprice.val() - $Price.val()) * $Qty.v" +
"al()));\r\n            //数量*含税单价=含税金额\r\n            $TaxAmount.val(toDecimal($Qty.v" +
"al() * $Taxprice.val()));\r\n            //合计\r\n            var TotalQty = 0.00, To" +
"talPrice = 0.00, TotalAmount = 0.00, TotalTaxprice = 0.00, TotalTax = 0.00, Tota" +
"lTaxAmount = 0.00;\r\n            $grid.find(\"tbody tr\").each(function (i) {\r\n    " +
"            var Qty = $(this).find(\'td:eq(5)\').find(\'input\').val();\r\n           " +
"     if (Qty != \"\" && Qty != undefined) {\r\n                    TotalQty += Numbe" +
"r(Qty);\r\n                }\r\n                var Price = $(this).find(\'td:eq(6)\')" +
".find(\'input\').val();\r\n                if (Price != \"\" && Price != undefined) {\r" +
"\n                    TotalPrice += Number(Price);\r\n                }\r\n          " +
"      var Amount = $(this).find(\'td:eq(7)\').find(\'input\').val();\r\n              " +
"  if (Amount != \"\" && Amount != undefined) {\r\n                    TotalAmount +=" +
" Number(Amount);\r\n                }\r\n                var Taxprice = $(this).find" +
"(\'td:eq(9)\').find(\'input\').val();\r\n                if (Taxprice != \"\" && Taxpric" +
"e != undefined) {\r\n                    TotalTaxprice += Number(Taxprice);\r\n     " +
"           }\r\n                var Tax = $(this).find(\'td:eq(10)\').find(\'input\')." +
"val();\r\n                if (Tax != \"\" && Tax != undefined) {\r\n                  " +
"  TotalTax += Number(Tax);\r\n                }\r\n                var TaxAmount = $" +
"(this).find(\'td:eq(11)\').find(\'input\').val();\r\n                if (TaxAmount != " +
"\"\" && TaxAmount != undefined) {\r\n                    TotalTaxAmount += Number(Ta" +
"xAmount);\r\n                }\r\n            });\r\n            $(\"#F_TotalQty\").text" +
"(toDecimal(TotalQty));\r\n            $(\"#F_TotalPrice\").text(toDecimal(TotalPrice" +
"));\r\n            $(\"#F_TotalAmount\").text(toDecimal(TotalAmount));\r\n            " +
"$(\"#F_TotalTaxprice\").text(toDecimal(TotalTaxprice));\r\n            $(\"#F_TotalTa" +
"x\").text(toDecimal(TotalTax));\r\n            $(\"#F_TotalTaxAmount\").text(toDecima" +
"l(TotalTaxAmount));\r\n        });\r\n    }\r\n    //保存表单\r\n    function AcceptClick(sa" +
"ve_Mode) {\r\n        if (!$(\'#form1\').Validform()) {\r\n            return false;\r\n" +
"        }\r\n        var OrderEntryJson = [];\r\n        $(\"#gridTable\").find(\'[role" +
"=row]\').each(function (i) {\r\n            if (!!$(this).find(\'input[name=\"F_Produ" +
"ctId\"]\').val()) {\r\n                OrderEntryJson.push({\r\n                    F_" +
"OrderEntryId: $(this).find(\'input[name=\"F_OrderEntryId\"]\').val(),\r\n             " +
"       F_ProductName: $(this).find(\'input[name=\"F_ProductName\"]\').val(),\r\n      " +
"              F_ProductCode: $(this).find(\'input[name=\"F_ProductCode\"]\').val(),\r" +
"\n                    F_ProductId: $(this).find(\'input[name=\"F_ProductId\"]\').val(" +
"),\r\n                    F_UnitId: $(this).find(\'input[name=\"F_UnitId\"]\').val(),\r" +
"\n                    F_Qty: $(this).find(\'input[name=\"F_Qty\"]\').val(),\r\n        " +
"            F_Price: $(this).find(\'input[name=\"F_Price\"]\').val(),\r\n             " +
"       F_Amount: $(this).find(\'input[name=\"F_Amount\"]\').val(),\r\n                " +
"    F_TaxRate: $(this).find(\'input[name=\"F_TaxRate\"]\').val(),\r\n                 " +
"   F_Taxprice: $(this).find(\'input[name=\"F_Taxprice\"]\').val(),\r\n                " +
"    F_Tax: $(this).find(\'input[name=\"F_Tax\"]\').val(),\r\n                    F_Tax" +
"Amount: $(this).find(\'input[name=\"F_TaxAmount\"]\').val(),\r\n                    F_" +
"Description: $(this).find(\'input[name=\"F_Description\"]\').val(),\r\n               " +
"     SortCode: i\r\n                });\r\n            }\r\n        });\r\n        var p" +
"ostData = $(\"#form1\").GetWebControls(keyValue);\r\n        postData[\"F_CustomerNam" +
"e\"] = $(\"#F_CustomerId\").attr(\'data-text\');\r\n        postData[\"F_SellerName\"] = " +
"$(\"#F_SellerId\").attr(\'data-text\');\r\n        postData[\"orderEntryJson\"] = JSON.s" +
"tringify(OrderEntryJson);\r\n        $.ConfirmAjax({\r\n            msg: \"注：您确认要保存此操" +
"作吗？\",\r\n            url: \"../../CustomerManage/Order/SaveForm?keyValue=\" + keyVal" +
"ue,\r\n            param: postData,\r\n            success: function (data) {\r\n     " +
"           var fId = request(\'fId\');\r\n                top.learun.getIframe(fId)." +
"$(\"#gridTable\").trigger(\"reloadGrid\");\r\n                if (save_Mode == 1) {\r\n " +
"                   //top.$.removeTab(\'closeCurrent\');\r\n                    //top" +
".tablist.newTab({\r\n                    //    id: \"OrderForm\",\r\n                 " +
"   //    title: \"新增订单\",\r\n                    //    closed: true,\r\n              " +
"      //    replace: true,\r\n                    //    icon: \"fa fa-file-text-o\"," +
"\r\n                    //    url: top.contentPath + \"/CustomerManage/Order/Form\"\r" +
"\n                    //});\r\n                    //$.currentIframe().$(\"#gridTabl" +
"e\").trigger(\"reloadGrid\");\r\n                    top.$.removeTab(\'closeCurrent\');" +
"\r\n                } else {\r\n                    top.$.removeTab(\'closeCurrent\');" +
"\r\n                }\r\n            }\r\n        });\r\n    }\r\n</script>\r\n<div");

WriteLiteral(" class=\"bills\"");

WriteLiteral(">\r\n    <table");

WriteLiteral(" class=\"form\"");

WriteLiteral(" style=\"width: 100%; margin-bottom: 10px;\"");

WriteLiteral(">\r\n        <tr>\r\n            <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(" style=\"width: 60px;\"");

WriteLiteral(">客户名称<font");

WriteLiteral(" face=\"宋体\"");

WriteLiteral(">*</font></th>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" id=\"F_CustomerId\"");

WriteLiteral(" data-wfname=\"客户名称\"");

WriteLiteral(" type=\"select\"");

WriteLiteral(" class=\"ui-select\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"NotNull\"");

WriteLiteral("></div>\r\n            </td>\r\n            <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">销售人员<font");

WriteLiteral(" face=\"宋体\"");

WriteLiteral(">*</font></th>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" id=\"F_SellerId\"");

WriteLiteral(" data-wfname=\"销售人员\"");

WriteLiteral(" type=\"selectTree\"");

WriteLiteral(" class=\"ui-select\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"NotNull\"");

WriteLiteral("></div>\r\n            </td>\r\n            <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">单据日期<font");

WriteLiteral(" face=\"宋体\"");

WriteLiteral(">*</font></th>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <input");

WriteLiteral(" id=\"F_OrderDate\"");

WriteLiteral(" data-wfname=\"单据日期\"");

WriteLiteral(" type=\"text\"");

WriteAttribute("value", Tuple.Create(" value=\"", 23002), Tuple.Create("\"", 23041)
            
            #line 389 "..\..\Areas\CustomerManage\Views\Order\Form.cshtml"
, Tuple.Create(Tuple.Create("", 23010), Tuple.Create<System.Object, System.Int32>(Infoearth.Util.Time.GetToday()
            
            #line default
            #line hidden
, 23010), false)
);

WriteLiteral(" class=\"form-control input-wdatepicker\"");

WriteLiteral(" onfocus=\"WdatePicker({maxDate:\'%y-%M-%d\'})\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"NotNull\"");

WriteLiteral(" />\r\n            </td>\r\n            <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">单据编号<font");

WriteLiteral(" face=\"宋体\"");

WriteLiteral(">*</font></th>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <input");

WriteLiteral(" id=\"F_OrderCode\"");

WriteLiteral(" data-wfname=\"单据编号\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" readonly");

WriteAttribute("value", Tuple.Create(" value=\"", 23372), Tuple.Create("\"", 23398)
            
            #line 393 "..\..\Areas\CustomerManage\Views\Order\Form.cshtml"
      , Tuple.Create(Tuple.Create("", 23380), Tuple.Create<System.Object, System.Int32>(ViewBag.OrderCode
            
            #line default
            #line hidden
, 23380), false)
);

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"NotNull\"");

WriteLiteral(" />\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    <div");

WriteLiteral(" class=\"gridPanel\"");

WriteLiteral(">\r\n        <table");

WriteLiteral(" id=\"gridTable\"");

WriteLiteral("></table>\r\n    </div>\r\n    <textarea");

WriteLiteral(" id=\"Description\"");

WriteLiteral(" data-wfname=\"备注信息\"");

WriteLiteral(" placeholder=\"暂无备注信息\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" style=\"width: 100%; height: 50px; margin-top: 10px;\"");

WriteLiteral("></textarea>\r\n    <table");

WriteLiteral(" class=\"form\"");

WriteLiteral(" style=\"width: 100%; margin-top: 5px;\"");

WriteLiteral(">\r\n        <tr>\r\n            <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(" style=\"width: 60px;\"");

WriteLiteral(">优惠金额<font");

WriteLiteral(" face=\"宋体\"");

WriteLiteral(">*</font></th>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <input");

WriteLiteral(" id=\"F_DiscountSum\"");

WriteLiteral(" data-wfname=\"优惠金额\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" value=\"0.00\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"Double\"");

WriteLiteral(" />\r\n            </td>\r\n            <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">收款金额<font");

WriteLiteral(" face=\"宋体\"");

WriteLiteral(">*</font></th>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <input");

WriteLiteral(" id=\"F_Accounts\"");

WriteLiteral(" data-wfname=\"收款金额\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" value=\"0.00\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"Double\"");

WriteLiteral(" />\r\n            </td>\r\n            <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">收款日期<font");

WriteLiteral(" face=\"宋体\"");

WriteLiteral(">*</font></th>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <input");

WriteLiteral(" id=\"F_PaymentDate\"");

WriteLiteral(" data-wfname=\"收款日期\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control input-wdatepicker\"");

WriteLiteral(" onfocus=\"WdatePicker()\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"NotNull\"");

WriteLiteral(" />\r\n            </td>\r\n            <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">收款方式<font");

WriteLiteral(" face=\"宋体\"");

WriteLiteral(">*</font></th>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" id=\"F_PaymentMode\"");

WriteLiteral(" data-wfname=\"收款方式\"");

WriteLiteral(" type=\"select\"");

WriteLiteral(" multiples=\"true\"");

WriteLiteral(" class=\"ui-select\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"NotNull\"");

WriteLiteral("></div>\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(" style=\"width: 60px;\"");

WriteLiteral(">销售费用<font");

WriteLiteral(" face=\"宋体\"");

WriteLiteral(">*</font></th>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <input");

WriteLiteral(" id=\"F_SaleCost\"");

WriteLiteral(" data-wfname=\"销售费用\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" value=\"0.00\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"Double\"");

WriteLiteral(" />\r\n            </td>\r\n            <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">制单人员<font");

WriteLiteral(" face=\"宋体\"");

WriteLiteral(">*</font></th>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <input");

WriteLiteral(" id=\"F_CreateUserName\"");

WriteLiteral(" data-wfname=\"制单人员\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" readonly");

WriteAttribute("value", Tuple.Create(" value=\"", 25505), Tuple.Create("\"", 25585)
            
            #line 427 "..\..\Areas\CustomerManage\Views\Order\Form.cshtml"
                                , Tuple.Create(Tuple.Create("", 25513), Tuple.Create<System.Object, System.Int32>(Infoearth.Application.Code.OperatorProvider.Provider.Current().UserName
            
            #line default
            #line hidden
, 25513), false)
);

WriteLiteral(" /></td>\r\n            <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">合同编号</th>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <input");

WriteLiteral(" id=\"F_ContractCode\"");

WriteLiteral(" data-wfname=\"合同编号\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" />\r\n            </td>\r\n            <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">合同附件</th>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <input");

WriteLiteral(" id=\"F_ContractFile\"");

WriteLiteral(" data-wfname=\"合同附件\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" />\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">摘要信息</th>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(" colspan=\"7\"");

WriteLiteral(">\r\n                <input");

WriteLiteral(" id=\"F_AbstractInfo\"");

WriteLiteral(" data-wfname=\"摘要信息\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" />\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <th");

WriteLiteral(" class=\"formTitle\"");

WriteLiteral(">添加附件</th>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(" colspan=\"7\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" id=\"btnUpFile\"");

WriteLiteral("></div>\r\n            </td>\r\n        </tr>\r\n    </table>\r\n</div>\r\n<div");

WriteLiteral(" id=\"bottomField\"");

WriteLiteral(" data-wfhide >\r\n    <a");

WriteLiteral(" id=\"savaAndAdd\"");

WriteLiteral(" class=\"btn btn-success\"");

WriteLiteral(" onclick=\"AcceptClick(1)\"");

WriteLiteral(">保存并新增</a>\r\n    <a");

WriteLiteral(" id=\"save\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral(" onclick=\"AcceptClick(2)\"");

WriteLiteral(">保存单据</a>\r\n</div>\r\n<div");

WriteLiteral(" class=\"contextmenu\"");

WriteLiteral(">\r\n    <ul>\r\n        <li>添加一行</li>\r\n        <li>删除一行</li>\r\n    </ul>\r\n</div>\r\n");

        }
    }
}
#pragma warning restore 1591

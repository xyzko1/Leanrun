#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Areas/CustomerManage/Views/Chance/Index.cshtml")]
    public partial class _Areas_CustomerManage_Views_Chance_Index_cshtml : System.Web.Mvc.WebViewPage<dynamic>
    {
        public _Areas_CustomerManage_Views_Chance_Index_cshtml()
        {
        }
        public override void Execute()
        {
            
            #line 1 "..\..\Areas\CustomerManage\Views\Chance\Index.cshtml"
  ;
  ViewBag.Title = "列表页面";
  Layout = "~/Views/Shared/_Index.cshtml";

            
            #line default
            #line hidden
WriteLiteral("\r\n<script>;\r\n    $(function () {\r\n        InitialPage();\r\n        GetGrid();\r\n   " +
" });\r\n    //初始化页面\r\n    function InitialPage() {\r\n        //resize重设布局;\r\n        " +
"$(window).resize(function (e) {\r\n            window.setTimeout(function () {\r\n  " +
"              $(\'#gridTable\').setGridWidth(($(\'.gridPanel\').width()));\r\n        " +
"        $(\'#gridTable\').setGridHeight($(window).height() - 136.5);\r\n            " +
"}, 200);\r\n            e.stopPropagation();\r\n        });\r\n    }\r\n    //加载表格\r\n    " +
"function GetGrid() {\r\n        var selectedRowIndex = 0;\r\n        var $gridTable " +
"= $(\'#gridTable\');\r\n        $gridTable.jqGrid({\r\n            autowidth: true,\r\n " +
"           height: $(window).height() - 136.5,\r\n            url: \"../../Customer" +
"Manage/Chance/GetPageListJson\",\r\n            datatype: \"json\",\r\n            colM" +
"odel: [\r\n                { label: \'商机主键\', name: \'F_ChanceId\', index: \'F_ChanceId" +
"\', width: 100, align: \'left\', sortable: true, hidden: true },\r\n                {" +
" label: \'商机编号\', name: \'F_EnCode\', index: \'F_EnCode\', width: 100, align: \'left\', " +
"sortable: true },\r\n                { label: \'商机名称\', name: \'F_FullName\', index: \'" +
"F_FullName\', width: 250, align: \'left\', sortable: true },\r\n                { lab" +
"el: \'预计金额\', name: \'F_Amount\', index: \'F_Amount\', width: 80, align: \'left\', sorta" +
"ble: true, formatter: \'number\', formatoptions: { thousandsSeparator: \"\", decimal" +
"Places: 2 } },\r\n                { label: \'预计成交\', name: \'F_DealDate\', index: \'F_D" +
"ealDate\', width: 80, align: \'left\', sortable: true, formatter: \"date\", formatopt" +
"ions: { newformat: \'Y-m-d\' } },\r\n                { label: \'商机来源\', name: \'F_Sourc" +
"eId\', index: \'F_SourceId\', width: 80, align: \'center\', sortable: true },\r\n      " +
"          { label: \'商机阶段\', name: \'F_StageId\', index: \'F_StageId\', width: 80, ali" +
"gn: \'center\', sortable: true },\r\n                {\r\n                    label: \'" +
"成功率%\', name: \'F_SuccessRate\', index: \'F_SuccessRate\', width: 80, align: \'left\', " +
"sortable: true,\r\n                    formatter: function (cellvalue, options, ro" +
"wObject) {\r\n                        if (cellvalue > 50) {\r\n                     " +
"       return \"<span style=\'color:red\'>\" + cellvalue + \"%</span>\";\r\n            " +
"            } else {\r\n\r\n                            return (cellvalue == null ? " +
"\"0\" : cellvalue) + \"%\";\r\n                        }\r\n                    }\r\n     " +
"           },\r\n                { label: \'联系人\', name: \'F_Contacts\', index: \'F_Con" +
"tacts\', width: 80, align: \'left\', sortable: true },\r\n                { label: \'跟" +
"进人员\', name: \'F_TraceUserName\', index: \'F_TraceUserName\', width: 80, align: \'left" +
"\', sortable: true },\r\n                { label: \'最后更新\', name: \'F_ModifyDate\', ind" +
"ex: \'F_ModifyDate\', width: 130, align: \'left\', sortable: true, formatter: \"date\"" +
", formatoptions: { srcformat: \'Y-m-d H:i\', newformat: \'Y-m-d H:i\' } },\r\n        " +
"        {\r\n                    label: \"商机状态\", name: \"F_ChanceState\", index: \'F_C" +
"hanceState\', width: 80, align: \"center\",\r\n                    formatter: functio" +
"n (cellvalue, options, rowObject) {\r\n                        if (rowObject.IsToC" +
"ustom == 1) {\r\n                            return \"<span class=\\\"label label-war" +
"ning\\\">已转客户</span>\";\r\n                        }\r\n                        if (cel" +
"lvalue == 0) {\r\n                            return \"<span class=\\\"label label-da" +
"nger\\\">作废</span>\";\r\n                        } else {\r\n                          " +
"  return \"<span class=\\\"label label-success\\\">正常</span>\";\r\n                     " +
"   }\r\n                    }\r\n                },\r\n                { label: \'备注\', " +
"name: \'F_Description\', index: \'F_Description\', width: 200, align: \'left\', sortab" +
"le: true }\r\n            ],\r\n            viewrecords: true,\r\n            rowNum: " +
"30,\r\n            rowList: [30, 50, 100],\r\n            pager: \"#gridPager\",\r\n    " +
"        sortname: \'F_ModifyDate\',\r\n            sortorder: \'desc\',\r\n            r" +
"ownumbers: true,\r\n            shrinkToFit: false,\r\n            gridview: true,\r\n" +
"            onSelectRow: function () {\r\n                selectedRowIndex = $(\'#\'" +
" + this.id).getGridParam(\'selrow\');\r\n            },\r\n            gridComplete: f" +
"unction () {\r\n                $(\'#\' + this.id).setSelection(selectedRowIndex, fa" +
"lse);\r\n            }\r\n        });\r\n        //查询条件\r\n        $(\"#queryCondition .d" +
"ropdown-menu li\").click(function () {\r\n            var text = $(this).find(\'a\')." +
"html();\r\n            var value = $(this).find(\'a\').attr(\'data-value\');\r\n        " +
"    $(\"#queryCondition .dropdown-text\").html(text).attr(\'data-value\', value)\r\n  " +
"      });\r\n        //查询事件\r\n        $(\"#btn_Search\").click(function () {\r\n       " +
"     var queryJson = {\r\n                condition: $(\"#queryCondition\").find(\'.d" +
"ropdown-text\').attr(\'data-value\'),\r\n                keyword: $(\"#txt_Keyword\").v" +
"al()\r\n            }\r\n            $gridTable.jqGrid(\'setGridParam\', {\r\n          " +
"      postData: { queryJson: JSON.stringify(queryJson) },\r\n                page:" +
" 1\r\n            }).trigger(\'reloadGrid\');\r\n        });\r\n        //查询回车\r\n        " +
"$(\'#txt_Keyword\').bind(\'keypress\', function (event) {\r\n            if (event.key" +
"Code == \"13\") {\r\n                $(\'#btn_Search\').trigger(\"click\");\r\n           " +
" }\r\n        });\r\n    }\r\n    //新增\r\n    function btn_add() {\r\n        dialogOpen({" +
"\r\n            id: \'Form\',\r\n            title: \'添加商机\',\r\n            url: \'/Custom" +
"erManage/Chance/Form\',\r\n            width: \"750px\",\r\n            height: \"600px\"" +
",\r\n            callBack: function (iframeId) {\r\n                getInfoTop().fra" +
"mes[iframeId].AcceptClick();\r\n            }\r\n        });\r\n    }\r\n    //地图展示\r\n   " +
" function btn_map() {\r\n        dialogOpen({\r\n            id: \'Form\',\r\n          " +
"  title: \'地图展示\',\r\n            url: \'/CustomerManage/Chance/MapView\',\r\n          " +
"  width: \"750px\",\r\n            height: \"600px\",\r\n            callBack: function " +
"(iframeId) {\r\n                //getInfoTop().frames[iframeId].AcceptClick();\r\n  " +
"          }\r\n        });\r\n    }\r\n    //编辑\r\n    function btn_edit() {\r\n        va" +
"r keyValue = $(\"#gridTable\").jqGridRowValue(\'F_ChanceId\');\r\n        if (checkedR" +
"ow(keyValue)) {\r\n            dialogOpen({\r\n                id: \'Form\',\r\n        " +
"        title: \'编辑商机\',\r\n                url: \'/CustomerManage/Chance/Form?keyVal" +
"ue=\' + keyValue,\r\n                width: \"750px\",\r\n                height: \"600p" +
"x\",\r\n                callBack: function (iframeId) {\r\n                    getInf" +
"oTop().frames[iframeId].AcceptClick();\r\n                }\r\n            })\r\n     " +
"   }\r\n    }\r\n    //删除\r\n    function btn_delete() {\r\n        var keyValue = $(\"#g" +
"ridTable\").jqGridRowValue(\'F_ChanceId\');\r\n        if (keyValue) {\r\n            $" +
".RemoveForm({\r\n                url: \'../../CustomerManage/Chance/RemoveForm\',\r\n " +
"               param: { keyValue: keyValue },\r\n                success: function" +
" (data) {\r\n                    $(\'#gridTable\').trigger(\'reloadGrid\');\r\n         " +
"       }\r\n            })\r\n        } else {\r\n            dialogMsg(\'请选择需要删除的商机信息！" +
"\', 0);\r\n        }\r\n    }\r\n    //详细\r\n    function btn_detail() {\r\n        var key" +
"Value = $(\"#gridTable\").jqGridRowValue(\"F_ChanceId\");\r\n        if (checkedRow(ke" +
"yValue)) {\r\n            dialogOpen({\r\n                id: \"Detail\",\r\n           " +
"     title: \'商机信息\',\r\n                url: \'/CustomerManage/Chance/Detail?keyValu" +
"e=\' + keyValue,\r\n                width: \'750px\',\r\n                height: \'550px" +
"\',\r\n                btn: null\r\n            });\r\n        }\r\n    }\r\n    //作废\r\n    " +
"function btn_invalid() {\r\n        var keyValue = $(\"#gridTable\").jqGridRowValue(" +
"\'F_ChanceId\');\r\n        var fullName = $(\"#gridTable\").jqGridRowValue(\'F_FullNam" +
"e\');\r\n        if (checkedRow(keyValue)) {\r\n            $.ConfirmAjax({\r\n        " +
"        msg: \"注：您确定要把商机【\" + fullName + \"】作废掉吗？\",\r\n                url: \"../../Cu" +
"stomerManage/Chance/Invalid\",\r\n                param: { keyValue: keyValue },\r\n " +
"               success: function (data) {\r\n                    $(\'#gridTable\').t" +
"rigger(\'reloadGrid\');\r\n                }\r\n            });\r\n        }\r\n    }\r\n   " +
" //跟进记录\r\n    function btn_chancetrail() {\r\n        var keyValue = $(\"#gridTable\"" +
").jqGridRowValue(\'F_ChanceId\');\r\n        var fullName = $(\"#gridTable\").jqGridRo" +
"wValue(\'F_FullName\');\r\n        if (checkedRow(keyValue)) {\r\n            dialogOp" +
"en({\r\n                id: \'ChanceTrailIndex\',\r\n                title: fullName +" +
" \' - 跟进记录\',\r\n                url: \'/CustomerManage/TrailRecord/Index?objectId=\' " +
"+ keyValue + \'&objectSort=1\',\r\n                width: \'750px\',\r\n                " +
"height: \'550px\',\r\n                btn: null\r\n            });\r\n        }\r\n    }\r\n" +
"    //转换客户\r\n    function btn_tocustomer() {\r\n        var keyValue = $(\"#gridTabl" +
"e\").jqGridRowValue(\'F_ChanceId\');\r\n        var fullName = $(\"#gridTable\").jqGrid" +
"RowValue(\'F_FullName\');\r\n        if (checkedRow(keyValue)) {\r\n            $.Conf" +
"irmAjax({\r\n                msg: \"注：您确定要把商机【\" + fullName + \"】转换客户吗？\",\r\n          " +
"      url: \"../../CustomerManage/Chance/ToCustomer\",\r\n                param: { k" +
"eyValue: keyValue },\r\n                success: function (data) {\r\n              " +
"      $(\'#gridTable\').trigger(\'reloadGrid\');\r\n                }\r\n            });" +
"\r\n        }\r\n    }\r\n</script>\r\n<div");

WriteLiteral(" class=\"titlePanel\"");

WriteLiteral(">\r\n    <div");

WriteLiteral(" class=\"title-search\"");

WriteLiteral(">\r\n        <table>\r\n            <tr>\r\n                <td>\r\n                    <" +
"div");

WriteLiteral(" id=\"queryCondition\"");

WriteLiteral(" class=\"btn-group\"");

WriteLiteral(">\r\n                        <a");

WriteLiteral(" class=\"btn btn-default dropdown-text\"");

WriteLiteral(" data-toggle=\"dropdown\"");

WriteLiteral(">选择条件</a>\r\n                        <a");

WriteLiteral(" class=\"btn btn-default dropdown-toggle\"");

WriteLiteral(" data-toggle=\"dropdown\"");

WriteLiteral("><span");

WriteLiteral(" class=\"caret\"");

WriteLiteral("></span></a>\r\n                        <ul");

WriteLiteral(" class=\"dropdown-menu\"");

WriteLiteral(">\r\n                            <li><a");

WriteLiteral(" data-value=\"EnCode\"");

WriteLiteral(">商机编号</a></li>\r\n                            <li><a");

WriteLiteral(" data-value=\"FullName\"");

WriteLiteral(">商机名称</a></li>\r\n                            <li><a");

WriteLiteral(" data-value=\"Contacts\"");

WriteLiteral(">联系人</a></li>\r\n                            <li><a");

WriteLiteral(" data-value=\"Mobile\"");

WriteLiteral(">手机</a></li>\r\n                            <li><a");

WriteLiteral(" data-value=\"Tel\"");

WriteLiteral(">电话</a></li>\r\n                            <li><a");

WriteLiteral(" data-value=\"QQ\"");

WriteLiteral(">QQ</a></li>\r\n                            <li><a");

WriteLiteral(" data-value=\"Wechat\"");

WriteLiteral(">微信</a></li>\r\n                        </ul>\r\n                    </div>\r\n        " +
"        </td>\r\n                <td");

WriteLiteral(" style=\"padding-left: 2px;\"");

WriteLiteral(">\r\n                    <input");

WriteLiteral(" id=\"txt_Keyword\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" placeholder=\"请输入要查询关键字\"");

WriteLiteral(" style=\"width: 200px;\"");

WriteLiteral(" />\r\n                </td>\r\n                <td");

WriteLiteral(" style=\"padding-left: 5px;\"");

WriteLiteral(">\r\n                    <a");

WriteLiteral(" id=\"btn_Search\"");

WriteLiteral(" class=\"btn btn-primary\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-search\"");

WriteLiteral("></i>&nbsp;查询</a>\r\n                </td>\r\n            </tr>\r\n        </table>\r\n  " +
"  </div>\r\n    <div");

WriteLiteral(" class=\"toolbar\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" class=\"btn-group\"");

WriteLiteral(">\r\n            <a");

WriteLiteral(" id=\"lr-replace\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral(" onclick=\"learun.reload();\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-refresh\"");

WriteLiteral("></i>&nbsp;刷新</a>\r\n            <a");

WriteLiteral(" id=\"lr-add\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral(" onclick=\"btn_add()\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-plus\"");

WriteLiteral("></i>&nbsp;新增</a>\r\n            <a");

WriteLiteral(" id=\"lr-map\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral(" onclick=\"btn_map()\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-plus\"");

WriteLiteral("></i>&nbsp;地图展示</a>\r\n            <a");

WriteLiteral(" id=\"lr-edit\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral(" onclick=\"btn_edit()\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-pencil-square-o\"");

WriteLiteral("></i>&nbsp;编辑</a>\r\n            <a");

WriteLiteral(" id=\"lr-delete\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral(" onclick=\"btn_delete()\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-trash-o\"");

WriteLiteral("></i>&nbsp;删除</a>\r\n            <a");

WriteLiteral(" id=\"lr-detail\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral(" onclick=\"btn_detail()\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-list-alt\"");

WriteLiteral("></i>&nbsp;详细</a>\r\n            <a");

WriteLiteral(" id=\"lr-invalid\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral(" onclick=\"btn_invalid()\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-cut\"");

WriteLiteral("></i>&nbsp;作废</a>\r\n        </div>\r\n        <div");

WriteLiteral(" class=\"btn-group\"");

WriteLiteral(">\r\n            <a");

WriteLiteral(" id=\"lr-chancetrail\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral(" onclick=\"btn_chancetrail()\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-clock-o\"");

WriteLiteral("></i>&nbsp;跟进记录</a>\r\n            <a");

WriteLiteral(" id=\"lr-tocustomer\"");

WriteLiteral(" class=\"btn btn-default\"");

WriteLiteral(" onclick=\"btn_tocustomer()\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-random\"");

WriteLiteral("></i>&nbsp;转换客户</a>\r\n        </div>\r\n    </div>\r\n    <div");

WriteLiteral(" style=\"clear:both;\"");

WriteLiteral("></div>\r\n</div>\r\n<div");

WriteLiteral(" class=\"gridPanel\"");

WriteLiteral(">\r\n    <table");

WriteLiteral(" id=\"gridTable\"");

WriteLiteral("></table>\r\n    <div");

WriteLiteral(" id=\"gridPager\"");

WriteLiteral("></div>\r\n</div>\r\n");

        }
    }
}
#pragma warning restore 1591

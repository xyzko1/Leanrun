#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Areas/CustomerManage/Views/TrailRecord/Index.cshtml")]
    public partial class _Areas_CustomerManage_Views_TrailRecord_Index_cshtml : System.Web.Mvc.WebViewPage<dynamic>
    {
        public _Areas_CustomerManage_Views_TrailRecord_Index_cshtml()
        {
        }
        public override void Execute()
        {
            
            #line 1 "..\..\Areas\CustomerManage\Views\TrailRecord\Index.cshtml"
  
    ViewBag.Title = "商机跟进页面";
    Layout = "~/Views/Shared/_Form.cshtml";

            
            #line default
            #line hidden
WriteLiteral("\r\n<script>\r\n    var objectId = request(\'objectId\');\r\n    var objectSort = request" +
"(\'objectSort\');\r\n    $(function () {\r\n        GetTimeline();\r\n    })\r\n    //获取跟进" +
"记录列表\r\n    function GetTimeline() {\r\n        $.ajax({\r\n            url: \"../../Cu" +
"stomerManage/TrailRecord/GetListJson\",\r\n            data: { objectId: objectId }" +
",\r\n            type: \"get\",\r\n            dataType: \"json\",\r\n            async: f" +
"alse,\r\n            success: function (data) {\r\n                var timeline = da" +
"ta.timeline;\r\n                var rows = data.rows;\r\n                var _html =" +
" \"\";\r\n                $.each(timeline, function (key) {\r\n                    _ht" +
"ml += \'<li> \';\r\n                    _html += \'    <span class=\"label label-warni" +
"ng\"><i class=\"fa fa-circle\"></i>\' + key + \'</span> \';\r\n                    _html" +
" += \'    <div class=\"content\"> \';\r\n                    $.each(rows, function (i)" +
" {\r\n                        var row = rows[i];\r\n                        if (time" +
"line[key] == formatDate(row.F_CreateDate, \'yyyy-MM-dd\')) {\r\n                    " +
"        _html += \'        <div class=\"row\"> \';\r\n                            _htm" +
"l += \'            <span class=\"item-flag\"><i class=\"fa fa-file-text-o\"></i></spa" +
"n> \';\r\n                            _html += \'            <div class=\"item-data\">" +
" \';\r\n                            _html += \'                <span class=\"time\">\' " +
"+ formatDate(row.F_CreateDate, \'hh:mm\') + \'</span> \';\r\n                         " +
"   _html += \'                <span class=\"name\">\' + row.F_CreateUserName + \'<i c" +
"lass=\"fa fa-caret-right\"></i></span> \';\r\n                            _html += \' " +
"               <span class=\"action\">\' + row.F_TrackContent + \'</span> \';\r\n      " +
"                      _html += \'            </div> \';\r\n                         " +
"   _html += \'        </div> \';\r\n                        }\r\n                    }" +
");\r\n                    _html += \'    </div> \';\r\n                    _html += \'<" +
"/li> \';\r\n\r\n                });\r\n                $(\"#ul_timeline\").html(_html);\r\n" +
"            }\r\n        });\r\n    }\r\n    //保存表单\r\n    function AcceptClick() {\r\n   " +
"     if (!$(\'#form1\').Validform()) {\r\n            return false;\r\n        }\r\n    " +
"    var postData = $(\"#form1\").GetWebControls(\"\");\r\n        postData[\"ObjectId\"]" +
" = objectId;\r\n        postData[\"ObjectSort\"] = objectSort;\r\n        $.SaveForm({" +
"\r\n            url: \"../../CustomerManage/TrailRecord/SaveForm\",\r\n            par" +
"am: postData,\r\n            loading: \"正在保存数据...\",\r\n            close: false,\r\n   " +
"         success: function () {\r\n                GetTimeline();\r\n               " +
" $(\"#TrackContent\").val(\'\');\r\n            }\r\n        })\r\n    }\r\n</script>\r\n<div");

WriteLiteral(" style=\"margin: 10px; margin-bottom: 0px;\"");

WriteLiteral(">\r\n    <table");

WriteLiteral(" class=\"form\"");

WriteLiteral(">\r\n        <tr>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(">\r\n                <textarea");

WriteLiteral(" id=\"TrackContent\"");

WriteLiteral(" maxlength=\"200\"");

WriteLiteral(" placeholder=\"活动记录内容\"");

WriteLiteral(" class=\"form-control\"");

WriteLiteral(" isvalid=\"yes\"");

WriteLiteral(" checkexpession=\"NotNull\"");

WriteLiteral(" style=\"height: 60px; border-radius: 5px;\"");

WriteLiteral("></textarea>\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <td");

WriteLiteral(" class=\"formValue\"");

WriteLiteral(" style=\"text-align: right;\"");

WriteLiteral(">\r\n                <a");

WriteLiteral(" id=\"btn_Search\"");

WriteLiteral(" class=\"btn btn-success\"");

WriteLiteral(" onclick=\"AcceptClick()\"");

WriteLiteral("><i");

WriteLiteral(" class=\"fa fa-paper-plane\"");

WriteLiteral("></i>&nbsp;发布内容</a>\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    <div");

WriteLiteral(" style=\"overflow: auto; height: 380px\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" class=\"timeline\"");

WriteLiteral(">\r\n            <div");

WriteLiteral(" class=\"line\"");

WriteLiteral("></div>\r\n            <ul");

WriteLiteral(" id=\"ul_timeline\"");

WriteLiteral(">\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n");

        }
    }
}
#pragma warning restore 1591

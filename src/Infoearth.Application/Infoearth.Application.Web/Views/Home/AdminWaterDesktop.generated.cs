#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/Home/AdminWaterDesktop.cshtml")]
    public partial class _Views_Home_AdminWaterDesktop_cshtml : System.Web.Mvc.WebViewPage<dynamic>
    {
        public _Views_Home_AdminWaterDesktop_cshtml()
        {
        }
        public override void Execute()
        {
            
            #line 1 "..\..\Views\Home\AdminWaterDesktop.cshtml"
  
    ViewBag.Title = "列表页面";
    Layout = "~/Views/Shared/_IndexMap.cshtml";

            
            #line default
            #line hidden
WriteLiteral("\n<div");

WriteLiteral(" id=\"layout\"");

WriteLiteral(">\r\n    <div");

WriteLiteral(" style=\"width: 100%;\"");

WriteLiteral(">\n        <div");

WriteLiteral(" id=\"mapControl\"");

WriteLiteral("></div>\n    </div>\n    <div");

WriteLiteral(" style=\"width: 100%;\"");

WriteLiteral(">\n        <div");

WriteLiteral(" style=\"width: 64%;\"");

WriteLiteral(" id=\"ZHD\"");

WriteLiteral(">\n        </div>\n        <div");

WriteLiteral(" style=\"width: 35%;\"");

WriteLiteral(" id=\"JCD\"");

WriteLiteral("> \n        </div>\n    </div>\r\n</div>\n<style>\r\n    #ZHD,#JCD {\r\n        display:in" +
"line-block;\n    }\n</style>\n");

DefineSection("Scripts", () => {

WriteLiteral("\n");

            
            #line 22 "..\..\Views\Home\AdminWaterDesktop.cshtml"
Write(System.Web.Optimization.Scripts.Render("~/Content/scripts/plugins/echarts/echarts.min.js"));

            
            #line default
            #line hidden
WriteLiteral(" \n<script>\r\n    var layout2NorthH = 1;\r\n    var tabvalue = \"\";\r\n    var authToken" +
" = getAuthorizationToken();\r\n    var ZJJCURL = GetConfig(\"ZJJCURL\");\r\n    var my" +
"Chart,myChart1;\r\n    $(function () {\r\n        GetMapData();\r\n        GetZHDCount" +
"();\r\n        GetZHDPie();\r\n        InitialPage();\r\n    });\r\n    //初始化页面\r\n    fun" +
"ction InitialPage() {\r\n        var isResize = 0;\r\n        var count = 0;\r\n      " +
"  var resized = 0;\r\n        //resize重设布局;\r\n        $(window).resize(function (e)" +
" {\r\n            if (isResize < 10) {\r\n                isResize++;\r\n            }" +
"\r\n            resize();\r\n            e.stopPropagation();\r\n        });\r\n        " +
"$(window).resize();\r\n    }\r\n    function resize() {\r\n        window.setTimeout(f" +
"unction () {\r\n            var H = $(window).height();\r\n            if (mapCtlExt" +
" != null) {\r\n                mapCtlExt.setHeight(H * 0.56);\r\n            }\r\n    " +
"        $(\"#ZHD\").height(H * 0.44);\r\n            $(\"#JCD\").height(H * 0.44);\r\n  " +
"          mapCtlExt.setHeight($(\'#mapControl\').parent().height()-8);\r\n          " +
"  if (myChart) {\r\n                myChart.resize();\r\n            }\r\n            " +
"if (myChart1) {\r\n                myChart1.resize();\r\n            }\r\n        }, 2" +
"00);\r\n    };\r\n    //加载地图\r\n    var mapCtlExt = null;\r\n    function GetMapData() {" +
"\r\n        mapCtlExt = $(\"#mapControl\").mapCtl(\r\n            cfGetMapData({\r\n    " +
"            mapheight: $(window).height() * 0.56,\r\n                isCluster:fal" +
"se,\r\n                zoomEvent: zoomEvent\r\n            }));\r\n        usercode = " +
"\"");

            
            #line 76 "..\..\Views\Home\AdminWaterDesktop.cshtml"
               Write(Infoearth.Application.Code.OperatorProvider.Provider.Current().XZQHCode);

            
            #line default
            #line hidden
WriteLiteral("\";\r\n        GetAreaGeometry(usercode);\r\n    };\r\n    var XZQHDatabc = \'\';\r\n    fun" +
"ction zoomEvent(zoom, XZJB, extent, addMarkerCluster) {\r\n        if (!XZQHDatabc" +
") {\r\n            $.ajax({\r\n                url: \"../../api/TBL_HAZARDBASICINFOAp" +
"i/GetListCodes\",\r\n                beforeSend: function (request) {\r\n            " +
"        request.setRequestHeader(\"Authorization\", authToken);\r\n                }" +
",\r\n                async: true,\r\n                type: \"GET\",\r\n                s" +
"uccess: function (res) {\r\n                    var XZQHData = {};\r\n              " +
"      //省的循环\r\n                    var returnValue = [];\r\n                    for" +
" (var i = 0; i < res.provicenameList.length; i++) {\r\n                        var" +
" html = \"<div>\" + res.provicenameList[i] + \"：\" + res.provicecount[0].data[i] + \"" +
"</div>\";\r\n                        returnValue.push({\r\n                          " +
"  id: \"all\",\r\n                            location: [Number(res.provicelongitude" +
"[i]), Number(res.provicelatitude[i])],\r\n                            popupHtml: h" +
"tml,\r\n                            dataCount: res.provicecount[0].data[i]+\'\'\r\n   " +
"                     });\r\n                    }\r\n                    XZQHData[\'省" +
"\'] = returnValue;\r\n                    addMarkerCluster(returnValue);\r\n         " +
"           //市的循环\r\n                    var returnValue1 = [];\r\n                 " +
"   for (var i = 0; i < res.citynameList.length; i++) {\r\n                        " +
"var html = \"<div>\" + res.citynameList[i] + \"：\" + res.citycount[0].data[i] + \"</d" +
"iv>\";\r\n                        returnValue1.push({\r\n                            " +
"id: \"all\",\r\n                            location: [Number(res.citylongitude[i])," +
" Number(res.citylatitude[i])],\r\n                            popupHtml: html,\r\n  " +
"                          dataCount: res.citycount[0].data[i] + \'\'\r\n            " +
"            });\r\n                    }\r\n                    XZQHData[\'市\'] = retu" +
"rnValue1;\r\n                    //区的循环\r\n                    var returnValue2 = []" +
";\r\n                    for (var i = 0; i < res.countynameList.length; i++) {\r\n  " +
"                      var html = \"<div>\" + res.countynameList[i] + \"：\" + res.cou" +
"ntycount[0].data[i] + \"</div>\";\r\n                        if (!res.countylongitud" +
"e[i] || !res.countylatitude[i]) { continue };\r\n                        returnVal" +
"ue2.push({\r\n                            id: \"all\",\r\n                            " +
"location: [Number(res.countylongitude[i]), Number(res.countylatitude[i])],\r\n    " +
"                        popupHtml: html,\r\n                            dataCount:" +
" res.countycount[0].data[i] + \'\'\r\n                        });\r\n                 " +
"   }\r\n                    XZQHData[\'区\'] = returnValue2;\r\n                    XZQ" +
"HData[\'数据\'] = res.data;\r\n                    XZQHDatabc = JSON.stringify(XZQHDat" +
"a);\r\n                }, error: function (e) {\r\n\r\n                }, cache: false" +
"\r\n            });\r\n        } else {\r\n            if (XZJB) {\r\n                va" +
"r XZQHData = JSON.parse(XZQHDatabc);\r\n                if (mapCtlExt) {\r\n        " +
"            mapCtlExt.removeClusterMarker();\r\n                }\r\n               " +
" if (XZJB == \'数据\') {\r\n                    dataMarker(XZQHData[XZJB])\r\n          " +
"      } else {\r\n                    addMarkerCluster(XZQHData[XZJB]);\r\n         " +
"       }\r\n            }\r\n        }\r\n    }\r\n    function dataMarker(data){\r\n     " +
"   var returnValue = [];\r\n        var type = [];\r\n        for (var i = 0; i < da" +
"ta.length; i++) {\r\n            if (data[i].dangerlevel == null) {\r\n             " +
"   data[i].dangerlevel = \"\";\r\n            }\r\n            else if (data[i].danger" +
"level == \"A\") {\r\n                data[i].dangerlevel = \"特大型\";\r\n            } els" +
"e if (data[i].dangerlevel == \"B\") {\r\n                data[i].dangerlevel = \"大型\";" +
"\r\n            } else if (data[i].dangerlevel == \"C\") {\r\n                data[i]." +
"dangerlevel = \"中型\";\r\n            } else if (data[i].dangerlevel == \"D\") {\r\n     " +
"           data[i].dangerlevel = \"小型\";\r\n            }\r\n            if (data[i].t" +
"hreatenpeople == null) {\r\n                data[i].threatenpeople = \"\";\r\n        " +
"    }\r\n            if (data[i].threatenassets == null) {\r\n                data[i" +
"].threatenassets = \"\";\r\n            }\r\n            //详情页面\r\n            var divht" +
"ml = \'<div style=\"font-weight: bold;\"></div>\';\r\n            divhtml += \'<div sty" +
"le=\"font-weight: bold;margin-bottom:5px;\"><span style=\"margin-left:10px;\">灾害点名称：" +
"</span><span>\' + data[i].disastername + \'</span></div>\';\r\n            divhtml +=" +
" \'<div style=\"margin-bottom:5px;\"><span style=\"margin-left:10px;\">灾害类型：</span><s" +
"pan>\' + data[i].disastertype + \'</span></div>\';\r\n            divhtml += \'<div st" +
"yle=\"margin-bottom:5px;\"><span style=\"margin-left:10px;\">灾害点编号：</span><span>\' + " +
"data[i].unifiedcode + \'</span></div>\';\r\n            divhtml += \'<div style=\"marg" +
"in-bottom:5px;\"><span style=\"margin-left:10px;\">威胁人口(人)：</span><span>\' + data[i]" +
".threatenpeople + \'</span></div>\';\r\n            divhtml += \'<div style=\"margin-b" +
"ottom:5px;\"><span style=\"margin-left:10px;\">威胁财产(万元)：</span><span>\' + data[i].th" +
"reatenassets + \'</span></div>\';\r\n            divhtml += \'<div style=\"margin-bott" +
"om:5px;\"><span style=\"margin-left:10px;\">险情等级：</span><span>\' + getInfoTop().lear" +
"un.data.get([\"dataItem\", \"DANGERLEVEL\", data[i].dangerlevel]) + \'</span></div>\';" +
"\r\n            divhtml += \'<div style=\"margin-bottom:5px;\"><span style=\"margin-le" +
"ft:10px;\">地理位置：</span><span>\' + data[i].location + \'</span></div>\';\r\n           " +
" divhtml += \'<span style=\"margin-right:20px; float:right; cursor: pointer;\"><a o" +
"nclick=\"ViewDetail(\\\'\' + data[i].disastertype + \",\" + data[i].unifiedcode + \'\\\')" +
"\" href=\"#\" class=\"link-detail\">详细信息</a></span>\';\r\n            var longitude = 0," +
" latitude = 0;\r\n            if (data[i].longitude) {\r\n                longitude " +
"= parseFloat(data[i].longitude);\r\n            }\r\n            if (data[i].latitud" +
"e) {\r\n                latitude = parseFloat(data[i].latitude);\r\n            }\r\n " +
"           returnValue.push({ id: \"all\", url: \"../../Content/images/\" + data[i]." +
"disastertype + \"-16.png\", location: [longitude, latitude], popupHtml: divhtml })" +
";\r\n\r\n        }\r\n        mapCtlExt.addMarker(returnValue);\r\n    }\r\n\r\n    //加载Echa" +
"rs报表(所有区域)\r\n    function GetZHDCount() {\r\n        var queryJson = {};\r\n        v" +
"ar colorArr = [\"#123456\", \"#008cee\", \"#d274b6\", \"#d29574\"];\r\n        $.ajax({\r\n " +
"          url: \'../../api/TBL_HAZARDBASICINFOApi/GetStatisticsByZHD?queryJson=\' " +
"+ JSON.stringify(queryJson),\r\n            beforeSend: function (request) {\r\n    " +
"            request.setRequestHeader(\"Authorization\", authToken);\r\n            }" +
",\r\n            async: true,\r\n            type: \"GET\",\r\n            success: func" +
"tion (data) {\r\n                var chartBarData1 = {\r\n                    title:" +
" \"地质灾害点统计 (单位:个)\",\r\n                    legend: {},\r\n                    xAxis: " +
"{\r\n                        type: \'category\',\r\n                        data: data" +
".columnList,\r\n                        axisLabel: {\r\n                            " +
"interval: 0,\r\n                            rotate: 45,\r\n                         " +
"   show: true,\r\n                            //splitNumber: 15,\r\n                " +
"            textStyle: {\r\n\r\n                            }\r\n                     " +
"   }\r\n                    },\r\n                    yAxis: [{ type: \'value\' }],\r\n " +
"                   grid: {\r\n                        \"borderWidth\": 0,\r\n         " +
"               top: 60, right: 80,\r\n                        containLabel: true\r\n" +
"                    },\r\n                    toolbox: {\r\n                        " +
"show: true,\r\n                        feature: {\r\n                            sav" +
"eAsImage: {\r\n                                show: true,\r\n                      " +
"      }\r\n                        },\r\n                        right: \'20\'\r\n      " +
"              },\r\n                    series: [{\r\n                        name: " +
"\"\",\r\n                        type: \'bar\',\r\n                        data: data.da" +
"taList[0].data,\r\n                        itemStyle: { normal: { color: function " +
"(params) { return colorArr[0]; } } }\r\n                    }]\r\n                };" +
"\r\n                myChart1 = initMonitorChart(\"ZHD\", chartBarData1);\r\n          " +
"  }\r\n        });\r\n    }\r\n    function GetZHDPie() {\r\n        var dataSeries = []" +
";\r\n        var zhdSeries = [];\r\n        var activeSubjectsArr = [];\r\n        $.a" +
"jax({\r\n            url: \"../api/TBL_HAZARDBASICINFOApi/GetDicAnalyse\",\r\n        " +
"    beforeSend: function (request) {\r\n                request.setRequestHeader(\"" +
"Authorization\", authToken);\r\n            },\r\n            data: { enCode: \'Hazard" +
"Type\' },\r\n            async: true,\r\n            type: \"GET\",\r\n            succes" +
"s: function (dataList) {\r\n                var data = dataList[0];\r\n             " +
"   for (var key in data) {\r\n                    dataSeries.push(key);\r\n         " +
"           zhdSeries.push(data[key]);\r\n                }\r\n                for (v" +
"ar i = 0; i < dataSeries.length; i++) {\r\n                    var activeSubjectsO" +
"bject = {};\r\n                    for (var j = 0; j < zhdSeries.length; j++) {\r\n " +
"                       if (i == j) {\r\n                            activeSubjects" +
"Object.name = dataSeries[i];\r\n                            activeSubjectsObject.v" +
"alue = zhdSeries[j];\r\n                            activeSubjectsArr.push(activeS" +
"ubjectsObject);\r\n                        }\r\n                    }\r\n             " +
"   }\r\n                myChart = echarts.init(document.getElementById(\"JCD\"));\r\n " +
"               //指定图表配置数据\r\n                option = {\r\n                    title" +
": {\r\n                        x: \'left\',\r\n                        top: 8,\r\n      " +
"                  text: \'灾害点（类型）统计  (单位:个)\',\r\n                        textStyle:" +
" {\r\n                            color: \'#008cee\',\r\n                            f" +
"ontStyle: \'normal\',\r\n                            fontWeight: \'normal\',\r\n        " +
"                    fontSize: 16\r\n                        }\r\n                   " +
" },\r\n                    tooltip: {\r\n                        trigger: \'item\',\r\n " +
"                       formatter: \"{a} <br/>{b} : {c} ({d}%)\"\r\n                 " +
"   },\r\n                    legend: {\r\n                        orient: \'vertical\'" +
",\r\n                        type: \'scroll\',\r\n                        orient: \'ver" +
"tical\',\r\n                        right: 31,\r\n                        top: 30,\r\n " +
"                       bottom: 20,\r\n                        data: dataSeries\r\n  " +
"                  },\r\n                    toolbox: {\r\n                        sh" +
"ow: true,\r\n                        feature: {\r\n                            mark:" +
" true,\r\n                            //dataView:{ show:true,readOnly:false},\r\n   " +
"                         saveAsImage: {\r\n                                show: t" +
"rue,\r\n                                excludeComponents: [\'toolbox\'],\r\n         " +
"                       pixelRatio: 2\r\n                            }\r\n           " +
"             },\r\n                        right: 20\r\n                    },\r\n    " +
"                series: [\r\n                        {\r\n                          " +
"  name: \'灾害数据\',\r\n                            type: \'pie\',\r\n                     " +
"       radius: \'55%\',\r\n                            center: [\'50%\', \'60%\'],\r\n    " +
"                        data: activeSubjectsArr,\r\n                            it" +
"emStyle: {\r\n                                emphasis: {\r\n                       " +
"             shadowBlur: 10,\r\n                                    shadowOffsetX:" +
" 0,\r\n                                    shadowColor: \'rgba(0, 0, 0, 0.5)\'\r\n    " +
"                            }\r\n                            }\r\n                  " +
"      }\r\n                    ]\r\n                }\r\n                myChart.setOp" +
"tion(option, true);\r\n            }\r\n        })\r\n    }\r\n    //详情\r\n    function Vi" +
"ewDetail(type) {\r\n        var keyValue = type.split(\",\")[1];\r\n        var types " +
"= type.split(\",\")[0];\r\n        var title = types;\r\n        if (types == \"滑坡\") {\r" +
"\n            types = \"001\"\r\n        } else if (types == \"崩塌\") {\r\n            typ" +
"es = \"002\"\r\n        } else if (types == \"泥石流\") {\r\n            types = \"003\"\r\n   " +
"     } else if (types == \"地面沉降\") {\r\n            types = \"004\"\r\n        } else if" +
" (types == \"地面塌陷\") {\r\n            types = \"005\"\r\n        } else if (types == \"地裂" +
"缝\") {\r\n            types = \"006\"\r\n        } else if (types == \"斜坡\") {\r\n         " +
"   types = \"007\"\r\n        }\r\n        if (checkedRow(keyValue)) {\r\n            ne" +
"wTabs({\r\n                id: \"DZXQ\",\r\n                url: \"/JXGeoManage/TBL_HAZ" +
"ARDBASICINFO/DETAIL?keyValue=\" + keyValue + \"&types=\" + types + \"&details=01&cal" +
"lback=show\"\r\n            });\r\n        }\r\n    }\r\n</script>\n");

});

        }
    }
}
#pragma warning restore 1591
